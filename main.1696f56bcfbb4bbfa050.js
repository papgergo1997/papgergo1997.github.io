(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.i)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.g)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.e)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.h)(Object(r.h)([],Object(r.g)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.g)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.i)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.g)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.i)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function u(t){a=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.I)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.C)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},f=d("localStorage"),p=d("sessionStorage"),g=new s.b("@firebase/database"),m=(c=1,function(){return c++}),y=function(t){var e=Object(i.H)(t),n=new i.d;n.update(e);var r=n.digest();return i.g.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=v.apply(null,o):n+="object"==typeof o?Object(i.I)(o):o,n+=" "}return n},b=null,_=!0,w=function(t,e){Object(i.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.a.VERBOSE,b=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=v.apply(null,t);b(n)}},O=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,Object(o.h)([t],Object(o.g)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(o.h)([],Object(o.g)(t)));g.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(o.h)([],Object(o.g)(t)));throw g.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(o.h)([],Object(o.g)(t)));g.warn(n)},k=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",x="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===I||e===x)return-1;if(e===I||t===x)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.I)(e))},P=function(t){if("object"!=typeof t||null===t)return Object(i.I)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.I)(e[o]),r+=":",r+=P(t[e[o]]);return r+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var F=function(t){var e,n,r,o,s;Object(i.e)(!k(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},L=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(L.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout(function(){throw T("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){T('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),H=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W="websocket",K="long_polling",Q=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function $(t,e,n){var r;if(Object(i.e)("string"==typeof e,"typeof type must == string"),Object(i.e)("object"==typeof n,"typeof params must == object"),e===W)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==K)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return D(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var G=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.l)(this.counters_)},t}(),Z={},Y={};function J(t){var e=t.toString();return Z[e]||(Z[e]=new G),Z[e]}var X=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=O(t),this.stats_=J(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),$(e,K,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new X(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.y)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new rt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.g)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.g)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.y)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.h)(e),r=N(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.y)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.I)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.y)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){C("frame writing exception"),u.stack&&C(u.stack),C(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.y)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=O(this.connId),this.stats_=J(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.y)()&&"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),$(t,W,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(i.y)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.C)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var u=Object(o.i)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=O("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=R("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ut=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ct=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.h)([],Object(o.g)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.e)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.w)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.d)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ct),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ht("")}function ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function mt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=ft(t),r=ft(e);if(null===n)return e;if(n===r)return wt(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=yt(t,0),r=yt(e,0),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ot(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var St=function(){return function(t,e){this.errorPrefix_=e,this.parts_=yt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.G)(this.parts_[n]);Tt(this)}}();function Tt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kt(t))}function kt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var It,xt,At=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.d)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ct),jt=1e3,Rt=function(t){function e(n,r,o,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=O("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=jt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.y)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return At.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.d)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.I)(o)),Object(i.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.a,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.e)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.i)(t,"w")){var n=Object(i.F)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.B)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.e)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.I)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(i.I)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.b)(this,void 0,void 0,function(){var t,n,r,s,a,u,c,l,h,d,f,p,g,m=this;return Object(o.e)(this,function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.e)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=o.g.apply(void 0,[y.sent(),2]),f=d[0],p=d[1],u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){T(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&T(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.u)(this.interruptReasons_)&&(this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return P(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){C("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.i)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.i)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.y)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.w)()?t["framework.cordova"]=1:Object(i.z)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ut),Pt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Nt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Pt(I,t),r=new Pt(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Pt.MIN},t}(),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return It},set:function(t){It=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(x,It)},e.prototype.makePost=function(t,e){return Object(i.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Pt(t,It)},e.prototype.toString=function(){return".key"},e}(Nt),Ft=new Dt,Lt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Mt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Mt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Lt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Lt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}();function qt(t,e){return A(t.name,e.name)}function Bt(t,e){return A(t,e)}var Ht,zt,Wt,Kt,Qt,$t=function(t){return"number"==typeof t?"number:"+F(t):"string:"+t},Gt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.i)(e,".sv"),"Priority must be a string or number.")}else Object(i.e)(t===xt||t.isEmpty(),"priority of unexpected type.");Object(i.e)(t===xt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Zt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Gt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===ft(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ft(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.e)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?F(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.e)(o>=0,"Unknown leaf type: "+n),Object(i.e)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Yt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(x,new Zt("[PRIORITY-POST]",Wt))},e.prototype.makePost=function(t,e){var n=zt(t);return new Pt(e,new Zt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Nt)),Jt=Math.log(2),Xt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Mt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Mt.BLACK):(a(h,Mt.BLACK),a(h,Mt.RED))}return o}(new Xt(t.length));return new Vt(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.e)(ee&&Yt,"ChildrenNode.ts has not been loaded"),Kt=Kt||new t({".priority":ee},{".priority":Yt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.F)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(i.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.e)(e!==Ft,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Pt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var d=Object(o.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.D)(this.indexes_,function(t,o){var s=Object(i.F)(r.indexSet_,o);if(Object(i.e)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Pt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Pt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.D)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Pt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Gt(this.priorityNode_),this.children_.isEmpty()&&Object(i.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Qt||(Qt=new t(new Vt(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Qt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Qt:e},t.prototype.getChild=function(t){var e=ft(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Pt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Qt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=ft(t);if(null===n)return e;Object(i.e)(".priority"!==ft(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Yt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Yt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Pt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Ft||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ft||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Yt),r=e.getIterator(Yt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ft?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Vt(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(o.d)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Zt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return D(t,function(e,r){if(Object(i.i)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(oe(e))}var r=[],o=!1;if(D(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new Pt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,function(t){return t.name},Bt);if(o){var a=te(r,Yt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Yt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Pt,{MIN:{value:new Pt(I,re.EMPTY_NODE)},MAX:{value:new Pt(x,ie)}}),Dt.__EMPTY_NODE=re.EMPTY_NODE,Zt.__childrenNodeConstructor=re,xt=ie,Wt=ie,zt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.e)(!_t(e)&&".priority"!==ft(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.d)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Pt(x,t)},e.prototype.toString=function(){return yt(this.indexPath_,0).join("/")},e}(Nt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return Pt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Pt(e,n)},e.prototype.toString=function(){return".value"},e}(Nt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.e)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.e)(20===o.length,"nextPushId: Length should be 20."),o}),de=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return I;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):Object(i.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(ye(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Yt,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Yt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Pt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Yt,function(t,e){i.matches(new Pt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Pt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(i.e)(u.numChildren()===this.limit_,"");var c=new Pt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(ye(e,n,d)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(me(e,d));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(ge(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(me(l.name,l.node)),o.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Yt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Oe(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ee(t,e){var n=t.copy();return n.index_=e,n}function Se(t){var e,n={};return t.isDefault()||(t.index_===Yt?e="$priority":t.index_===ce?e="$value":t.index_===Ft?e="$key":(Object(i.e)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.I)(e),t.startSet_&&(n.startAt=Object(i.I)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.I)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.I)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.I)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Te(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Yt&&(e.i=t.index_.toString()),e}var ke=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=O("p:rest:"),o.listens_={},o}return Object(o.d)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.e)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Se(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.F)(s.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Se(t._queryParams),r=t._path.toString(),o=new i.a;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=Object(o.g)(s,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.E)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.C)(h.responseText)}catch(e){T("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&T("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ut),Ie=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function xe(){return{value:null,children:new Map}}function Ae(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ft(e);t.children.has(r)||t.children.set(r,xe()),Ae(t.children.get(r),e=gt(e),n)}}function je(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Yt,function(e,n){Ae(t,new ht(e),n)}),je(t,e)}if(t.children.size>0){var r=ft(e);return e=gt(e),t.children.has(r)&&je(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Re(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Re(r,new ht(e.toString()+"/"+t),n)})}var Pe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&D(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ne=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Pe(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,function(e,o){o>0&&Object(i.i)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),De=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Fe(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Le,Me=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=De.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(i.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(dt(),n,this.revert)}return Object(i.e)(ft(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Ue=function(){function t(t,e){this.source=t,this.path=e,this.type=De.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt()):new t(this.source,gt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=De.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=De.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ve(this.source,dt(),n.value):new t(this.source,dt(),n)}return Object(i.e)(ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=ft(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),He=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function ze(t,e,n,r,o,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.f)("Should only compare child_ events.");var r=new Pt(e.childName,e.snapshotNode),o=new Pt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function We(t,e){return{eventCache:t,serverCache:e}}function Ke(t,e,n,r){return We(new Be(e,n,r),t.serverCache)}function Qe(t,e,n,r){return We(t.eventCache,new Be(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ge(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ze=function(){function t(t,e){void 0===e&&(Le||(Le=new Vt(j)),e=Le),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return D(e,function(t,e){n=n.set(new ht(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(_t(t))return null;var n=ft(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:bt(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=ft(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=ft(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ft(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=ft(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=ft(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=ft(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=ft(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Ye=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ze(null))},t}();function Je(t,e,n){if(_t(e))return new Ye(new Ze(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Ye(t.writeTree_.set(i,o))}var a=new Ze(n),u=t.writeTree_.setTree(e,a);return new Ye(u)}function Xe(t,e,n){var r=t;return D(n,function(t,n){r=Je(r,bt(e,t),n)}),r}function tn(t,e){if(_t(e))return Ye.empty();var n=t.writeTree_.setTree(e,new Ze(null));return new Ye(n)}function en(t,e){return null!=nn(t,e)}function nn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function rn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Yt,function(t,n){e.push(new Pt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Pt(t,n.value))}),e}function on(t,e){if(_t(e))return t;var n=nn(t,e);return new Ye(null!=n?new Ze(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function an(t,e){return un(dt(),t.writeTree_,e)}function un(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.e)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=un(bt(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function cn(t,e){return _n(e,t)}function ln(t,e){if(t.snap)return Et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Et(bt(t.path,n),e))return!0;return!1}function hn(t){return t.visible}function dn(t,e,n){for(var r=Ye.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,u=void 0;if(s.snap)Et(n,a)?r=Je(r,u=wt(n,a),s.snap):Et(a,n)&&(u=wt(a,n),r=Je(r,dt(),s.snap.getChild(u)));else{if(!s.children)throw Object(i.f)("WriteRecord should have .snap or .children");if(Et(n,a))r=Xe(r,u=wt(n,a),s.children);else if(Et(a,n))if(_t(u=wt(a,n)))r=Xe(r,dt(),s.children);else{var c=Object(i.F)(s.children,ft(u));if(c){var l=c.getChild(gt(u));r=Je(r,dt(),l)}}}}}return r}function fn(t,e,n,r,i){if(r||i){var o=on(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||en(o,dt())?an(dn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Et(t.path,e)||Et(e,t.path))},e),n||re.EMPTY_NODE):null}var s=nn(t.visibleWrites,e);if(null!=s)return s;var a=on(t.visibleWrites,e);return sn(a)?n:null!=n||en(a,dt())?an(a,n||re.EMPTY_NODE):null}function pn(t,e,n,r){return fn(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=nn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=on(t.visibleWrites,e);return n.forEachChild(Yt,function(t,e){var n=an(on(o,new ht(t)),e);r=r.updateImmediateChild(t,n)}),rn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return rn(on(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function mn(t,e,n,r){return function(t,e,n,r,o){Object(i.e)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(en(t.visibleWrites,s))return null;var a=on(t.visibleWrites,s);return sn(a)?o.getChild(n):an(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function yn(t,e){return function(t,e){return nn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function vn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=nn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(on(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return _n(bt(t.treePath,e),t.writeTree)}function _n(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.e)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Cn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),On=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ge(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=on(t.visibleWrites,e),c=nn(u,dt());if(null!=c)a=c;else{if(null==n)return[];a=an(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function En(t,e,n,r,o,s){var a=e.eventCache;if(null!=yn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(i.e)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ge(e),h=gn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=pn(r,Ge(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=ft(n);if(".priority"===f){Object(i.e)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=mn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=gt(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=mn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=vn(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,o,s):a.getNode()}}return Ke(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function Sn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=ft(n);if(!c.isCompleteForPath(n)&&pt(n)>1)return e;var f=gt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Cn,null)}var g=Qe(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return En(t,g,n,i,new On(i,g,o),a)}function Tn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new On(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ke(e,u,!0,t.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ke(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=gt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(_t(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===mt(d)&&g.getChild(vt(d)).isEmpty()?g:g.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:Ke(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function kn(t,e){return t.eventCache.isCompleteForChild(e)}function In(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function xn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ze(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=In(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ht(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=In(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ht(n),h,i,o,s,a)}}),c}var An,jn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new _e(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Be(u,s.isFullyInitialized(),i.filtersNodes()),h=new Be(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=We(h,l),this.eventGenerator_=new He(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Rn(t,e){var n=Ge(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_t(e)&&!n.getImmediateChild(ft(e)).isEmpty())?n.getChild(e):null}function Pn(t){return 0===t.eventRegistrations_.length}function Nn(t,e,n){var r=[];if(n){Object(i.e)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Dn(t,e,n,r){e.type===De.MERGE&&null!==e.source.queryId&&(Object(i.e)(Ge(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.e)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,u=function(t,e,n,r,o){var s,a,u=new wn;if(n.type===De.OVERWRITE){var c=n;c.source.fromUser?s=Tn(t,e,c.path,c.snap,r,o,u):(Object(i.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=Sn(t,e,c.path,c.snap,r,o,a,u))}else if(n.type===De.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);kn(e,ft(c))&&(a=Tn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);kn(e,ft(c))||(a=Tn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,o,u):(Object(i.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=xn(t,e,l.path,l.children,r,o,a,u))}else if(n.type===De.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=yn(r,n))return e;var u=new On(r,e,o),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===ft(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=pn(r,Ge(e));else{var d=e.serverCache.getNode();Object(i.e)(d instanceof re,"serverChildren would be complete if leaf node"),h=gn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=ft(n),p=vn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,gt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,re.EMPTY_NODE,gt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(r,Ge(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=yn(r,dt()),Ke(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,s){if(null!=yn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Ze(null);return u.getNode().forEachChild(Ft,function(t,e){c=c.set(new ht(t),e)}),xn(t,e,n,c,i,o,a,s)}return e}var l=new Ze(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),xn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==De.LISTEN_COMPLETE)throw Object(i.f)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return En(t,Qe(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,Cn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe($e(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return o=t.processor_,s=u.viewCache,Object(i.e)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.e)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.e)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Fn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Fn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),ze(t,i,"child_removed",e,r,n),ze(t,i,"child_added",e,r,n),ze(t,i,"child_moved",o,r,n),ze(t,i,"child_changed",e,r,n),ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Ln,Mn=function(){return function(){this.views=new Map}}();function Un(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.e)(null!=c,"SyncTree gave us an op for an invalid query."),Dn(c,e,n,r)}var l=[];try{for(var h=Object(o.i)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Dn(c=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=pn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=gn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var u=We(new Be(s,a,!1),new Be(r,i,!1));return new jn(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=Object(o.i)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var s=Object(o.i)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||Rn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function Hn(t,e){return e._queryParams.loadsAllData()?Kn(t):t.views.get(e._queryIdentifier)}function zn(t,e){return null!=Hn(t,e)}function Wn(t){return null!=Kn(t)}function Kn(t){var e,n;try{for(var r=Object(o.i)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Qn=1,$n=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ze(null),this.pendingWriteTree_={visibleWrites:Ye.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Gn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.e)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Je(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?er(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Zn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&ln(u,r.path)?o=!1:Et(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=dn(t.allWrites,hn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tn(t.visibleWrites,r.path):D(r.children,function(e){t.visibleWrites=tn(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new Ze(null);return null!=r.snap?o=o.set(dt(),!0):D(r.children,function(t){o=o.set(new ht(t),!0)}),er(t,new Me(r.path,o,n))}return[]}function Yn(t,e,n){return er(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Jn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e._queryIdentifier||zn(a,e))){var c=function(t,e,n,r){var s,a,u=e._queryIdentifier,c=[],l=[],h=Wn(t);if("default"===u)try{for(var d=Object(o.i)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(o.g)(f.value,2),m=g[0];l=l.concat(Nn(p=g[1],n,r)),Pn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){s={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Nn(p,n,r)),Pn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Wn(t)&&c.push(new(Object(i.e)(An,"Reference.ts has not been loaded"),An)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(s,function(t,e){return Wn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Wn(e))return[Kn(e)];var r=[];return e&&(r=qn(e)),D(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,v=ir(t,m);t.listenProvider_.startListening(lr(y),or(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(lr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(lr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Xn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);o=o||Bn(e,n),s=s||Wn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Wn(u),o=o||Bn(u,dt())):(u=new Mn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,dt());n&&(o=o.updateImmediateChild(t,n))}));var c=zn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=sr(e);Object(i.e)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Qn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Yt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Fn(t,r,n.getNode(),e)}(s,n)}(u,e,n,cn(t.pendingWriteTree_,r),o,a);if(!c&&!s){var f=Hn(u,e);d=d.concat(function(t,e,n){var r=e._path,o=or(t,e),s=ir(t,n),a=t.listenProvider_.startListening(lr(e),o,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.e)(!Wn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&Wn(e))return[Kn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),D(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(lr(h),or(t,h))}return a}(t,e,f))}return d}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,wt(t,e));if(r)return r});return fn(r,e,i,n,!0)}function er(t,e){return nr(e,t.syncPointTree_,null,cn(t.pendingWriteTree_,dt()))}function nr(t,e,n,r){if(_t(t.path))return rr(t,e,n,r);var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[],s=ft(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(nr(a,u,c,l))}return i&&(o=o.concat(Un(i,t,r,n))),o}function rr(t,e,n,r){var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(rr(u,i,s,a)))}),i&&(o=o.concat(Un(i,t,r,n))),o}function ir(t,e){var n=e.query,r=or(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=ur(r),o=i.path,s=i.queryId,a=wt(o,e);return cr(t,o,new Ue(Fe(s),a))}return[]}(t,n._path,r):function(t,e){return er(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Jn(t,n,null,i)}}}function or(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function ur(t){var e=t.indexOf("$");return Object(i.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function cr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.e)(r,"Missing sync point for query tag that we're tracking"),Un(r,n,cn(t.pendingWriteTree_,e),null)}function lr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.e)(Ln,"Reference.ts has not been loaded"),Ln)(t._repo,t._path):t}var hr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),dr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),fr=function(t,e,n){return t&&"object"==typeof t?(Object(i.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pr(t[".sv"],e,n):"object"==typeof t[".sv"]?gr(t[".sv"],e):void Object(i.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.e)(!1,"Unexpected server value: "+t)}},gr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.e)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.e)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},mr=function(t,e,n,r){return vr(e,new dr(n,t),r)},yr=function(t,e,n){return vr(t,new hr(e),n)};function vr(t,e,n){var r,i=t.getPriority().val(),o=fr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=fr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Zt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Zt(o))),u.forEachChild(Yt,function(t,i){var o=vr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function _r(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=ft(n);null!==o;){var s=Object(i.F)(r.node.children,o)||{children:{},childCount:0};r=new br(o,r,s),o=ft(n=gt(n))}return r}function wr(t){return t.node.value}function Cr(t,e){t.node.value=e,kr(t)}function Or(t){return t.node.childCount>0}function Er(t,e){D(t.node.children,function(n,r){e(new br(n,t,r))})}function Sr(t,e,n,r){n&&!r&&e(t),Er(t,function(t){Sr(t,e,!0,r)}),n&&r&&e(t)}function Tr(t){return new ht(null===t.parent?t.name:Tr(t.parent)+"/"+t.name)}function kr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Or(t)}(n),o=Object(i.i)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,kr(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,kr(t))}(t.parent,t.name,t)}var Ir=/[\[\].#$\/\u0000-\u001F\u007F]/,xr=/[\[\].#$\u0000-\u001F\u007F]/,Ar=10485760,jr=function(t){return"string"==typeof t&&0!==t.length&&!Ir.test(t)},Rr=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},Pr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!k(t)||t&&"object"==typeof t&&Object(i.i)(t,".sv")},Nr=function(t,e,n,r){r&&void 0===e||Dr(Object(i.n)(t,"value"),e,n)},Dr=function(t,e,n){var r=n instanceof ht?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+kt(r));if("function"==typeof e)throw new Error(t+"contains a function "+kt(r)+" with contents = "+e.toString());if(k(e))throw new Error(t+"contains "+e.toString()+" "+kt(r));if("string"==typeof e&&e.length>Ar/3&&Object(i.G)(e)>Ar)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+kt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(D(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!jr(e)))throw new Error(t+" contains an invalid key ("+e+") "+kt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.G)(e),Tt(t)}(r,e),Dr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(i.G)(u),a.parts_.length>0&&(a.byteLength_-=1)}),o&&s)throw new Error(t+' contains ".value" child '+kt(r)+" in addition to actual children.")}},Fr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.n)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];D(e,function(t,e){var r=new ht(t);if(Dr(o,e,bt(n,r)),".priority"===mt(r)&&!Pr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=yt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!jr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Lr=function(t,e,n){if(!n||void 0!==e){if(k(e))throw new Error(Object(i.n)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pr(e))throw new Error(Object(i.n)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.n)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ur=function(t,e,n,r){if(!(r&&void 0===n||jr(n)))throw new Error(Object(i.n)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error(Object(i.n)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===ft(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!jr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rr(t)}(n))throw new Error(Object(i.n)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Hr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.n)(t,e)+"must be a boolean.")},zr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ot(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Kr(t,e,n){Wr(t,n),$r(t,function(t){return Ot(t,e)})}function Qr(t,e,n){Wr(t,n),$r(t,function(t){return Et(t,e)||Et(e,t)})}function $r(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Gr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Gr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&C("event: "+n.toString()),U(r)}}}var Zr="repo_interrupt",Yr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xe(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Jr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Xr(t){return(e=(e={timestamp:Jr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ti(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var u=Object(i.D)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=ar(t,r);if(i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e),c=Ze.fromObject(n);return cr(t,s,new qe(Fe(a),u,c))}return[]}(t.serverSyncTree_,s,u,o)}else{var c=oe(n);a=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e);return cr(t,s,new Ve(Fe(a),u,n))}return[]}(t.serverSyncTree_,s,c,o)}else if(r){var l=Object(i.D)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ze.fromObject(n);return er(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Yn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=fi(t,s)),Qr(t.eventQueue_,d,a)}function ei(t,e){ni(t,"connected",e),!1===e&&function(t){ci(t,"onDisconnectEvents");var e=Xr(t),n=xe();Re(t.onDisconnect_,dt(),function(r,i){var o=mr(r,i,t.serverSyncTree_,e);Ae(n,r,o)});var r=[];Re(n,dt(),function(e,n){r=r.concat(Yn(t.serverSyncTree_,e,n));var i=vi(t,e);fi(t,i)}),t.onDisconnect_=xe(),Qr(t.eventQueue_,dt(),r)}(t)}function ni(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Yn(t.infoSyncTree_,r,i);Qr(t.eventQueue_,r,o)}function ri(t){return t.nextWriteId_++}function ii(t,e,n,r,i){ci(t,"set",{path:e.toString(),value:n,priority:r});var o=Xr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),u=yr(s,a,o),c=ri(t),l=Gn(t.serverSyncTree_,e,u,c,!0);Wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||T("set at "+e+" failed: "+n);var s=Zn(t.serverSyncTree_,c,!o);Qr(t.eventQueue_,e,s),li(0,i,n,r)});var h=vi(t,e);fi(t,h),Qr(t.eventQueue_,h,[])}function oi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&je(t.onDisconnect_,e),li(0,n,r,i)})}function si(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Ae(t.onDisconnect_,e,i),li(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===ft(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}function ui(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Zr)}function ci(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),C.apply(void 0,Object(o.h)([r],Object(o.g)(e)))}function li(t,e,n,r){e&&U(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function hi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function di(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||yi(t,e),wr(e)){var n=gi(t,e);Object(i.e)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=hi(t,e,r),s=o,a=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.e)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ci(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Zn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(yi(t,_r(t.transactionQueueTree_,e)),di(t,t.transactionQueueTree_),Qr(t.eventQueue_,e,i),a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(T("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;fi(t,e)}},a)}(t,Tr(e),n)}else Or(e)&&Er(e,function(e){di(t,e)})}function fi(t,e){var n=pi(t,e),r=Tr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(i.e)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Zn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Zn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=hi(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Dr("transaction failed: Data returned ",f,c.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(i.i)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=Xr(t),y=yr(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ri(t),s.splice(s.indexOf(g),1),o=(o=o.concat(Gn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Zn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Zn(t.serverSyncTree_,c.currentWriteId,!0))}Qr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(yi(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);di(t,t.transactionQueueTree_)}}(t,gi(t,n),r),r}function pi(t,e){var n,r=t.transactionQueueTree_;for(n=ft(e);null!==n&&void 0===wr(r);)r=_r(r,n),n=ft(e=gt(e));return r}function gi(t,e){var n=[];return mi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function mi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Er(e,function(e){mi(t,e,n)})}function yi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cr(e,n.length>0?n:void 0)}Er(e,function(e){yi(t,e)})}function vi(t,e){var n=Tr(pi(t,e)),r=_r(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Sr(r,function(e){bi(t,e)}),n}function bi(t,e){var n=wr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.e)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.e)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Zn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Cr(e,void 0):n.length=s+1,Qr(t.eventQueue_,Tr(e),o),a=0;a<r.length;a++)U(r[a])}}var _i=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Q(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},wi=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.i)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},Ci=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.I)(this.snapshot.exportVal())},t}(),Oi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ei=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.e)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Si=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.a;return oi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new i.a;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),Nr("OnDisconnect.set",t,this._path,!1);var e=new i.a;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),Nr("OnDisconnect.setWithPriority",t,this._path,!1),Lr("OnDisconnect.setWithPriority",e,!1);var n=new i.a;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Ae(t.onDisconnect_,e,o),li(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Fr("OnDisconnect.update",t,this._path,!1);var e=new i.a;return function(t,e,n,r){if(Object(i.u)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void li(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&D(n,function(n,r){var i=oe(r);Ae(t.onDisconnect_,bt(e,n),i)}),li(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ti=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _t(this._path)?null:mt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ai(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Te(this._queryParams),e=P(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Te(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.o)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ot(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function ki(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ii(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ft){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Yt){if(null!=e&&!Pr(e)||null!=n&&!Pr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.e)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ai=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.d)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=vt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ti),ji=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=Ni(this.ref,e);return new t(this._node.getChild(n),r,Yt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ni(n.ref,r),Yt))})},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ri(t,e){return(t=Object(i.o)(t))._checkNotDeleted("ref"),void 0!==e?Ni(t._root,e):t._root}function Pi(t,e){(t=Object(i.o)(t))._checkNotDeleted("refFromURL");var n=_i(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ri(t,n.path.toString())}function Ni(t,e){var n;return null===ft((t=Object(i.o)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new Ai(t._repo,bt(t._path,e))}function Di(t,e){t=Object(i.o)(t),qr("push",t._path),Nr("push",e,t._path,!0);var n,r=Jr(t._repo),o=he(r),s=Ni(t,o),a=Ni(t,o);return n=null!=e?Li(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Fi(t){return qr("remove",t._path),Li(t,null)}function Li(t,e){t=Object(i.o)(t),qr("set",t._path),Nr("set",e,t._path,!1);var n=new i.a;return ii(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Mi(t,e){t=Object(i.o)(t),qr("setPriority",t._path),Lr("setPriority",e,!1);var n=new i.a;return ii(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Ui(t,e,n){if(qr("setWithPriority",t._path),Nr("setWithPriority",e,t._path,!1),Lr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.a;return ii(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Fr("update",e,t._path,!1);var n=new i.a;return function(t,e,n,r){ci(t,"update",{path:e.toString(),value:n});var o=!0,s=Xr(t),a={};if(D(n,function(n,r){o=!1,a[n]=mr(bt(e,n),oe(r),t.serverSyncTree_,s)}),o)C("update() called with empty data.  Don't do anything."),li(0,r,"ok",void 0);else{var u=ri(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.e)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Xe(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Ze.fromObject(n);return er(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,u);Wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||T("update at "+e+" failed: "+n);var s=Zn(t.serverSyncTree_,u,!o),a=s.length>0?fi(t,e):e;Qr(t.eventQueue_,a,s),li(0,r,n,i)}),D(n,function(n){var r=vi(t,bt(e,n));fi(t,r)}),Qr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ci("value",this,new ji(t.snapshotNode,new Ai(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.e)(null!=t.childName,"Child events should have a childName.");var n=Ni(new Ai(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ci(t.type,this,new ji(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Hi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ai(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Ei(n,o||void 0),c="value"===e?new qi(u):new Bi(e,u);return function(t,e,n){var r;r=".info"===ft(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ai(t._repo,t,c)}}function zi(t,e,n,r){return Hi(t,"value",e,n,r)}function Wi(t,e,n,r){return Hi(t,"child_added",e,n,r)}function Ki(t,e,n,r){return Hi(t,"child_changed",e,n,r)}function Qi(t,e,n,r){return Hi(t,"child_moved",e,n,r)}function $i(t,e,n,r){return Hi(t,"child_removed",e,n,r)}function Gi(t,e,n){var r=null,i=n?new Ei(n):null;"value"===e?r=new qi(i):e&&(r=new Bi(e,i)),ai(t._repo,t,r)}var Zi=function(){return function(){}}(),Yi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.d)(e,t),e.prototype._apply=function(t){Nr("endAt",this._value,t._path,!0);var e=Oe(t._queryParams,this._value,this._key);if(xi(e),Ii(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(t._repo,t._path,e,t._orderByCalled)},e}(Zi);function Ji(t,e){return Ur("endAt","key",e,!0),new Yi(t,e)}var Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.d)(e,t),e.prototype._apply=function(t){Nr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ft?("string"==typeof n&&(n=fe(n)),i=Oe(e,n,r)):i=Oe(e,n,null==r?I:fe(r)),i.endBeforeSet_=!0,i);if(xi(o),Ii(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(t._repo,t._path,o,t._orderByCalled)},e}(Zi);function to(t,e){return Ur("endBefore","key",e,!0),new Xi(t,e)}var eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.d)(e,t),e.prototype._apply=function(t){Nr("startAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(xi(e),Ii(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ti(t._repo,t._path,e,t._orderByCalled)},e}(Zi);function no(t,e){return void 0===t&&(t=null),Ur("startAt","key",e,!0),new eo(t,e)}var ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.d)(e,t),e.prototype._apply=function(t){Nr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ft?("string"==typeof n&&(n=de(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?x:de(r)),i.startAfterSet_=!0,i);if(xi(o),Ii(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ti(t._repo,t._path,o,t._orderByCalled)},e}(Zi);function io(t,e){return Ur("startAfter","key",e,!0),new ro(t,e)}var oo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.d)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Zi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.d)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Zi);function uo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var co=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.d)(e,t),e.prototype._apply=function(t){ki(t,"orderByChild");var e=new ht(this._path);if(_t(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ue(e),r=Ee(t._queryParams,n);return Ii(r),new Ti(t._repo,t._path,r,!0)},e}(Zi);function lo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new co(t)}var ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype._apply=function(t){ki(t,"orderByKey");var e=Ee(t._queryParams,Ft);return Ii(e),new Ti(t._repo,t._path,e,!0)},e}(Zi);function fo(){return new ho}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype._apply=function(t){ki(t,"orderByPriority");var e=Ee(t._queryParams,Yt);return Ii(e),new Ti(t._repo,t._path,e,!0)},e}(Zi);function go(){return new po}var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e.prototype._apply=function(t){ki(t,"orderByValue");var e=Ee(t._queryParams,ce);return Ii(e),new Ti(t._repo,t._path,e,!0)},e}(Zi);function yo(){return new mo}var vo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.d)(e,t),e.prototype._apply=function(t){if(Nr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Yi(this._value,this._key)._apply(new eo(this._value,this._key)._apply(t))},e}(Zi);function bo(t,e){return Ur("equalTo","key",e,!0),new vo(t,e)}function _o(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.o)(t);try{for(var u=Object(o.i)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(i.e)(!An,"__referenceConstructor has already been defined"),An=t}(Ai),function(t){Object(i.e)(!Ln,"__referenceConstructor has already been defined"),Ln=t}(Ai);var wo={},Co=!1;function Oo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=_i(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=_i(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new H(H.OWNER):new B(t.name,t.options,e);Br("Invalid Firebase Database URL",a),_t(a.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=wo[e.name];i||(wo[e.name]=i={});var o=i[t.toURLString()];return o&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Yr(t,Co,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new Eo(h,t)}var Eo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=J(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new ke(t.repoInfo_,function(e,n,r,i){ti(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ei(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.I)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Rt(t.repoInfo_,e,function(e,n,r,i){ti(t,e,n,r,i)},function(e){ei(t,e)},function(e){!function(t,e){D(e,function(e,n){ni(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Ne(t.stats_,t.server_)},o=t.repoInfo_.toString(),Y[o]||(Y[o]=r()),Y[o]),t.infoData_=new Ie,t.infoSyncTree_=new $n({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Yn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ni(t,"connected",!1),t.serverSyncTree_=new $n({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Qr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ai(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||S("Database "+e+"("+t.repoInfo_+") has already been deleted."),ui(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&S("Cannot call "+t+" on a deleted database.")},t}();function So(t){(t=Object(i.o)(t))._checkNotDeleted("goOffline"),ui(t._repo)}function To(t){var e;(t=Object(i.o)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Zr)}var ko={".sv":"timestamp"},Io=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function xo(t,e,n){var r;if(t=Object(i.o)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.a,a=zi(t,function(){});return function(e,n,r,o,a,u){ci(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new ji(r,new Ai(t._repo,t._path),Yt),s.resolve(new Io(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=hi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Dr("transaction failed: Data returned ",h,c.path),c.status=0;var d=_r(e.transactionQueueTree_,n),f=wr(d)||[];f.push(c),Cr(d,f);var p=void 0;"object"==typeof h&&null!==h&&Object(i.i)(h,".priority")?(p=Object(i.F)(h,".priority"),Object(i.e)(Pr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var g=Xr(e),y=oe(h,p),v=yr(y,l,g);c.currentOutputSnapshotRaw=y,c.currentOutputSnapshotResolved=v,c.currentWriteId=ri(e);var b=Gn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Qr(e.eventQueue_,n,b),di(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var Ao=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.J)("OnDisconnect.cancel",0,1,arguments.length),Object(i.K)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.J)("OnDisconnect.remove",0,1,arguments.length),Object(i.K)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.J)("OnDisconnect.set",1,2,arguments.length),Object(i.K)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.J)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.K)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.J)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.K)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),jo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.J)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ro=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.J)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.J)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.J)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.J)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.J)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.J)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.J)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.J)("DataSnapshot.forEach",1,1,arguments.length),Object(i.K)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.J)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.J)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.J)("DataSnapshot.ref",0,0,arguments.length),new No(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Po=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.J)("Query.on",2,4,arguments.length),Object(i.K)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new Ro(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return zi(this._delegate,c,l),n;case"child_added":return Wi(this._delegate,c,l),n;case"child_removed":return $i(this._delegate,c,l),n;case"child_changed":return Ki(this._delegate,c,l),n;case"child_moved":return Qi(this._delegate,c,l),n;default:throw new Error(Object(i.n)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.J)("Query.off",0,3,arguments.length),Mr("Query.off",t,!0),Object(i.K)("Query.off","callback",e,!0),Object(i.L)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Gi(this._delegate,t,r)}else Gi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,dt()):(i=new Mn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return $e(Vn(i,e,cn(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n),i=Yn(t.serverSyncTree_,e._path,r);return Kr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ci(t,"get for query "+Object(i.I)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.o)(t))._repo,t).then(function(e){return new ji(e,new Ai(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Ro(t.database,e)})},t.prototype.once=function(e,n,r,o){var s=this;Object(i.J)("Query.once",1,4,arguments.length),Object(i.K)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.a,c=function(t,e){var r=new Ro(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Qi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.n)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.J)("Query.limitToFirst",1,1,arguments.length),new t(this.database,_o(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return Object(i.J)("Query.limitToLast",1,1,arguments.length),new t(this.database,_o(this._delegate,uo(e)))},t.prototype.orderByChild=function(e){return Object(i.J)("Query.orderByChild",1,1,arguments.length),new t(this.database,_o(this._delegate,lo(e)))},t.prototype.orderByKey=function(){return Object(i.J)("Query.orderByKey",0,0,arguments.length),new t(this.database,_o(this._delegate,fo()))},t.prototype.orderByPriority=function(){return Object(i.J)("Query.orderByPriority",0,0,arguments.length),new t(this.database,_o(this._delegate,go()))},t.prototype.orderByValue=function(){return Object(i.J)("Query.orderByValue",0,0,arguments.length),new t(this.database,_o(this._delegate,yo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAt",0,2,arguments.length),new t(this.database,_o(this._delegate,no(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAfter",0,2,arguments.length),new t(this.database,_o(this._delegate,io(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endAt",0,2,arguments.length),new t(this.database,_o(this._delegate,Ji(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endBefore",0,2,arguments.length),new t(this.database,_o(this._delegate,to(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.J)("Query.equalTo",1,2,arguments.length),new t(this.database,_o(this._delegate,bo(e,n)))},t.prototype.toString=function(){return Object(i.J)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.J)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.J)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.K)(t,"cancel",r.cancel,!0),r.context=n,Object(i.L)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.n)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new No(this.database,new Ai(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),No=function(t){function e(e,n){var r=t.call(this,e,new Ti(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.d)(e,t),e.prototype.getKey=function(){return Object(i.J)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.J)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ni(this._delegate,t))},e.prototype.getParent=function(){Object(i.J)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.J)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.J)("Reference.set",1,2,arguments.length),Object(i.K)("Reference.set","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.J)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),Object(i.K)("Reference.update","onComplete",e,!0);var o=Vi(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.J)("Reference.setWithPriority",2,3,arguments.length),Object(i.K)("Reference.setWithPriority","onComplete",n,!0);var r=Ui(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.J)("Reference.remove",0,1,arguments.length),Object(i.K)("Reference.remove","onComplete",t,!0);var e=Fi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.J)("Reference.transaction",1,3,arguments.length),Object(i.K)("Reference.transaction","transactionUpdate",t,!1),Object(i.K)("Reference.transaction","onComplete",e,!0),Hr("Reference.transaction","applyLocally",n,!0);var o=xo(this._delegate,t,{applyLocally:n}).then(function(t){return new jo(t.committed,new Ro(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.J)("Reference.setPriority",1,2,arguments.length),Object(i.K)("Reference.setPriority","onComplete",e,!0);var n=Mi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.J)("Reference.push",0,2,arguments.length),Object(i.K)("Reference.push","onComplete",n,!0);var o=Di(this._delegate,t),s=o.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new Ao(new Si(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Po),Do=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.o)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new H(H.OWNER);else if(r.mockUserToken){var a=Object(i.j)(r.mockUserToken,t.app.options.projectId);s=new H(a)}!function(t,e,n,r){t.repoInfo_=new Q(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.J)("database.ref",0,1,arguments.length),t instanceof No){var e=Pi(this._delegate,t.toString());return new No(this,e)}return e=Ri(this._delegate,t),new No(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.J)(e,1,1,arguments.length);var n=Pi(this._delegate,t);return new No(this,n)},t.prototype.goOffline=function(){return Object(i.J)("database.goOffline",0,0,arguments.length),So(this._delegate)},t.prototype.goOnline=function(){return Object(i.J)("database.goOnline",0,0,arguments.length),To(this._delegate)},t.ServerValue={TIMESTAMP:ko,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Fo=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Pe(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);D(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;u(t.version);var c=new r.c("auth-internal",new r.b("database-standalone"));return c.setComponent(new r.a("auth-internal",function(){return i},"PRIVATE")),{instance:new Do(Oo(e,c,void 0,n,a),e),namespace:o}}}),Lo=Rt;Rt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Rt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Mo=Object.freeze({__proto__:null,DataConnection:Lo,RealTimeConnection:at,hijackHash:function(t){var e=Rt.prototype.put;return Rt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Rt.prototype.put=e}},ConnectionTarget:Q,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Co=t}(t)}}),Uo=Do.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Do(Oo(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:No,Query:Po,Database:Do,DataSnapshot:Ro,enableLogging:w,INTERNAL:Fo,ServerValue:Uo,TEST_ACCESS:Mo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.1"),Object(i.y)()&&(t.exports=n)}(e.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.6.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return an}),n.d(e,"b",function(){return lc}),n.d(e,"c",function(){return oc}),n.d(e,"d",function(){return rc}),n.d(e,"e",function(){return ic}),n.d(e,"f",function(){return rl}),n.d(e,"g",function(){return Qc}),n.d(e,"h",function(){return $a}),n.d(e,"i",function(){return wc}),n.d(e,"j",function(){return va}),n.d(e,"k",function(){return fc}),n.d(e,"l",function(){return Ca}),n.d(e,"m",function(){return Er}),n.d(e,"n",function(){return Lu}),n.d(e,"o",function(){return go}),n.d(e,"p",function(){return kn}),n.d(e,"q",function(){return x}),n.d(e,"r",function(){return sn}),n.d(e,"s",function(){return jo}),n.d(e,"t",function(){return qa}),n.d(e,"u",function(){return Ha}),n.d(e,"v",function(){return dc}),n.d(e,"w",function(){return ou}),n.d(e,"x",function(){return Gc}),n.d(e,"y",function(){return iu}),n.d(e,"z",function(){return Bc}),n.d(e,"A",function(){return Ec}),n.d(e,"B",function(){return In}),n.d(e,"C",function(){return cc}),n.d(e,"D",function(){return uc}),n.d(e,"E",function(){return Uu}),n.d(e,"F",function(){return Sa}),n.d(e,"G",function(){return Ea}),n.d(e,"H",function(){return Ar}),n.d(e,"I",function(){return ka}),n.d(e,"J",function(){return yr}),n.d(e,"K",function(){return xn}),n.d(e,"L",function(){return Jc}),n.d(e,"M",function(){return tu}),n.d(e,"N",function(){return jc}),n.d(e,"O",function(){return un}),n.d(e,"P",function(){return xa}),n.d(e,"Q",function(){return Ia}),n.d(e,"R",function(){return au}),n.d(e,"S",function(){return D}),n.d(e,"T",function(){return Hc}),n.d(e,"U",function(){return Vc}),n.d(e,"V",function(){return f}),n.d(e,"W",function(){return Uc}),n.d(e,"X",function(){return el}),n.d(e,"Y",function(){return Nc}),n.d(e,"Z",function(){return hc}),n.d(e,"ab",function(){return yo}),n.d(e,"bb",function(){return ia}),n.d(e,"cb",function(){return m}),n.d(e,"db",function(){return gr}),n.d(e,"eb",function(){return Jn}),n.d(e,"fb",function(){return qn}),n.d(e,"gb",function(){return Hn}),n.d(e,"hb",function(){return Qn}),n.d(e,"ib",function(){return Wn}),n.d(e,"jb",function(){return zn}),n.d(e,"kb",function(){return Kn}),n.d(e,"lb",function(){return ta}),n.d(e,"mb",function(){return tl}),n.d(e,"nb",function(){return ea}),n.d(e,"ob",function(){return na}),n.d(e,"pb",function(){return Bn}),n.d(e,"qb",function(){return V}),n.d(e,"rb",function(){return qo}),n.d(e,"sb",function(){return cs}),n.d(e,"tb",function(){return as}),n.d(e,"ub",function(){return us}),n.d(e,"vb",function(){return Xs}),n.d(e,"wb",function(){return St}),n.d(e,"xb",function(){return l}),n.d(e,"yb",function(){return Vn}),n.d(e,"zb",function(){return Po}),n.d(e,"Ab",function(){return bt}),n.d(e,"Bb",function(){return ga}),n.d(e,"Cb",function(){return yi}),n.d(e,"Db",function(){return $o}),n.d(e,"Eb",function(){return xs}),n.d(e,"Fb",function(){return Ws}),n.d(e,"Gb",function(){return Ks}),n.d(e,"Hb",function(){return Qs}),n.d(e,"Ib",function(){return Is}),n.d(e,"Jb",function(){return Yu}),n.d(e,"Kb",function(){return J}),n.d(e,"Lb",function(){return ot}),n.d(e,"Mb",function(){return _}),n.d(e,"Nb",function(){return w}),n.d(e,"Ob",function(){return nt}),n.d(e,"Pb",function(){return st}),n.d(e,"Qb",function(){return Jo}),n.d(e,"Rb",function(){return rs}),n.d(e,"Sb",function(){return os}),n.d(e,"Tb",function(){return is}),n.d(e,"Ub",function(){return ns}),n.d(e,"Vb",function(){return es}),n.d(e,"Wb",function(){return ss}),n.d(e,"Xb",function(){return tn}),n.d(e,"Yb",function(){return $s}),n.d(e,"Zb",function(){return En}),n.d(e,"ac",function(){return nn}),n.d(e,"bc",function(){return nc}),n.d(e,"cc",function(){return ls}),n.d(e,"dc",function(){return Ju}),n.d(e,"ec",function(){return gs}),n.d(e,"fc",function(){return ju}),n.d(e,"gc",function(){return Ru}),n.d(e,"hc",function(){return Pu}),n.d(e,"ic",function(){return vs}),n.d(e,"jc",function(){return ys}),n.d(e,"kc",function(){return Xo}),n.d(e,"lc",function(){return bs}),n.d(e,"mc",function(){return Cu}),n.d(e,"nc",function(){return Ou}),n.d(e,"oc",function(){return Eu}),n.d(e,"pc",function(){return Su}),n.d(e,"qc",function(){return Tu}),n.d(e,"rc",function(){return ku}),n.d(e,"sc",function(){return Gu}),n.d(e,"tc",function(){return Yo}),n.d(e,"uc",function(){return Ir}),n.d(e,"vc",function(){return kr}),n.d(e,"wc",function(){return Wt}),n.d(e,"xc",function(){return vr}),n.d(e,"yc",function(){return br}),n.d(e,"zc",function(){return rt}),n.d(e,"Ac",function(){return ks}),n.d(e,"Bc",function(){return hs}),n.d(e,"Cc",function(){return Gs}),n.d(e,"Dc",function(){return Zo}),n.d(e,"Ec",function(){return qs}),n.d(e,"Fc",function(){return Bs}),n.d(e,"Gc",function(){return Hs}),n.d(e,"Hc",function(){return zs}),n.d(e,"Ic",function(){return Zu});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return O(t,S)||O(t,k)}function O(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(I))?t[T]:null}const S=u({"\u0275prov":u}),T=u({"\u0275inj":u}),k=u({ngInjectableDef:u}),I=u({ngInjectorDef:u});var x=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let A;function j(t){const e=A;return A=t,e}function R(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&x.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function P(t){return{toString:t}.toString()}var N=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),D=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,L="undefined"!=typeof window&&window,M="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,V=F||U||L||M,q={},B=[],H=[],z=u({"\u0275cmp":u}),W=u({"\u0275dir":u}),K=u({"\u0275pipe":u}),Q=u({"\u0275mod":u}),$=u({"\u0275loc":u}),G=u({"\u0275fac":u}),Z=u({__NG_ELEMENT_ID__:u});let Y=0;function J(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||H,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||D.Emulated,id:"c",styles:t.styles||H,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Y++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(X):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function X(t){return at(t)||function(t){return t[W]||null}(t)}function tt(t){return function(t){return t[K]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||H,declarations:t.declarations||H,imports:t.imports||H,exports:t.exports||H,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{et[t.id]=t.type}),e}function rt(t,e){return P(()=>{const n=ut(t,!0);n.declarations=e.declarations||H,n.imports=e.imports||H,n.exports=e.exports||H})}function it(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=J;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[z]||null}function ut(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function yt(t,e){return t.hasOwnProperty(G)?t[G]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),wt}function wt(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===q),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}let Et;function St(t){Et=t}function Tt(){return void 0!==Et?Et:"undefined"!=typeof document?document:void 0}function kt(t){return!!t.listen}bt.ngInherit=!0;const It={createRenderer:(t,e)=>Tt()};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return xt(e[t])}function jt(t,e){return xt(e[t.index])}function Rt(t,e){return t.data[e]}function Pt(t,e){return t[e]}function Nt(t,e){const n=e[t];return ht(n)?n:n[0]}function Dt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ft(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:de(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function Ht(){return qt.lFrame.lView}function zt(){return qt.lFrame.tView}function Wt(t){qt.lFrame.contextLView=t}function Kt(){let t=Qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Qt(){return qt.lFrame.currentTNode}function $t(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Gt(){return qt.lFrame.isParent}function Zt(){qt.lFrame.isParent=!1}function Yt(){return qt.isInCheckNoChangesMode}function Jt(t){qt.isInCheckNoChangesMode=t}function Xt(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function te(){return qt.lFrame.bindingIndex}function ee(){return qt.lFrame.bindingIndex++}function ne(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function re(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ie(e)}function ie(t){qt.lFrame.currentDirectiveIndex=t}function oe(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function se(){return qt.lFrame.currentQueryIndex}function ae(t){qt.lFrame.currentQueryIndex=t}function ue(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ce(t,e,n){if(n&x.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&x.Host||(r=ue(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=he();return r.currentTNode=e,r.lView=t,!0}function le(t){const e=he(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function he(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?de(t):e}function de(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function fe(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const pe=fe;function ge(){const t=fe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function me(){return qt.lFrame.selectedIndex}function ye(t){qt.lFrame.selectedIndex=t}function ve(){const t=qt.lFrame;return Rt(t.tView,t.selectedIndex)}function be(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function _e(t,e,n){Oe(t,e,3,n)}function we(t,e,n,r){(3&t[2])===n&&Oe(t,e,n,r)}function Ce(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Oe(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Ee(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Ee(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Se=-1;class Te{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ke(t,e,n){const r=kt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];xe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ie(t){return 3===t||4===t||6===t}function xe(t){return 64===t.charCodeAt(0)}function Ae(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||je(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function je(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Re(t){return t!==Se}function Pe(t){return 32767&t}function Ne(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let De=!0;function Fe(t){const e=De;return De=t,e}let Le=0;function Me(t,e){const n=Ve(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ue(r.data,t),Ue(e,null),Ue(r.blueprint,null));const i=qe(t,e),o=t.injectorIndex;if(Re(i)){const t=Pe(i),n=Ne(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ue(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ve(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function qe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Se;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Se}function Be(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Z)&&(r=n[Z]),null==r&&(r=n[Z]=Le++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function He(t,e,n){if(n&x.Optional)return t;b(e,"NodeInjector")}function ze(t,e,n,r){if(n&x.Optional&&void 0===r&&(r=null),0==(n&(x.Self|x.Host))){const i=t[9],o=j(void 0);try{return i?i.get(e,r,n&x.Optional):R(e,r,n&x.Optional)}finally{j(o)}}return He(r,e,n)}function We(t,e,n,r=x.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Z)?t[Z]:void 0;return"number"==typeof e?e>=0?255&e:Qe:e}(n);if("function"==typeof o){if(!ce(e,t,r))return r&x.Host?He(i,n,r):ze(e,n,r,i);try{const t=o();if(null!=t||r&x.Optional)return t;b(n)}finally{pe()}}else if("number"==typeof o){let i=null,s=Ve(t,e),a=Se,u=r&x.Host?e[16][6]:null;for((-1===s||r&x.SkipSelf)&&(a=-1===s?qe(t,e):e[s+8],a!==Se&&Je(r,!1)?(i=e[1],s=Pe(a),e=Ne(a,e)):s=-1);-1!==s;){const t=e[1];if(Ye(o,s,t.data)){const t=$e(s,e,n,i,r,u);if(t!==Ke)return t}a=e[s+8],a!==Se&&Je(r,e[1].data[s+8]===u)&&Ye(o,s,e)?(i=t,s=Pe(a),e=Ne(a,e)):s=-1}}}return ze(e,n,r,i)}const Ke={};function Qe(){return new Xe(Kt(),Ht())}function $e(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ge(a,s,n,null==r?pt(a)&&De:r!=s&&0!=(3&a.type),i&x.Host&&o===a);return null!==u?Ze(e,s,u,a):Ke}function Ge(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&mt(t)&&t.type===n)return u}return null}function Ze(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Te){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Fe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?j(s.injectImpl):null;ce(t,r,x.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&j(u),Fe(a),s.resolving=!1,pe()}}return i}function Ye(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Je(t,e){return!(t&x.Self||t&x.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return We(this._tNode,this._lView,t,void 0,e)}}function tn(t){return P(()=>{const e=t.prototype.constructor,n=e[G]||en(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[G]||en(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return g(t)?()=>{const e=en(p(t));return e&&e()}:yt(t)}function nn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ie(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const rn="__parameters__";function on(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(rn)?t[rn]:Object.defineProperty(t,rn,{value:[]})[rn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class sn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const an=new sn("AnalyzeForEntryComponents"),un=Function;function cn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function ln(t,e){t.forEach(t=>Array.isArray(t)?ln(t,e):e(t))}function hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function pn(t,e,n){let r=mn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function gn(t,e){const n=mn(t,e);if(n>=0)return t[1|n]}function mn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const yn={},vn=/\n/gm,bn="__source",_n=u({provide:String,useValue:u});let wn;function Cn(t){const e=wn;return wn=t,e}function On(t,e=x.Default){if(void 0===wn)throw new Error("inject() must be called from an injection context");return null===wn?R(t,void 0,e):wn.get(t,e&x.Optional?null:void 0,e)}function En(t,e=x.Default){return(A||On)(p(t),e)}function Sn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=x.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(En(t,n))}else e.push(En(r))}return e}function Tn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const kn=Tn(on("Inject",t=>({token:t})),-1),In=Tn(on("Optional"),8),xn=Tn(on("SkipSelf"),4);let An,jn;function Rn(t){var e;return(null===(e=function(){if(void 0===An&&(An=null,V.trustedTypes))try{An=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return An}())||void 0===e?void 0:e.createHTML(t))||t}function Pn(t){var e;return(null===(e=function(){if(void 0===jn&&(jn=null,V.trustedTypes))try{jn=V.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return jn}())||void 0===e?void 0:e.createHTML(t))||t}class Nn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Dn extends Nn{getTypeName(){return"HTML"}}class Fn extends Nn{getTypeName(){return"Style"}}class Ln extends Nn{getTypeName(){return"Script"}}class Mn extends Nn{getTypeName(){return"URL"}}class Un extends Nn{getTypeName(){return"ResourceURL"}}function Vn(t){return t instanceof Nn?t.changingThisBreaksApplicationSecurity:t}function qn(t,e){const n=Bn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Bn(t){return t instanceof Nn&&t.getTypeName()||null}function Hn(t){return new Dn(t)}function zn(t){return new Fn(t)}function Wn(t){return new Ln(t)}function Kn(t){return new Mn(t)}function Qn(t){return new Un(t)}class $n{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Rn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Gn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Rn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Rn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Zn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jn(t){return(t=String(t)).match(Zn)||t.match(Yn)?t:"unsafe:"+t}function Xn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function tr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const er=Xn("area,br,col,hr,img,wbr"),nr=Xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rr=Xn("rp,rt"),ir=tr(rr,nr),or=tr(er,tr(nr,Xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tr(rr,Xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ir),sr=Xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ar=Xn("srcset"),ur=tr(sr,ar,Xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cr=Xn("script,style,template");class lr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!or.hasOwnProperty(e))return this.sanitizedSomething=!0,!cr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ur.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;sr[o]&&(s=Jn(s)),ar[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Jn(t.trim())).join(", ")),this.buf.push(" ",e,'="',fr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();or.hasOwnProperty(e)&&!er.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(fr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const hr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dr=/([^\#-~ |!])/g;function fr(t){return t.replace(/&/g,"&amp;").replace(hr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(dr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pr;function gr(t,e){let n=null;try{pr=pr||function(t){const e=new Gn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Rn(""),"text/html")}catch(t){return!1}}()?new $n(e):e}(t);let r=e?String(e):"";n=pr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=pr.getInertBodyElement(r)}while(r!==o);return Rn((new lr).sanitizeChildren(mr(n)||n))}finally{if(n){const t=mr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function mr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var yr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function vr(t){const e=_r();return e?Pn(e.sanitize(yr.HTML,t)||""):qn(t,"HTML")?Pn(Vn(t)):gr(Tt(),y(t))}function br(t){const e=_r();return e?e.sanitize(yr.URL,t)||"":qn(t,"URL")?Vn(t):Jn(y(t))}function _r(){const t=Ht();return t&&t[12]}function wr(t){return t.ngDebugContext}function Cr(t){return t.ngOriginalError}function Or(t,...e){t.error(...e)}class Er{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Or}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?wr(t)?wr(t):this._findContext(Cr(t)):null}_findOriginalError(t){let e=Cr(t);for(;e&&Cr(e);)e=Cr(e);return e}}function Sr(t,e){t.__ngContext__=e}const Tr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function kr(t){return{name:"window",target:t.ownerDocument.defaultView}}function Ir(t){return{name:"document",target:t.ownerDocument}}function xr(t){return t instanceof Function?t():t}var Ar=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function jr(t,e){return(void 0)(t,e)}function Rr(t){const e=t[3];return dt(e)?e[3]:e}function Pr(t){return Dr(t[13])}function Nr(t){return Dr(t[4])}function Dr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Fr(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?zr(e,n,a):Hr(e,n,a,i||null,!0):1===t&&null!==n?Hr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Kr(t,e);r&&function(t,e,n,r){kt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&Fr(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];ti(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Lr(t,e,n){return kt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Mr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Ur(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Mr(o,r),e>0&&(t[n-1][4]=r[4]);const s=dn(t,lt+e);ti(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Vr(t,e){if(!(256&e[2])){const n=e[11];kt(n)&&n.destroyNode&&ti(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return qr(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&qr(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&qr(e[1],e),n=e&&e[4]}e=n}}(e)}}function qr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Te)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&kt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Mr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Br(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===D.None||e===D.Emulated)return null}return jt(r,n)}(t,e.parent,n)}function Hr(t,e,n,r,i){kt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function zr(t,e,n){kt(t)?t.appendChild(e,n):e.appendChild(n)}function Wr(t,e,n,r,i){null!==r?Hr(t,e,n,r,i):zr(t,e,n)}function Kr(t,e){return kt(t)?t.parentNode(e):e.parentNode}function Qr(t,e,n){return $r(t,e,n)}let $r=function(t,e,n){return 40&t.type?jt(t,n):null};function Gr(t,e,n,r){const i=Br(t,r,e),o=e[11],s=Qr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Wr(o,i,n[a],s,!1);else Wr(o,i,n,s,!1)}function Zr(t,e){if(null!==e){const n=e.type;if(3&n)return jt(e,t);if(4&n)return Jr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Zr(t,n);{const n=t[e.index];return dt(n)?Jr(-1,n):xt(n)}}if(32&n)return jr(e,t)()||xt(t[e.index]);{const n=Yr(t,e);return null!==n?Array.isArray(n)?n[0]:Zr(Rr(t[16]),n):Zr(t,e.next)}}return null}function Yr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Jr(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Zr(t,r)}return e[7]}function Xr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Sr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Xr(t,e,n.child,r,i,o,!1),Fr(e,t,i,a,o);else if(32&u){const s=jr(n,r);let u;for(;u=s();)Fr(e,t,i,u,o);Fr(e,t,i,a,o)}else 16&u?ei(t,e,r,n,i,o):Fr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ti(t,e,n,r,i,o){Xr(n,r,t.firstChild,e,i,o,!1)}function ei(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Fr(e,t,i,a[u],o);else Xr(t,e,a,s[3],i,o,!0)}function ni(t,e,n){kt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ri(t,e,n){kt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ii(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const oi="ng-template";function si(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ii(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ai(t){return 4===t.type&&t.value!==oi}function ui(t,e,n){return e===(4!==t.type||n?t.value:oi)}function ci(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ie(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ui(t,u,n)||""===u&&1===e.length){if(li(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!si(t.attrs,c,n)){if(li(r))return!1;s=!0}continue}const l=hi(8&r?"class":u,i,ai(t),n);if(-1===l){if(li(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ii(e,c,0)||2&r&&c!==t){if(li(r))return!1;s=!0}}}}else{if(!s&&!li(r)&&!li(u))return!1;if(s&&li(u))continue;s=!1,r=u|1&r}}return li(r)||s}function li(t){return 0==(1&t)}function hi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function di(t,e,n=!1){for(let r=0;r<e.length;r++)if(ci(t,e[r],n))return!0;return!1}function fi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function pi(t,e){return t?":not("+e.trim()+")":e}function gi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||li(s)||(e+=pi(o,i),i=""),r=s,o=o||!li(r);n++}return""!==i&&(e+=pi(o,i)),e}const mi={};function yi(t){vi(zt(),Ht(),me()+t,Yt())}function vi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&_e(e,r,n)}else{const r=t.preOrderHooks;null!==r&&we(e,r,0,n)}ye(n)}function bi(t,e){return t<<17|e<<2}function _i(t){return t>>17&32767}function wi(t){return 2|t}function Ci(t){return(131068&t)>>2}function Oi(t,e){return-131069&t|e<<2}function Ei(t){return 1|t}function Si(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ae(i),n.contentQueries(2,e[o],o)}}}function Ti(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ki(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Qt(),s=Gt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return $t(o,!0),o}function Ii(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function xi(t,e,n){le(e);try{const r=t.viewQuery;null!==r&&oo(1,r,n);const i=t.template;null!==i&&Ri(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Si(t,e),t.staticViewQueries&&oo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)to(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ge()}}function Ai(t,e,n,r){const i=e[2];if(256==(256&i))return;le(e);const o=Yt();try{Ut(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ri(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&_e(e,n,null)}else{const n=t.preOrderHooks;null!==n&&we(e,n,0,null),Ce(e,0)}if(function(t){for(let e=Pr(t);null!==e;e=Nr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Pr(t);null!==e;e=Nr(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&Ai(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Si(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&_e(e,n)}else{const n=t.contentHooks;null!==n&&we(e,n,1),Ce(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ye(~r);else{const i=r,o=n[++t],s=n[++t];re(o,i),s(2,e[i])}}}finally{ye(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ji(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&oo(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&_e(e,n)}else{const n=t.viewHooks;null!==n&&we(e,n,2),Ce(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{ge()}}function ji(t,e,n,r){const i=e[10],o=!Yt(),s=Ft(e);try{o&&!s&&i.begin&&i.begin(),s&&xi(t,e,r),Ai(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ri(t,e,n,r,i){const o=me(),s=2&r;try{ye(-1),s&&e.length>ct&&vi(t,e,ct,Yt()),n(r,i)}finally{ye(o)}}function Pi(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ni(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Me(n,e),Sr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=mt(r);o&&$i(e,n,r);const u=Ze(e,t,a,n);Sr(u,e),null!==s&&Gi(0,a-i,u,r,0,s),o&&(Nt(n.index,e)[8]=u)}}(t,e,n,jt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{ye(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ie(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Hi(r,i)}}finally{ye(-1),ie(s)}}(t,e,n))}function Di(t,e,n=jt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Fi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Li(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Li(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:mi);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Mi(t,e,n,r){const i=ao(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&uo(t).push(r,i.length-1))}function Ui(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Vi(t,e,n,r,i,o,s,a){const u=jt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(ho(t,n,c,r,i),pt(e)&&function(t,e){const n=Nt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,kt(o)?o.setProperty(u,r,i):xe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function qi(t,e,n,r){let i=!1;if(Bt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];di(n,s.selectors,!1)&&(i||(i=[]),Be(Me(n,e),t,s.type),mt(s)?(zi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ki(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Ii(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ae(n.mergedAttrs,c.hostAttrs),Qi(t,n,e,u,c),Wi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ai(e)?null:Zi(n,i);o.push(c),s=Ui(n,u,s),a=Ui(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ae(n.mergedAttrs,n.attrs),i}function Bi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Hi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function zi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Wi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function Ki(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Qi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=yt(i.type)),s=new Te(o,mt(i),null);t.blueprint[r]=s,n[r]=s,Bi(t,e,0,r,Ii(t,n,i.hostVars,mi),i)}function $i(t,e,n){const r=jt(e,t),i=Fi(n),o=t[10],s=eo(t,Ti(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Gi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Zi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Yi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ji(t,e){const n=Nt(e,t);if(Lt(n)){const t=n[1];80&n[2]?Ai(t,n,t.template,n[8]):n[5]>0&&Xi(n)}}function Xi(t){for(let n=Pr(t);null!==n;n=Nr(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ai(t,e,t.template,e[8])}else e[5]>0&&Xi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Nt(e[n],t);Lt(r)&&r[5]>0&&Xi(r)}}function to(t,e){const n=Nt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),xi(r,n,n[8])}function eo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function no(t){for(;t;){t[2]|=64;const e=Rr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ro(t,e,n){const r=e[10];r.begin&&r.begin();try{Ai(t,e,t.template,n)}catch(i){throw lo(e,i),i}finally{r.end&&r.end()}}function io(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Dt(n),i=r[1];ji(i,r,i.template,n)}}(t[8])}function oo(t,e,n){ae(0),e(t,n)}const so=(()=>Promise.resolve(null))();function ao(t){return t[7]||(t[7]=[])}function uo(t){return t.cleanup||(t.cleanup=[])}function co(t,e,n){return(null===t||mt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function lo(t,e){const n=t[9],r=n?n.get(Er,null):null;r&&r.handleError(e)}function ho(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function fo(t,e,n){const r=At(e,t);!function(t,e,n){kt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function po(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const go=new sn("INJECTOR",-1);class mo{get(t,e=yn){if(e===yn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const yo=new sn("Set Injector scope."),vo={},bo={},_o=[];let wo;function Co(){return void 0===wo&&(wo=new mo),wo}function Oo(t,e=null,n=null,r){return new Eo(t,n,e||Co(),r)}class Eo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ln(e,n=>this.processProvider(n,t,e)),ln([t],t=>this.processInjectorType(t,[],i)),this.records.set(go,ko(void 0,this));const o=this.records.get(yo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=yn,n=x.Default){this.assertNotDestroyed();const r=Cn(this);try{if(!(n&x.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof sn)&&C(t);e=n&&this.injectableDefInScope(n)?ko(So(t),vo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&x.Self?Co():this.parent).get(t,e=n&x.Optional&&e===yn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[bn]&&i.unshift(e[bn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Cn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ln(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ln(r,t=>this.processProvider(t,n,r||_o))}}this.injectorDefTypes.add(o);const a=yt(o)||(()=>new o);this.records.set(o,ko(a,vo));const u=r.providers;if(null!=u&&!s){const e=t;ln(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=xo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Io(t)?ko(void 0,t.useValue):ko(To(t),vo)}(t);if(xo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ko(void 0,vo,!0),e.factory=()=>Sn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===vo&&(e.value=bo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function So(t){const e=C(t),n=null!==e?e.factory:yt(t);if(null!==n)return n;if(t instanceof sn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=fn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[k]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function To(t,e,n){let r;if(xo(t)){const e=p(t);return yt(e)||So(e)}if(Io(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Sn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>En(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return yt(e)||So(e);r=()=>new e(...Sn(t.deps))}var i;return r}function ko(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Io(t){return null!==t&&"object"==typeof t&&_n in t}function xo(t){return"function"==typeof t}const Ao=function(t,e,n){return function(t,e=null,n=null,r){const i=Oo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let jo=(()=>{class t{static create(t,e){return Array.isArray(t)?Ao(t,e,""):Ao(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=yn,t.NULL=new mo,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>En(go)}),t.__NG_ELEMENT_ID__=-1,t})();function Ro(t,e){be(Dt(t)[1],Kt())}function Po(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=No(t.inputs),e.declaredInputs=No(t.declaredInputs),e.outputs=No(t.outputs);const n=i.hostBindings;n&&Lo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Do(t,o),s&&Fo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Po&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ae(i.hostAttrs,n=Ae(n,i.hostAttrs))}}(r)}function No(t){return t===q?{}:t===H?[]:t}function Do(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Fo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Lo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Mo=null;function Uo(){if(!Mo){const t=V.Symbol;if(t&&t.iterator)Mo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Mo=n)}}}return Mo}class Vo{constructor(t){this.wrapped=t}static wrap(t){return new Vo(t)}static unwrap(t){return Vo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Vo}}function qo(t){return!!Bo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Uo()in t)}function Bo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ho(t,e,n){return t[e]=n}function zo(t,e){return t[e]}function Wo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ko(t,e,n,r){const i=Wo(t,e,n);return Wo(t,e+1,r)||i}function Qo(t,e,n,r,i,o){const s=Ko(t,e,n,r);return Ko(t,e+2,i,o)||s}function $o(t,e,n,r){const i=Ht();return Wo(i,ee(),e)&&(zt(),function(t,e,n,r,i,o){const s=jt(t,e);!function(t,e,n,r,i,o,s){if(null==o)kt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);kt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ve(),i,t,e,n,r)),$o}function Go(t,e,n,r){return Wo(t,ee(),n)?e+y(n)+r:mi}function Zo(t,e,n,r,i,o,s,a){const u=Ht(),c=zt(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ki(e,t,4,s||null,Mt(c,a));qi(e,n,l,Mt(c,u)),be(e,l);const h=l.tViews=Li(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];$t(h,!1);const d=u[11].createComment("");Gr(c,u,d,h),Sr(d,u),eo(u,u[l]=Yi(d,u,d,h)),gt(h)&&Ni(c,u,h),null!=s&&Di(u,h,a)}function Yo(t){return Pt(qt.lFrame.contextLView,ct+t)}function Jo(t,e=x.Default){const n=Ht();return null===n?En(t,e):We(Kt(),n,p(t),e)}function Xo(t,e,n){const r=Ht();return Wo(r,ee(),e)&&Vi(zt(),ve(),r,t,e,r[11],n,!1),Xo}function ts(t,e,n,r,i){const o=i?"class":"style";ho(t,n,e.inputs[o],o,r)}function es(t,e,n,r){const i=Ht(),o=zt(),s=ct+t,a=i[11],u=i[s]=Lr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ki(e,t,2,i,Mt(a,o));return qi(e,n,u,Mt(a,s)),null!==u.attrs&&po(u,u.attrs,!1),null!==u.mergedAttrs&&po(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];$t(c,!0);const l=c.mergedAttrs;null!==l&&ke(a,u,l);const h=c.classes;null!==h&&ri(a,u,h);const d=c.styles;null!==d&&ni(a,u,d),64!=(64&c.flags)&&Gr(o,i,u,c),0===qt.lFrame.elementDepthCount&&Sr(u,i),qt.lFrame.elementDepthCount++,gt(c)&&(Ni(o,i,c),Pi(o,c,i)),null!==r&&Di(i,c)}function ns(){let t=Kt();Gt()?Zt():(t=t.parent,$t(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(be(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ts(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ts(n,e,Ht(),e.stylesWithoutHost,!1)}function rs(t,e,n,r){es(t,e,n,r),ns()}function is(t,e,n){const r=Ht(),i=zt(),o=t+ct,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Mt(o,r),a=ki(e,t,8,"ng-container",s);return null!==s&&po(a,s,!0),qi(e,n,a,Mt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];$t(s,!0);const a=r[o]=r[11].createComment("");Gr(i,r,a,s),Sr(a,r),gt(s)&&(Ni(i,r,s),Pi(i,s,r)),null!=n&&Di(r,s)}function os(){let t=Kt();const e=zt();Gt()?Zt():(t=t.parent,$t(t,!1)),e.firstCreatePass&&(be(e,t),ft(t)&&e.queries.elementEnd(t))}function ss(){return Ht()}function as(t){return!!t&&"function"==typeof t.then}function us(t){return!!t&&"function"==typeof t.subscribe}const cs=us;function ls(t,e,n=!1,r){const i=Ht(),o=zt(),s=Kt();return ds(o,i,i[11],s,t,e,n,r),ls}function hs(t,e,n=!1,r){const i=Kt(),o=Ht(),s=zt();return ds(s,o,co(oe(s.data),i,o),i,t,e,n,r),hs}function ds(t,e,n,r,i,o,s=!1,a){const u=gt(r),c=t.firstCreatePass&&uo(t),l=ao(e);let h=!0;if(3&r.type){const d=jt(r,e),f=a?a(d):q,p=f.target||d,g=l.length,m=a?t=>a(xt(t[r.index])).target:r.index;if(kt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ps(r,e,0,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=ps(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=ps(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}function fs(t,e,n,r){try{return!1!==n(r)}catch(i){return lo(t,i),!1}}function ps(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Nt(t.index,e):e;0==(32&e[2])&&no(s);let a=fs(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=fs(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function gs(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function ms(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?di(t,o,!0):fi(r,o))return i}else n=i}return n}function ys(t){const e=Ht()[16][6];if(!e.projection){const n=e.projection=fn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ms(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function vs(t,e=0,n){const r=Ht(),i=zt(),o=ki(i,ct+t,16,null,n||null);null===o.projection&&(o.projection=e),Zt(),64!=(64&o.flags)&&function(t,e,n){ei(e[11],0,e,n,Br(t,n,e),Qr(n.parent||e[6],n,e))}(i,r,o)}function bs(t,e,n){return _s(t,"",e,"",n),bs}function _s(t,e,n,r,i){const o=Ht(),s=Go(o,e,n,r);return s!==mi&&Vi(zt(),ve(),o,t,s,o[11],i,!1),_s}function ws(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?_i(o):Ci(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Cs(t[a],e)&&(u=!0,t[a+1]=r?Ei(n):wi(n)),a=r?_i(n):Ci(n)}u&&(t[n+1]=r?wi(o):Ei(o))}function Cs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&mn(t,e)>=0}const Os={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Es(t){return t.substring(Os.key,Os.keyEnd)}function Ss(t,e){const n=Os.textEnd;return n===e?-1:(e=Os.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Os.key=e,n),Ts(t,e,n))}function Ts(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ks(t,e,n){return js(t,e,n,!1),ks}function Is(t,e){return js(t,e,null,!0),Is}function xs(t){Rs(pn,As,t,!0)}function As(t,e){for(let n=function(t){return function(t){Os.key=0,Os.keyEnd=0,Os.value=0,Os.valueEnd=0,Os.textEnd=t.length}(t),Ss(t,Ts(t,0,Os.textEnd))}(e);n>=0;n=Ss(e,n))pn(t,Es(e),!0)}function js(t,e,n,r){const i=Ht(),o=zt(),s=ne(2);o.firstUpdatePass&&Ns(o,t,s,r),e!==mi&&Wo(i,s,e)&&Ls(o,o.data[me()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Vn(t)))),t}(e,n),r,s)}function Rs(t,e,n,r){const i=zt(),o=ne(2);i.firstUpdatePass&&Ns(i,null,o,r);const s=Ht();if(n!==mi&&Wo(s,o,n)){const a=i.data[me()];if(Vs(a,r)&&!Ps(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),ts(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===mi&&(i=B);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&Ls(t,e,n,r,g,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return B;const r=[],i=Vn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ps(t,e){return e>=t.expandoStartIndex}function Ns(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[me()],s=Ps(t,n);Vs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=oe(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Fs(n=Ds(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ds(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ci(r))return t[_i(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Ds(null,t,e,n[1],r),n=Fs(n,e.attrs,r),function(t,e,n,r){t[_i(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Fs(r,t[o].hostAttrs,n);return Fs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=_i(s),u=Ci(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||mn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=_i(t[a+1]);t[r+1]=bi(e,a),0!==e&&(t[e+1]=Oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=bi(a,0),0!==a&&(t[a+1]=Oi(t[a+1],r)),a=r;else t[r+1]=bi(u,0),0===a?a=r:t[u+1]=Oi(t[u+1],r),u=r;l&&(t[r+1]=wi(t[r+1])),ws(t,c,r,!0),ws(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&mn(o,e)>=0&&(n[r+1]=Ei(n[r+1]))}(e,c,t,r,o),s=bi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Ds(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Fs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Fs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),pn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ls(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Us(1==(1&c)?Ms(u,e,n,i,Ci(c),s):void 0)||(Us(o)||2==(2&c)&&(o=Ms(u,null,n,i,a,s)),function(t,e,n,r,i){const o=kt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Ar.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Ar.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,At(me(),n),i,o))}function Ms(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===mi&&(l=c?B:void 0);let h=c?gn(l,r):u===r?l:void 0;if(o&&!Us(h)&&(h=gn(e,r)),Us(h)&&(a=h,s))return a;const d=t[i+1];i=s?_i(d):Ci(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=gn(t,r))}return a}function Us(t){return void 0!==t}function Vs(t,e){return 0!=(t.flags&(e?16:32))}function qs(t,e=""){const n=Ht(),r=zt(),i=t+ct,o=r.firstCreatePass?ki(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return kt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Gr(r,n,s,o),$t(o,!1)}function Bs(t){return Hs("",t,""),Bs}function Hs(t,e,n){const r=Ht(),i=Go(r,t,e,n);return i!==mi&&fo(r,me(),i),Hs}function zs(t,e,n,r,i,o,s,a,u,c,l){const h=Ht(),d=function(t,e,n,r,i,o,s,a,u,c,l,h){const d=te();let f=Qo(t,d,n,i,s,u);return f=Wo(t,d+4,l)||f,ne(5),f?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c+y(l)+h:mi}(h,t,e,n,r,i,o,s,a,u,c,l);return d!==mi&&fo(h,me(),d),zs}function Ws(t,e,n){Rs(pn,As,Go(Ht(),t,e,n),!0)}function Ks(t,e,n,r,i){Rs(pn,As,function(t,e,n,r,i,o){const s=Ko(t,te(),n,i);return ne(2),s?e+y(n)+r+y(i)+o:mi}(Ht(),t,e,n,r,i),!0)}function Qs(t,e,n,r,i,o,s,a,u){Rs(pn,As,function(t,e,n,r,i,o,s,a,u,c){const l=Qo(t,te(),n,i,s,u);return ne(4),l?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c:mi}(Ht(),t,e,n,r,i,o,s,a,u),!0)}function $s(t,e,n){const r=Ht();return Wo(r,ee(),e)&&Vi(zt(),ve(),r,t,e,r[11],n,!0),$s}function Gs(t,e,n){const r=Ht();if(Wo(r,ee(),e)){const i=zt(),o=ve();Vi(i,o,r,t,e,co(oe(i.data),o,r),n,!0)}return Gs}const Zs=void 0;var Ys=["en",[["a","p"],["AM","PM"],Zs],[["AM","PM"],Zs,Zs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zs,"{1} 'at' {0}",Zs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Js={};function Xs(t,e,n){"string"!=typeof e&&(n=e,e=t[ia.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Js[e]=t,n&&(Js[e][ia.ExtraData]=n)}function ta(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ra(e);if(n)return n;const r=e.split("-")[0];if(n=ra(r),n)return n;if("en"===r)return Ys;throw new Error(`Missing locale data for the locale "${t}".`)}function ea(t){return ta(t)[ia.CurrencyCode]||null}function na(t){return ta(t)[ia.PluralCase]}function ra(t){return t in Js||(Js[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),Js[t]}var ia=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const oa="en-US";let sa=oa;function aa(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(sa=t.toLowerCase().replace(/_/g,"-"))}function ua(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)ua(t[o],e,n,r,i);else{const o=zt(),s=Ht();let a=xo(t)?t:p(t.provide),u=To(t);const c=Kt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(xo(t)||!t.multi){const r=new Te(u,i,Jo),f=ha(a,e,i?l:l+d,h);-1===f?(Be(Me(c,s),o,a),ca(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=ha(a,e,l+d,h),p=ha(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Be(Me(c,s),o,a);const l=function(t,e,n,r,i){const o=new Te(t,n,Jo);return o.multi=[],o.index=e,o.componentProviders=0,la(o,i,r&&!n),o}(i?fa:da,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),ca(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ca(o,t,f>-1?f:p,la(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function ca(t,e,n,r){const i=xo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function la(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ha(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function da(t,e,n,r){return pa(this.multi,[])}function fa(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ze(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),pa(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],pa(i,o);return o}function pa(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ga(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=mt(t);ua(n,r.data,r.blueprint,i,!0),ua(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ma{}class ya{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let va=(()=>{class t{}return t.NULL=new ya,t})();function ba(...t){}function _a(t,e){return new Ca(jt(t,e))}const wa=function(){return _a(Kt(),Ht())};let Ca=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=wa,t})();function Oa(t){return t instanceof Ca?t.nativeElement:t}class Ea{}let Sa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ta(),t})();const Ta=function(){const t=Ht(),e=Nt(Kt().index,t);return function(t){return t[11]}(ht(e)?e:t)};let ka=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class Ia{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const xa=new Ia("11.2.14");class Aa{constructor(){}supports(t){return qo(t)}create(t){return new Ra(t)}}const ja=(t,e)=>e;class Ra{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ja}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Fa(n,r,i)?e:n,s=Fa(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!qo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Uo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Pa(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Da),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Da),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Pa{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Na{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Da{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Na,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fa(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class La{constructor(){}supports(t){return t instanceof Map||Bo(t)}create(){return new Ma}}class Ma{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Bo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ua(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ua{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Va(){return new qa([new Aa])}let qa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Va()),deps:[[t,new xn,new In]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Va}),t})();function Ba(){return new Ha([new La])}let Ha=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ba()),deps:[[t,new xn,new In]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Ba}),t})();function za(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),dt(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&za(e[1],e,n,r)}const s=n.type;if(8&s)za(t,e,n.child,r);else if(32&s){const t=jr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Yr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Rr(e[16]);za(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Wa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return za(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ur(t,n),dn(e,n))}this._attachedToViewContainer=!1}Vr(this._lView[1],this._lView)}onDestroy(t){Mi(this._lView[1],this._lView,null,t)}markForCheck(){no(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ro(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{ro(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ti(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ka extends Wa{constructor(t){super(t),this._view=t}detectChanges(){io(this._view)}checkNoChanges(){!function(t){Jt(!0);try{io(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const Qa=Ga;let $a=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qa,t.__ChangeDetectorRef__=!0,t})();function Ga(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=Nt(t.index,e);return new Wa(n,n)}return 47&t.type?new Wa(e[16],e):null}(Kt(),Ht(),t)}const Za=[new La],Ya=new qa([new Aa]),Ja=new Ha(Za),Xa=function(){return ru(Kt(),Ht())};let tu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Xa,t})();const eu=tu,nu=class extends eu{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ti(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),xi(e,n,t),new Wa(n)}};function ru(t,e){return 4&t.type?new nu(e,t,_a(t,e)):null}class iu{}class ou{}const su=function(){return du(Kt(),Ht())};let au=(()=>{class t{}return t.__NG_ELEMENT_ID__=su,t})();const uu=au,cu=class extends uu{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=qe(this._hostTNode,this._hostLView);if(Re(t)){const e=Ne(t,this._hostLView),n=Pe(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=lu(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(iu,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new cu(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],hn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Jr(i,o),a=n[11],u=Kr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,ti(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),hn(hu(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=lu(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ur(this._lContainer,e);n&&(dn(hu(this._lContainer),e),Vr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ur(this._lContainer,e);return n&&null!=dn(hu(this._lContainer),e)?new Wa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function lu(t){return t[8]}function hu(t){return t[8]||(t[8]=[])}function du(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=jt(t,e);Hr(n,Kr(n,r),i,function(t,e){return kt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Yi(r,e,i,t),eo(e,n)}return new cu(n,t,e)}const fu={};class pu extends va{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new yu(e,this.ngModule)}}function gu(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const mu=new sn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Tr});class yu extends ma{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(gi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return gu(this.componentDef.inputs)}get outputs(){return gu(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,fu,i);return o!==fu||r===fu?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ea,It),s=i.get(ka,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(kt(t))return t.selectRootElement(e,n===D.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Lr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Tr,clean:so,playerHandler:null,flags:0},d=Li(0,null,null,1,0,null,null,null,null,null),f=Ti(null,d,h,l,null,null,o,a,s,i);let p,g;le(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ki(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(po(a,u,!0),null!==t&&(ke(i,t,u),null!==a.classes&&ri(i,t,a.classes),null!==a.styles&&ni(i,t,a.styles)));const c=r.createRenderer(t,e),l=Ti(n,Fi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Be(Me(a,n),s,e.type),zi(s,a),Ki(a,n.length,1)),eo(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)ke(a,c,["ng-version",xa.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!li(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ke(a,c,t),e&&e.length>0&&ri(a,c,e.join(" "))}if(g=Rt(d,ct),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Qi(t,r,e,Ii(t,e,1,null),n));const i=Ze(e,t,r.directiveStart,r);Sr(i,e);const o=jt(r,e);return o&&Sr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ye(a.index),Bi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Hi(e,s)),s}(t,this.componentDef,f,h,[Ro]),xi(d,f,null)}finally{ge()}return new vu(this.componentType,p,_a(g,f),f,g)}}class vu extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ka(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const bu=new Map;class _u extends iu{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pu(this);const n=ut(t),r=t[$]||null;r&&aa(r),this._bootstrapComponents=xr(n.bootstrap),this._r3Injector=Oo(t,e,[{provide:iu,useValue:this},{provide:va,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=jo.THROW_IF_NOT_FOUND,n=x.Default){return t===jo||t===iu||t===go?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class wu extends ou{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,bu.get(i),n),bu.set(i,n));const o=xr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new _u(this.moduleType,t)}}function Cu(t,e,n){const r=Xt()+t,i=Ht();return i[r]===mi?Ho(i,r,n?e.call(n):e()):zo(i,r)}function Ou(t,e,n,r){return xu(Ht(),Xt(),t,e,n,r)}function Eu(t,e,n,r,i){return Au(Ht(),Xt(),t,e,n,r,i)}function Su(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=Ko(t,e,n,r);return Wo(t,e+2,i)||o}(t,u,i,o,s)?Ho(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):Iu(t,u+3)}(Ht(),Xt(),t,e,n,r,i,o)}function Tu(t,e,n,r,i,o,s){return function(t,e,n,r,i,o,s,a,u){const c=e+n;return Qo(t,c,i,o,s,a)?Ho(t,c+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):Iu(t,c+4)}(Ht(),Xt(),t,e,n,r,i,o,s)}function ku(t,e,n,r,i,o,s,a){const u=Xt()+t,c=Ht(),l=Qo(c,u,n,r,i,o);return Wo(c,u+4,s)||l?Ho(c,u+5,a?e.call(a,n,r,i,o,s):e(n,r,i,o,s)):zo(c,u+5)}function Iu(t,e){const n=t[e];return n===mi?void 0:n}function xu(t,e,n,r,i,o){const s=e+n;return Wo(t,s,i)?Ho(t,s+1,o?r.call(o,i):r(i)):Iu(t,s+1)}function Au(t,e,n,r,i,o,s){const a=e+n;return Ko(t,a,i,o)?Ho(t,a+2,s?r.call(s,i,o):r(i,o)):Iu(t,a+2)}function ju(t,e){const n=zt();let r;const i=t+ct;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=yt(r.type)),s=j(Jo);try{const t=Fe(!1),e=o();return Fe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Ht(),i,e),e}finally{j(s)}}function Ru(t,e,n){const r=t+ct,i=Ht(),o=Pt(i,r);return Du(i,Nu(i,r)?xu(i,Xt(),e,o.transform,n,o):o.transform(n))}function Pu(t,e,n,r){const i=t+ct,o=Ht(),s=Pt(o,i);return Du(o,Nu(o,i)?Au(o,Xt(),e,s.transform,n,r,s):s.transform(n,r))}function Nu(t,e){return t[1].data[e].pure}function Du(t,e){return Vo.isWrapped(e)&&(e=Vo.unwrap(e),t[te()]=mi),e}function Fu(t){return e=>{setTimeout(t,void 0,e)}}const Lu=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Fu(u),a&&(a=Fu(a)),c&&(c=Fu(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function Mu(){return this._results[Uo()]()}class Uu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Uo(),n=Uu.prototype;n[e]||(n[e]=Mu)}get changes(){return this._changes||(this._changes=new Lu)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=cn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Vu{constructor(t){this.queryList=t,this.matches=null}clone(){return new Vu(this.queryList)}setDirty(){this.queryList.setDirty()}}class qu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new qu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==ec(t,e).matches&&this.queries[e].setDirty()}}class Bu{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Hu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Hu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class zu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new zu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Wu(e,i)),this.matchTNodeWithReadOption(t,e,Ge(e,t,i,!1,!1))}else n===tu?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ge(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ca||r===au||r===tu&&4&e.type)this.addMatch(e.index,-2);else{const n=Ge(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Wu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ku(t,e,n,r){return-1===n?function(t,e){return 11&t.type?_a(t,e):4&t.type?ru(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ca?_a(e,t):n===tu?ru(e,t):n===au?du(e,t):void 0}(t,e,r):Ze(t,t[1],n,e)}function Qu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ku(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function $u(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Qu(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&$u(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];$u(n[1],n,i,r)}}}}}return r}function Gu(t){const e=Ht(),n=zt(),r=se();ae(r+1);const i=ec(n,r);if(t.dirty&&Ft(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?$u(n,e,r,[]):Qu(n,e,i,r);t.reset(o,Oa),t.notifyOnChanges()}return!0}return!1}function Zu(t,e,n){const r=zt();r.firstCreatePass&&(tc(r,new Bu(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Xu(r,Ht(),e)}function Yu(t,e,n,r){const i=zt();if(i.firstCreatePass){const o=Kt();tc(i,new Bu(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Xu(i,Ht(),n)}function Ju(){return t=Ht(),e=se(),t[19].queries[e].queryList;var t,e}function Xu(t,e,n){const r=new Uu(4==(4&n));Mi(t,e,r,r.destroy),null===e[19]&&(e[19]=new qu),e[19].queries.push(new Vu(r))}function tc(t,e,n){null===t.queries&&(t.queries=new Hu),t.queries.track(new zu(e,n))}function ec(t,e){return t.queries.getByIndex(e)}function nc(t=x.Default){const e=Ga(!0);if(null!=e||t&x.Optional)return e;b("ChangeDetectorRef")}const rc=new sn("Application Initializer");let ic=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ba,this.reject=ba,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();as(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(En(rc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const oc=new sn("AppId"),sc={provide:oc,useFactory:function(){return`${ac()}${ac()}${ac()}`},deps:[]};function ac(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uc=new sn("Platform Initializer"),cc=new sn("Platform ID"),lc=new sn("appBootstrapListener");let hc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const dc=new sn("LocaleId"),fc=new sn("DefaultCurrencyCode");class pc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const gc=function(t){return new wu(t)},mc=gc,yc=function(t){return Promise.resolve(gc(t))},vc=function(t){const e=gc(t),n=xr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new yu(n)),t},[]);return new pc(e,n)},bc=vc,_c=function(t){return Promise.resolve(vc(t))};let wc=(()=>{class t{constructor(){this.compileModuleSync=mc,this.compileModuleAsync=yc,this.compileModuleAndAllComponentsSync=bc,this.compileModuleAndAllComponentsAsync=_c}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Cc=(()=>Promise.resolve(0))();function Oc(t){"undefined"==typeof Zone?Cc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ec{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lu(!1),this.onMicrotaskEmpty=new Lu(!1),this.onStable=new Lu(!1),this.onError=new Lu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,kc(t),Tc(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),kc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Ic(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),xc(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Ic(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),xc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,kc(t),Tc(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ec.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ec.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Sc,ba,ba);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Sc={};function Tc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function kc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ic(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xc(t){t._nesting--,Tc(t)}class Ac{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Lu,this.onMicrotaskEmpty=new Lu,this.onStable=new Lu,this.onError=new Lu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let jc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ec.assertNotInAngularZone(),Oc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Oc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(En(Ec))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),Rc=(()=>{class t{constructor(){this._applications=new Map,Fc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Fc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class Pc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Nc(t){Fc=t}let Dc,Fc=new Pc,Lc=!0,Mc=!1;function Uc(){return Mc=!0,Lc}function Vc(){if(Mc)throw new Error("Cannot enable prod mode after platform setup.");Lc=!1}const qc=new sn("AllowMultipleToken");class Bc{constructor(t,e){this.name=t,this.token=e}}function Hc(t,e,n=[]){const r=`Platform: ${e}`,i=new sn(r);return(e=[])=>{let o=zc();if(!o||o.injector.get(qc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:yo,useValue:"platform"});!function(t){if(Dc&&!Dc.destroyed&&!Dc.injector.get(qc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Dc=t.get(Wc);const e=t.get(uc,null);e&&e.forEach(t=>t())}(jo.create({providers:t,name:r}))}return function(t){const e=zc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function zc(){return Dc&&!Dc.destroyed?Dc:null}let Wc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ac:("zone.js"===t?void 0:t)||new Ec({enableLongStackTrace:Uc(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Ec,useValue:n}];return n.run(()=>{const e=jo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Er,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{$c(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return as(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ic);return t.runInitializers(),t.donePromise.then(()=>(aa(i.injector.get(dc,oa)||oa),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Kc({},e);return function(t,e,n){const r=new wu(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Qc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(En(jo))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Kc(t,e){return Array.isArray(e)?e.reduce(Kc,t):Object.assign(Object.assign({},t),e)}let Qc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ec.assertNotInAngularZone(),Oc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ec.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ma?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(iu),i=n.create(jo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(jc,null),a=s&&i.injector.get(Rc);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),$c(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;$c(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(lc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(En(Ec),En(jo),En(Er),En(va),En(ic))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function $c(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Gc{}class Zc{}const Yc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Jc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Yc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Xc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Xc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(En(wc),En(Zc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Xc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const tl=function(t){return null},el=Hc(null,"core",[{provide:cc,useValue:"unknown"},{provide:Wc,deps:[jo]},{provide:Rc,deps:[]},{provide:hc,deps:[]}]),nl=[{provide:Qc,useClass:Qc,deps:[Ec,jo,Er,va,ic]},{provide:mu,deps:[Ec],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ic,useClass:ic,deps:[[new In,rc]]},{provide:wc,useClass:wc,deps:[]},sc,{provide:qa,useFactory:function(){return Ya},deps:[]},{provide:Ha,useFactory:function(){return Ja},deps:[]},{provide:dc,useFactory:function(t){return aa(t=t||"undefined"!=typeof $localize&&$localize.locale||oa),t},deps:[[new kn(dc),new In,new xn]]},{provide:fc,useValue:"USD"}];let rl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(En(Qc))},t.\u0275mod=nt({type:t}),t.\u0275inj=w({providers:nl}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"i",function(){return l}),n.d(e,"g",function(){return h}),n.d(e,"h",function(){return d});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function a(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function c(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function d(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return S}),n.d(e,"c",function(){return E}),n.d(e,"d",function(){return M}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return P}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return U}),n.d(e,"l",function(){return l}),n.d(e,"m",function(){return h}),n.d(e,"n",function(){return H}),n.d(e,"o",function(){return $}),n.d(e,"p",function(){return p}),n.d(e,"q",function(){return R}),n.d(e,"r",function(){return y}),n.d(e,"s",function(){return v}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return D}),n.d(e,"v",function(){return w}),n.d(e,"w",function(){return g}),n.d(e,"x",function(){return m}),n.d(e,"y",function(){return O}),n.d(e,"z",function(){return b}),n.d(e,"A",function(){return C}),n.d(e,"B",function(){return j}),n.d(e,"C",function(){return I}),n.d(e,"D",function(){return F}),n.d(e,"E",function(){return L}),n.d(e,"F",function(){return N}),n.d(e,"G",function(){return Q}),n.d(e,"H",function(){return K}),n.d(e,"I",function(){return x}),n.d(e,"J",function(){return B}),n.d(e,"K",function(){return z}),n.d(e,"L",function(){return W});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),a.encodeString(JSON.stringify(s),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return p().indexOf("Electron/")>=0}function w(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return p().indexOf("MSAppHost/")>=0}function O(){return!1}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.d)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function T(t,e){return t.replace(k,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var k=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},j=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},R=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function U(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function q(){}var B=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e){return t+" failed: "+e+" argument "}function z(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e)+"must be a valid function.")}function W(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e)+"must be a valid context object.")}var K=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function $(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.Q("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.W)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[v,u.A,[new u.B,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.P.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(u.C))},t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("Y7HM");class g extends r.a{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.l)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.m)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.m)(e,t)},createSubscribe:s.k,ErrorFactory:s.b,deepExtend:s.m}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.x)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Mb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Zb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=Object(r.Mb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Zb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Mb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Zb)(s).location;return new b(Object(r.Zb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(a),r.Zb(v,8))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(a),r.Zb(v,8))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(m),r.Zb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Mb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Zb)(m),Object(r.Zb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.ob;class T{}let k=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.v))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})(),I=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.rb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.xb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.t),r.Qb(r.u),r.Qb(r.l),r.Qb(r.F))},t.\u0275dir=r.Lb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class x{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new j(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new j(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.R),r.Qb(r.M),r.Qb(r.t))},t.\u0275dir=r.Lb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class j{constructor(t,e){this.record=t,this.view=e}}let R=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){N("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){N("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.R),r.Qb(r.M))},t.\u0275dir=r.Lb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class P{constructor(){this.$implicit=null,this.ngIf=null}}function N(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.xb)(e)}'.`)}let D=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.l),r.Qb(r.u),r.Qb(r.F))},t.\u0275dir=r.Lb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})();class F{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class L{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const M=new L,U=new F;let V=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.tb)(e))return M;if(Object(r.ub)(e))return U;throw n=t,Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.xb)(n)}'`);var n}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.bc())},t.\u0275pipe=r.Pb({name:"async",type:t,pure:!1}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({providers:[{provide:T,useClass:k}]}),t})();function B(t){return"server"===t}let H=(()=>{class t{}return t.\u0275prov=Object(r.Mb)({token:t,providedIn:"root",factory:()=>new z(Object(r.Zb)(s),window)}),t})();class z{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=W(this.window.history)||W(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function W(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class K extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new K,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=$||($=document.querySelector("base"),$)?$.getAttribute("href"):null;return null==e?null:(n=e,Q||(Q=document.createElement("a")),Q.setAttribute("href",n),"/"===Q.pathname.charAt(0)?Q.pathname:"/"+Q.pathname);var n}resetBaseElement(){$=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Q,$=null;const G=new r.r("TRANSITION_ID"),Z=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[G,s,r.s],multi:!0}];class Y{static init(){Object(r.Y)(new Y)}addToWindow(t){r.qb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.qb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.qb.getAllAngularRootElements=()=>t.getAllRootElements(),r.qb.frameworkStabilizers||(r.qb.frameworkStabilizers=[]),r.qb.frameworkStabilizers.push(t=>{const e=r.qb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const J=new r.r("EventManagerPlugins");let X=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(J),r.Zb(r.A))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})();class tt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let et=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})(),nt=(()=>{class t extends et{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(rt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(rt))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})();function rt(t){o().remove(t)}const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ot=/%COMP%/g;function st(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?st(t,i,n):(i=i.replace(ot,t),n.push(i))}return n}function at(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ut=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ct(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.S.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new lt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.S.ShadowDom:return new ht(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=st(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(X),r.Zb(nt),r.Zb(r.c))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})();class ct{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(it[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=it[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=it[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.H.DashCase|r.H.Important)?t.style.setProperty(e,n,i&r.H.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.H.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,at(n)):this.eventManager.addEventListener(t,e,at(n))}}class lt extends ct{constructor(t,e,n,r){super(t),this.component=n;const i=st(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(ot,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ot,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ht extends ct{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=st(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let dt=(()=>{class t extends tt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})();const ft=["alt","control","meta","shift"],pt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let yt=(()=>{class t extends tt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ft.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&gt.hasOwnProperty(e)&&(e=gt[e]))}return pt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ft.forEach(r=>{r!=n&&(0,mt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})(),vt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Mb)({factory:function(){return Object(r.Zb)(bt)},token:t,providedIn:"root"}),t})(),bt=(()=>{class t extends vt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.J.NONE:return e;case r.J.HTML:return Object(r.fb)(e,"HTML")?Object(r.yb)(e):Object(r.db)(this._doc,String(e)).toString();case r.J.STYLE:return Object(r.fb)(e,"Style")?Object(r.yb)(e):e;case r.J.SCRIPT:if(Object(r.fb)(e,"Script"))return Object(r.yb)(e);throw new Error("unsafe value used in a script context");case r.J.URL:return Object(r.pb)(e),Object(r.fb)(e,"URL")?Object(r.yb)(e):Object(r.eb)(String(e));case r.J.RESOURCE_URL:if(Object(r.fb)(e,"ResourceURL"))return Object(r.yb)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(r.gb)(t)}bypassSecurityTrustStyle(t){return Object(r.jb)(t)}bypassSecurityTrustScript(t){return Object(r.ib)(t)}bypassSecurityTrustUrl(t){return Object(r.kb)(t)}bypassSecurityTrustResourceUrl(t){return Object(r.hb)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=Object(r.Mb)({factory:function(){return t=Object(r.Zb)(r.o),new bt(t.get(s));var t},token:t,providedIn:"root"}),t})();const _t=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){K.makeCurrent(),Y.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.wb)(document),document},deps:[]}],wt=Object(r.T)(r.X,"browser",_t),Ct=[[],{provide:r.ab,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:J,useClass:dt,multi:!0,deps:[s,r.A,r.C]},{provide:J,useClass:yt,multi:!0,deps:[s]},[],{provide:ut,useClass:ut,deps:[X,nt,r.c]},{provide:r.G,useExisting:ut},{provide:et,useExisting:nt},{provide:nt,useClass:nt,deps:[s]},{provide:r.N,useClass:r.N,deps:[r.A]},{provide:X,useClass:X,deps:[J,r.A]},[]];let Ot=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:G,useExisting:r.c},Z]}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(t,12))},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({providers:Ct,imports:[q,r.f]}),t})();"undefined"!=typeof window&&window;var Et=n("Cfvw"),St=n("HDdC"),Tt=n("DH7j"),kt=n("lJxs"),It=n("XoHu");function xt(t,e){return new St.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Et.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const At=new r.r("NgValueAccessor"),jt={provide:At,useExisting:Object(r.V)(()=>Pt),multi:!0},Rt=new r.r("CompositionEventMode");let Pt=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.F),r.Qb(r.l),r.Qb(Rt,8))},t.\u0275dir=r.Lb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.cc("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.Bb([jt])]}),t})();const Nt=new r.r("NgValidators"),Dt=new r.r("NgAsyncValidators");function Ft(t){return null!=t}function Lt(t){const e=Object(r.tb)(t)?Object(Et.a)(t):t;return Object(r.sb)(e),e}function Mt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ut(t,e){return e.map(e=>e(t))}function Vt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function qt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Ft);return 0==e.length?null:function(t){return Mt(Ut(t,e))}}(Vt(t)):null}function Bt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Ft);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Tt.a)(e))return xt(e,null);if(Object(It.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return xt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return xt(t=1===t.length&&Object(Tt.a)(t[0])?t[0]:t,null).pipe(Object(kt.a)(t=>e(...t)))}return xt(t,null)}(Ut(t,e).map(Lt)).pipe(Object(kt.a)(Mt))}}(Vt(t)):null}function Ht(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let zt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=qt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Bt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Lb({type:t}),t})(),Wt=(()=>{class t extends zt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Kt(e||t)},t.\u0275dir=r.Lb({type:t,features:[r.zb]}),t})();const Kt=r.Xb(Wt);class Qt extends zt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $t{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Gt=(()=>{class t extends $t{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Qt,2))},t.\u0275dir=r.Lb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ib("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.zb]}),t})(),Zt=(()=>{class t extends $t{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Wt,10))},t.\u0275dir=r.Lb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ib("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.zb]}),t})();function Yt(t,e){Xt(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&te(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&te(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Jt(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Xt(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Ht(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);if(null!==e.asyncValidator?t.setAsyncValidators(Ht(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Jt(e._rawValidators,n),Jt(e._rawAsyncValidators,n)}}function te(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ee(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ne="VALID",re="INVALID",ie="PENDING",oe="DISABLED";function se(t){return(le(t)?t.validators:t)||null}function ae(t){return Array.isArray(t)?qt(t):t||null}function ue(t,e){return(le(e)?e.asyncValidators:t)||null}function ce(t){return Array.isArray(t)?Bt(t):t||null}function le(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class he{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ae(this._rawValidators),this._composedAsyncValidatorFn=ce(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ne}get invalid(){return this.status===re}get pending(){return this.status==ie}get disabled(){return this.status===oe}get enabled(){return this.status!==oe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ae(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ce(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ie,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=oe,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ne,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ne&&this.status!==ie||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oe:ne}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ie,this._hasOwnPendingAsyncValidator=!0;const e=Lt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof fe?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof pe&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?oe:this.errors?re:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ie)?ie:this._anyControlsHaveStatus(re)?re:ne}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){le(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class de extends he{constructor(t=null,e,n){super(se(e),ue(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ee(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ee(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class fe extends he{constructor(t,e,n){super(se(e),ue(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof de?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class pe extends he{constructor(t,e,n){super(se(e),ue(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof de?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const ge={provide:Wt,useExisting:Object(r.V)(()=>ye)},me=(()=>Promise.resolve(null))();let ye=(()=>{class t extends Wt{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new fe({},qt(t),Bt(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){me.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Yt(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){me.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),ee(this._directives,t)})}addFormGroup(t){me.then(()=>{const e=this._findContainer(t.path),n=new fe({});(function(t,e){Xt(t,e,!1)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){me.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){me.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Nt,10),r.Qb(Dt,10))},t.\u0275dir=r.Lb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.cc("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.Bb([ge]),r.zb]}),t})();const ve={provide:Qt,useExisting:Object(r.V)(()=>_e)},be=(()=>Promise.resolve(null))();let _e=(()=>{class t extends Qt{constructor(t,e,n,i){super(),this.control=new de,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Pt?n=t:Object.getPrototypeOf(t.constructor)===class{}?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Yt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){be.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;be.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Wt,9),r.Qb(Nt,10),r.Qb(Dt,10),r.Qb(At,10))},t.\u0275dir=r.Lb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.Bb([ve]),r.zb,r.Ab]}),t})(),we=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Lb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Ce=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({}),t})(),Oe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({imports:[[Ce]]}),t})(),Ee=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({imports:[Oe]}),t})();class Se{}const Te="*";function ke(t,e=null){return{type:4,styles:e,timings:t}}function Ie(t,e=null){return{type:2,steps:t,options:e}}function xe(t){return{type:6,styles:t,offset:null}}function Ae(t,e,n){return{type:0,name:t,styles:e,options:n}}function je(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Re(t){Promise.resolve(null).then(t)}class Pe{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Re(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Ne{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Re(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function De(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Fe(t){switch(t.length){case 0:return new Pe;case 1:return t[0];default:return new Ne(t)}}function Le(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case Te:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function Me(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Ue(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Ue(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Ue(n,"destroy",t)))}}function Ue(t,e,n){const r=n.totalTime,i=Ve(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function Ve(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function qe(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Be(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let He=(t,e)=>!1,ze=(t,e)=>!1,We=(t,e,n)=>[];const Ke=De();(Ke||"undefined"!=typeof Element)&&(He=(t,e)=>t.contains(e),ze=(()=>{if(Ke||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):ze}})(),We=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let Qe=null,$e=!1;function Ge(t){Qe||(Qe=("undefined"!=typeof document?document.body:null)||{},$e=!!Qe.style&&"WebkitAppearance"in Qe.style);let e=!0;return Qe.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Qe.style,!e&&$e)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Qe.style),e}const Ze=ze,Ye=He,Je=We;function Xe(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let tn=(()=>{class t{validateStyleProperty(t){return Ge(t)}matchesElement(t,e){return Ze(t,e)}containsElement(t,e){return Ye(t,e)}query(t,e,n){return Je(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new Pe(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})(),en=(()=>{class t{}return t.NOOP=new tn,t})();const nn="ng-enter",rn="ng-leave",on="ng-trigger",sn=".ng-trigger",an="ng-animating",un=".ng-animating";function cn(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ln(parseFloat(e[1]),e[2])}function ln(t,e){switch(e){case"s":return 1e3*t;default:return t}}function hn(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=ln(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=ln(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function dn(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function fn(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else dn(t,n);return n}function pn(t,e,n){return n?e+":"+n+";":""}function gn(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=pn(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=pn(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function mn(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=En(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),De()&&gn(t))}function yn(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=En(e);t.style[n]=""}),De()&&gn(t))}function vn(t){return Array.isArray(t)?1==t.length?t[0]:Ie(t):t}const bn=new RegExp("{{\\s*(.+?)\\s*}}","g");function _n(t){let e=[];if("string"==typeof t){let n;for(;n=bn.exec(t);)e.push(n[1]);bn.lastIndex=0}return e}function wn(t,e,n){const r=t.toString(),i=r.replace(bn,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Cn(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const On=/-+([a-z0-9])/g;function En(t){return t.replace(On,(...t)=>t[1].toUpperCase())}function Sn(t,e){return 0===t||0===e}function Tn(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=In(t,e)})}}return e}function kn(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function In(t,e){return window.getComputedStyle(t)[e]}const xn="*";function An(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(Pn(i,s)),"<"!=o[0]||i==xn&&s==xn||e.push(Pn(s,i))}(t,n,e)):n.push(t),n}const jn=new Set(["true","1"]),Rn=new Set(["false","0"]);function Pn(t,e){const n=jn.has(t)||Rn.has(t),r=jn.has(e)||Rn.has(e);return(i,o)=>{let s=t==xn||t==i,a=e==xn||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?jn.has(t):Rn.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?jn.has(e):Rn.has(e)),s&&a}}const Nn=new RegExp("s*:selfs*,?","g");function Dn(t,e,n){return new Fn(t).build(e,n)}class Fn{constructor(t){this._driver=t}build(t,e){const n=new Ln(e);return this._resetContextStyleTimingState(n),kn(this,vn(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(Mn(t)){const e=t;Object.keys(e).forEach(t=>{_n(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Cn(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=kn(this,vn(t.animation),e);return{type:1,matchers:An(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Un(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>kn(this,t,e)),options:Un(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=kn(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Un(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Vn(hn(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Vn(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||hn(r,e),Vn(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:xe({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=xe(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Te?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(Mn(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=_n(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Mn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Mn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:kn(this,vn(t.animation),e),options:Un(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Un(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Un(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Nn,"")),[t=t.replace(/@\*/g,sn).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,un),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,qe(e.collectedStyles,e.currentQuerySelector,{});const s=kn(this,vn(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:Un(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:hn(t.timings,e.errors,!0);return{type:12,animation:kn(this,vn(t.animation),e),timings:n,options:null}}}class Ln{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Mn(t){return!Array.isArray(t)&&"object"==typeof t}function Un(t){var e;return t?(t=dn(t)).params&&(t.params=(e=t.params)?dn(e):null):t={},t}function Vn(t,e,n){return{duration:t,delay:e,easing:n}}function qn(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Bn{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Hn=new RegExp(":enter","g"),zn=new RegExp(":leave","g");function Wn(t,e,n,r,i,o={},s={},a,u,c=[]){return(new Kn).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class Kn{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new Bn;const l=new $n(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),kn(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[qn(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?cn(n.duration):null,o=null!=n.delay?cn(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),kn(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Qn);const t=cn(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>kn(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?cn(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),kn(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return hn(e.params?wn(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?cn(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Qn);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),kn(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;kn(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const Qn={};class $n{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Qn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Gn(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=cn(n.duration)),null!=n.delay&&(r.delay=cn(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=wn(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new $n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=Qn,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Zn(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(Hn,"."+this._enterClassName)).replace(zn,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class Gn{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Gn(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Te,this._currentKeyframe[t]=Te}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Te})):fn(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=wn(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Te),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=fn(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==Te&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?Cn(t.values()):[],o=e.size?Cn(e.values()):[];if(n){const t=r[0],e=dn(t);t.offset=0,e.offset=1,r=[t,e]}return qn(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class Zn extends Gn{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=fn(t[0],!1);a.offset=0,i.push(a);const u=fn(t[0],!1);u.offset=Yn(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=fn(t[r],!1);s.offset=Yn((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return qn(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Yn(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Jn{}class Xn extends Jn{normalizePropertyName(t,e){return En(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(tr[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const tr=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function er(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const nr={};class rr{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||nr,d=this.buildStyles(n,s&&s.params||nr,l),f=a&&a.params||nr,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=c?[]:Wn(t,e,this.ast.animation,i,o,d,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return er(e,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);_.forEach(t=>{const n=t.element,r=qe(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=qe(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const C=Cn(g.values());return er(e,this._triggerName,n,r,v,d,p,_,C,m,y,w)}}class ir{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=dn(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=wn(o,r,e)),n[t]=o})}}),n}}class or{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new ir(t.style,t.options&&t.options.params||{})}),sr(this.states,"true","1"),sr(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new rr(t,e,this.states))}),this.fallbackTransition=new rr(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function sr(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const ar=new Bn;class ur{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=Dn(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=Le(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=Wn(this._driver,e,i,nn,rn,{},{},n,ar,r),o.forEach(t=>{const e=qe(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Te)})});const a=Fe(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=Ve(e,"","","");return Me(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const cr="ng-animate-queued",lr="ng-animate-disabled",hr=".ng-animate-disabled",dr=[],fr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},pr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class gr{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=dn(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const mr="void",yr=new gr(mr);class vr{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Sr(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=qe(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=qe(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Sr(t,on),Sr(t,"ng-trigger-"+e),a[e]=yr),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new _r(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Sr(t,on),Sr(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new gr(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=yr),u.value!==mr&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{yn(t,n),mn(t,r)})}return}const c=qe(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(Sr(t,cr),o.onStart(()=>{Tr(t,cr)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,sn,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,mr,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Fe(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||yr,a=new gr(mr),u=new _r(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==fr||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Sr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=Ve(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,Me(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class br{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new vr(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(wr(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!wr(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Sr(t,lr)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Tr(t,lr))}removeNode(t,e,n,r){if(wr(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return wr(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,sn,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,un,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Fe(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=fr,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,hr)&&this.markElementAsDisabled(t,!1),this.driver.query(t,hr,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Sr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Fe(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Bn,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Er(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=nn+p++;f.set(e,n),t.forEach(t=>Sr(t,n))});const g=[],m=new Set,y=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=Er(h,Array.from(m));b.forEach((t,e)=>{const n=rn+p++;v.set(e,n),t.forEach(t=>Sr(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Tr(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Tr(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>yn(i,p.fromStyles)),e.onDestroy(()=>mn(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>yn(i,p.fromStyles)),e.onDestroy(()=>mn(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>qe(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,O=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(O.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{qe(C,e,[]).push(t),t.destroy()})});const E=g.filter(t=>xr(t,a,u)),S=new Map;Or(S,this.driver,y,u,Te).forEach(t=>{xr(t,a,u)&&E.push(t)});const T=new Map;d.forEach((t,e)=>{Or(T,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=S.get(t),n=T.get(t);S.set(t,Object.assign(Object.assign({},e),n))});const k=[],I=[],x={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>mn(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=x;if(O.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=O.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>O.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,C,i,T,S);if(o.setRealPlayer(n),t===x)k.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=Fe(e)),r.push(o)}}else yn(e,s.fromStyles),o.onDestroy(()=>mn(e,s.toStyles)),I.push(o),c.has(e)&&r.push(o)}),I.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=Fe(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<g.length;A++){const t=g[A],e=t.__ng_removed;if(Tr(t,rn),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,un,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?kr(this,t,r):this.processLeaveNode(t)}return g.length=0,k.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),k}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==mr;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=qe(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}yn(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Pe(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return Ir(t,e),e}((n.get(h)||dr).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=Le(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new _r(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{qe(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Sr(t,an));const d=Fe(h);return d.onDestroy(()=>{c.forEach(t=>Tr(t,an)),mn(a,e.toStyles)}),l.forEach(t=>{qe(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Pe(t.duration,t.delay)}}class _r{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Pe,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Me(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){qe(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function wr(t){return t&&1===t.nodeType}function Cr(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Or(t,e,n,r,i){const o=[];n.forEach(t=>o.push(Cr(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=pr,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>Cr(t,o[a++])),s}function Er(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function Sr(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Tr(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function kr(t,e,n){Fe(n).onDone(()=>t.processLeaveNode(e))}function Ir(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Ne?Ir(r.players,e):e.push(r)}}function xr(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Ar{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new br(t,e,n),this._timelineEngine=new ur(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=Dn(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new or(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Be(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Be(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function jr(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=Pr(e[0]),e.length>1&&(r=Pr(e[e.length-1]))):e&&(n=Pr(e)),n||r?new Rr(t,n,r):null}let Rr=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&mn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(mn(this._element,this._initialStyles),this._endStyles&&(mn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(yn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(yn(this._element,this._endStyles),this._endStyles=null),mn(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Pr(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];Nr(i)&&(e=e||{},e[i]=t[i])}return e}function Nr(t){return"display"===t||"position"===t}const Dr="animation",Fr="animationend";class Lr{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Hr(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),Br(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),qr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Mr(this._element,this._name,"paused")}resume(){Mr(this._element,this._name,"running")}setPosition(t){const e=Ur(this._element,this._name);this._position=t*this._duration,Br(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),qr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Hr(t,"").split(","),r=Vr(n,e);r>=0&&(n.splice(r,1),Br(t,"",n.join(",")))}(this._element,this._name))}}function Mr(t,e,n){Br(t,"PlayState",n,Ur(t,e))}function Ur(t,e){const n=Hr(t,"");return n.indexOf(",")>0?Vr(n.split(","),e):Vr([n],e)}function Vr(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function qr(t,e,n){n?t.removeEventListener(Fr,e):t.addEventListener(Fr,e)}function Br(t,e,n,r){const i=Dr+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function Hr(t,e){return t.style[Dr+e]||""}class zr{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Lr(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:In(this.element,n))})}this.currentSnapshot=t}}class Wr extends Pe{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Xe(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Kr{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return Ge(t)}matchesElement(t,e){return Ze(t,e)}containsElement(t,e){return Ye(t,e)}query(t,e,n){return Je(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Xe(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof zr),u={};Sn(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Tn(t,e,u));if(0==n)return new Wr(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const d=jr(t,e),f=new zr(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class Qr{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:In(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class $r{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Gr().toString()),this._cssKeyframesDriver=new Kr}validateStyleProperty(t){return Ge(t)}matchesElement(t,e){return Ze(t,e)}containsElement(t,e){return Ye(t,e)}query(t,e,n){return Je(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof Qr);Sn(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=jr(t,e=Tn(t,e=e.map(t=>fn(t,!1)),u));return new Qr(t,e,a,l)}}function Gr(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let Zr=(()=>{class t extends Se{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.S.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Ie(t):t;return Xr(this._renderer,null,e,"register",[n]),new Yr(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.G),r.Zb(s))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})();class Yr extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Jr(this._id,t,e||{},this._renderer)}}class Jr{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Xr(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Xr(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const ti="@",ei="@.disabled";let ni=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new ri("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new ii(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.G),r.Zb(Ar),r.Zb(r.A))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})();class ri{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==ti&&e==ei?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class ii extends ri{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==ti?"."==e.charAt(1)&&e==ei?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==ti){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=ti&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let oi=(()=>{class t extends Ar{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s),r.Zb(en),r.Zb(Jn))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})();const si=[{provide:en,useFactory:function(){return"function"==typeof Gr()?new $r:new Kr}},{provide:new r.r("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:Se,useClass:Zr},{provide:Jn,useFactory:function(){return new Xn}},{provide:Ar,useClass:oi},{provide:r.G,useFactory:function(t,e,n){return new ni(t,e,n)},deps:[ut,Ar,r.A]}];let ai=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({providers:si,imports:[Ot]}),t})();var ui=n("LRne"),ci=n("XNiG"),li=n("9ppp");class hi extends ci.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new li.a;return this._value}next(t){super.next(this._value=t)}}var di=n("z+Ro"),fi=n("7o/Q");class pi extends fi.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class gi extends fi.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var mi=n("SeVD");function yi(t,e,n,r,i=new gi(t,n,r)){if(!i.closed)return e instanceof St.a?e.subscribe(i):Object(mi.a)(e)(i)}var vi=n("yCtX");const bi={};class _i{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new wi(t,this.resultSelector))}}class wi extends pi{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(bi),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(yi(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===bi?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ci=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Oi=n("bHdf");function Ei(...t){return Object(Oi.a)(1)(Object(ui.a)(...t))}var Si=n("EY2u");function Ti(t){return new St.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Et.a)(n):Object(Si.b)()).subscribe(e)})}var ki=n("EQ5u"),Ii=n("zx2A");function xi(t,e){return"function"==typeof e?n=>n.pipe(xi((n,r)=>Object(Et.a)(t(n,r)).pipe(Object(kt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Ai(t))}class Ai{constructor(t){this.project=t}call(t,e){return e.subscribe(new ji(t,this.project))}}class ji extends Ii.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ii.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Ii.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ri=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Pi(t){return e=>0===t?Object(Si.b)():e.lift(new Ni(t))}class Ni{constructor(t){if(this.total=t,this.total<0)throw new Ri}call(t,e){return e.subscribe(new Di(t,this.total))}}class Di extends fi.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Fi(...t){const e=t[t.length-1];return Object(di.a)(e)?(t.pop(),n=>Ei(t,n,e)):e=>Ei(t,e)}function Li(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Mi(t,e,n))}}class Mi{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ui(t,this.accumulator,this.seed,this.hasSeed))}}class Ui extends fi.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Vi(t,e){return function(n){return n.lift(new qi(t,e))}}class qi{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Bi(t,this.predicate,this.thisArg))}}class Bi extends fi.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Hi(t){return function(e){const n=new zi(t),r=e.lift(n);return n.caught=r}}class zi{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Wi(t,this.selector,this.caught))}}class Wi extends Ii.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ii.a(this);this.add(r);const i=Object(Ii.c)(n,r);i!==r&&this.add(i)}}}var Ki=n("5+tZ");function Qi(t,e){return Object(Ki.a)(t,e,1)}function $i(t){return function(e){return 0===t?Object(Si.b)():e.lift(new Gi(t))}}class Gi{constructor(t){if(this.total=t,this.total<0)throw new Ri}call(t,e){return e.subscribe(new Zi(t,this.total))}}class Zi extends fi.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Yi(t=to){return e=>e.lift(new Ji(t))}class Ji{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Xi(t,this.errorFactory))}}class Xi extends fi.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(jC){t=jC}this.destination.error(t)}}}function to(){return new Ci}function eo(t=null){return e=>e.lift(new no(t))}class no{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ro(t,this.defaultValue))}}class ro extends fi.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var io=n("SpAZ");function oo(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Vi((e,n)=>t(e,n,r)):io.a,Pi(1),n?eo(e):Yi(()=>new Ci))}var so=n("vkgz"),ao=n("x+ZX"),uo=n("quSY");function co(t){return e=>e.lift(new lo(t))}class lo{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ho(t,this.callback))}}class ho extends fi.a{constructor(t,e){super(t),this.add(new uo.a(e))}}class fo{constructor(t,e){this.id=t,this.url=e}}class po extends fo{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class go extends fo{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mo extends fo{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yo extends fo{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vo extends fo{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bo extends fo{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _o extends fo{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wo extends fo{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Co extends fo{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oo{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Eo{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class So{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class To{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ko{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Io{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xo{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ao="primary";class jo{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ro(t){return new jo(t)}function Po(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function No(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Do(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Fo(t[i],e[i]))return!1;return!0}function Fo(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Lo(t){return Array.prototype.concat.apply([],t)}function Mo(t){return t.length>0?t[t.length-1]:null}function Uo(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Vo(t){return Object(r.sb)(t)?t:Object(r.tb)(t)?Object(Et.a)(Promise.resolve(t)):Object(ui.a)(t)}function qo(t,e,n){return n?function(t,e){return Do(t,e)}(t.queryParams,e.queryParams)&&Bo(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Fo(t[n],e[n]))}(t.queryParams,e.queryParams)&&Ho(t.root,e.root)}function Bo(t,e){if(!$o(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Bo(t.children[n],e.children[n]))return!1}return!0}function Ho(t,e){return zo(t,e,e.segments)}function zo(t,e,n){if(t.segments.length>n.length)return!!$o(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!$o(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ho(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!$o(t.segments,r)&&!!t.children.primary&&zo(t.children.primary,e,i)}}class Wo{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return Yo.serialize(this)}}class Ko{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Uo(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jo(this)}}class Qo{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ro(this.parameters)),this._parameterMap}toString(){return os(this)}}function $o(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Go{}class Zo{parse(t){const e=new ls(t);return new Wo(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Xo(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${es(e)}=${es(t)}`).join("&"):`${es(e)}=${es(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Yo=new Zo;function Jo(t){return t.segments.map(t=>os(t)).join("/")}function Xo(t,e){if(!t.hasChildren())return Jo(t);if(e){const e=t.children.primary?Xo(t.children.primary,!1):"",n=[];return Uo(t.children,(t,e)=>{e!==Ao&&n.push(`${e}:${Xo(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Uo(t.children,(t,r)=>{r===Ao&&(n=n.concat(e(t,r)))}),Uo(t.children,(t,r)=>{r!==Ao&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Ao?[Xo(t.children.primary,!1)]:[`${n}:${Xo(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Jo(t)}/${e[0]}`:`${Jo(t)}/(${e.join("//")})`}}function ts(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function es(t){return ts(t).replace(/%3B/gi,";")}function ns(t){return ts(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rs(t){return decodeURIComponent(t)}function is(t){return rs(t.replace(/\+/g,"%20"))}function os(t){return`${ns(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${ns(t)}=${ns(e[t])}`).join("")}`;var e}const ss=/^[^\/()?;=#]+/;function as(t){const e=t.match(ss);return e?e[0]:""}const us=/^[^=?&#]+/,cs=/^[^?&#]+/;class ls{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ko([],{}):new Ko([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ko(t,e)),n}parseSegment(){const t=as(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Qo(rs(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=as(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=as(this.remaining);t&&(n=t,this.capture(n))}t[rs(e)]=rs(n)}parseQueryParam(t){const e=function(t){const e=t.match(us);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(cs);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=is(e),i=is(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=as(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Ao);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Ko([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class hs{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ds(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ds(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=fs(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return fs(t,this._root).map(t=>t.value)}}function ds(t,e){if(t===e.value)return e;for(const n of e.children){const e=ds(t,n);if(e)return e}return null}function fs(t,e){if(t===e.value)return[e];for(const n of e.children){const r=fs(t,n);if(r.length)return r.unshift(e),r}return[]}class ps{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function gs(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ms extends hs{constructor(t,e){super(t),this.snapshot=e,Cs(this,t)}toString(){return this.snapshot.toString()}}function ys(t,e){const n=function(t,e){const n=new _s([],{},{},"",{},Ao,e,null,t.root,-1,{});return new ws("",new ps(n,[]))}(t,e),r=new hi([new Qo("",{})]),i=new hi({}),o=new hi({}),s=new hi({}),a=new hi(""),u=new vs(r,i,s,a,o,Ao,e,n.root);return u.snapshot=n.root,new ms(new ps(u,[]),n)}class vs{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(kt.a)(t=>Ro(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(kt.a)(t=>Ro(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bs(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class _s{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ro(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ws extends hs{constructor(t,e){super(e),this.url=t,Cs(this,e)}toString(){return Os(this._root)}}function Cs(t,e){e.value._routerState=t,e.children.forEach(e=>Cs(t,e))}function Os(t){const e=t.children.length>0?` { ${t.children.map(Os).join(", ")} } `:"";return`${t.value}${e}`}function Es(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Do(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Do(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Do(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Do(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ss(t,e){return Do(t.params,e.params)&&function(t,e){return $o(t,e)&&t.every((t,n)=>Do(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Ss(t.parent,e.parent))}function Ts(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Ts(t,e,r);return Ts(t,e)})}(t,e,n);return new ps(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return ks(e,t),t}}const n=new vs(new hi((r=e.value).url),new hi(r.params),new hi(r.queryParams),new hi(r.fragment),new hi(r.data),r.outlet,r.component,r),i=e.children.map(e=>Ts(t,e));return new ps(n,i)}var r}function ks(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)ks(t.children[n],e.children[n])}function Is(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function xs(t){return"object"==typeof t&&null!=t&&t.outlets}function As(t,e,n,r,i){let o={};return r&&Uo(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Wo(n.root===t?e:js(n.root,t,e),o,i)}function js(t,e,n){const r={};return Uo(t.children,(t,i)=>{r[i]=t===e?n:js(t,e,n)}),new Ko(t.segments,r)}class Rs{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Is(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(xs);if(r&&r!==Mo(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ps{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Ns(t,e,n){if(t||(t=new Ko([],{})),0===t.segments.length&&t.hasChildren())return Ds(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(xs(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Us(a,u,e))return o;r+=2}else{if(!Us(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ko(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ko(t.segments.slice(r.pathIndex),t.children),Ds(e,0,i)}return r.match&&0===i.length?new Ko(t.segments,{}):r.match&&!t.hasChildren()?Fs(t,e,n):r.match?Ds(t,0,i):Fs(t,e,n)}function Ds(t,e,n){if(0===n.length)return new Ko(t.segments,{});{const r=function(t){return xs(t[0])?t[0].outlets:{[Ao]:t}}(n),i={};return Uo(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Ns(t.children[r],e,n))}),Uo(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ko(t.segments,i)}}function Fs(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(xs(o)){const t=Ls(o.outlets);return new Ko(r,t)}if(0===i&&Is(n[0])){r.push(new Qo(t.segments[e].path,Ms(n[0]))),i++;continue}const s=xs(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Is(a)?(r.push(new Qo(s,Ms(a))),i+=2):(r.push(new Qo(s,{})),i++)}return new Ko(r,{})}function Ls(t){const e={};return Uo(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Fs(new Ko([],{}),0,t))}),e}function Ms(t){const e={};return Uo(t,(t,n)=>e[n]=`${t}`),e}function Us(t,e,n){return t==n.path&&Do(e,n.parameters)}class Vs{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Es(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=gs(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Uo(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=gs(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=gs(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Io(t.value.snapshot))}),t.children.length&&this.forwardEvent(new To(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Es(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),qs(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function qs(t){Es(t.value),t.children.forEach(qs)}class Bs{constructor(t,e){this.routes=t,this.module=e}}function Hs(t){return"function"==typeof t}function zs(t){return t instanceof Wo}const Ws=Symbol("INITIAL_VALUE");function Ks(){return xi(t=>function(...t){let e,n;return Object(di.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Tt.a)(t[0])&&(t=t[0]),Object(vi.a)(t,n).lift(new _i(e))}(t.map(t=>t.pipe(Pi(1),Fi(Ws)))).pipe(Li((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Ws)return t;if(r===Ws&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||zs(r))return r}return t},t)},Ws),Vi(t=>t!==Ws),Object(kt.a)(t=>zs(t)?t:!0===t),Pi(1)))}let Qs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Rb(0,"router-outlet")},directives:function(){return[Ha]},encapsulation:2}),t})();function $s(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Gs(r,Zs(e,r))}}function Gs(t,e){t.children&&$s(t.children,e)}function Zs(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Ys(t){const e=t.children&&t.children.map(Ys),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ao&&(n.component=Qs),n}function Js(t){return t.outlet||Ao}function Xs(t,e){const n=t.filter(t=>Js(t)===e);return n.push(...t.filter(t=>Js(t)!==e)),n}const ta={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ea(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},ta):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||No)(n,t,e);if(!i)return Object.assign({},ta);const o={};Uo(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function na(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>ra(t,e,n)&&Js(n)!==Ao)}(t,n,r)){const i=new Ko(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Js(o)!==Ao){const n=new Ko([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Js(o)]=n}return i}(t,e,r,new Ko(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>ra(t,e,n))}(t,n,r)){const o=new Ko(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(ra(t,n,a)&&!i[Js(a)]){const n=new Ko([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Js(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Ko(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function ra(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function ia(t,e,n,r){return!!(Js(t)===r||r!==Ao&&ra(e,n,t))&&("**"===t.path||ea(e,t,n).matched)}function oa(t,e,n){return 0===e.length&&!t.children[n]}class sa{constructor(t){this.segmentGroup=t||null}}class aa{constructor(t){this.urlTree=t}}function ua(t){return new St.a(e=>e.error(new sa(t)))}function ca(t){return new St.a(e=>e.error(new aa(t)))}function la(t){return new St.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ha{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=na(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ko(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Ao).pipe(Object(kt.a)(t=>this.createUrlTree(da(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hi(t=>{if(t instanceof aa)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof sa)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Ao).pipe(Object(kt.a)(e=>this.createUrlTree(da(e),t.queryParams,t.fragment))).pipe(Hi(t=>{if(t instanceof sa)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ko([],{[Ao]:t}):t;return new Wo(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(kt.a)(t=>new Ko([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(Et.a)(r).pipe(Qi(r=>{const i=n.children[r],o=Xs(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(kt.a)(t=>({segment:t,outlet:r})))}),Li((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Vi((e,n)=>t(e,n,r)):io.a,$i(1),n?eo(e):Yi(()=>new Ci))}())}expandSegment(t,e,n,r,i,o){return Object(Et.a)(n).pipe(Qi(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Hi(t=>{if(t instanceof sa)return Object(ui.a)(null);throw t}))),oo(t=>!!t),Hi((t,n)=>{if(t instanceof Ci||"EmptyError"===t.name){if(oa(e,r,i))return Object(ui.a)(new Ko([],{}));throw new sa(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return ia(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):ua(e):ua(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ca(i):this.lineralizeSegments(n,i).pipe(Object(Ki.a)(n=>{const i=new Ko(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=ea(e,r,i);if(!s)return ua(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ca(l):this.lineralizeSegments(r,l).pipe(Object(Ki.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(ui.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(kt.a)(t=>(n._loadedConfig=t,new Ko(r,{})))):Object(ui.a)(new Ko(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=ea(e,n,r);if(!o)return ua(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Ki.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=na(e,s,u,o),l=new Ko(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(kt.a)(t=>new Ko(s,t)));if(0===o.length&&0===c.length)return Object(ui.a)(new Ko(s,{}));const h=Js(n)===i;return this.expandSegment(r,l,o,c,h?Ao:i,!0).pipe(Object(kt.a)(t=>new Ko(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ui.a)(new Bs(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ui.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Ki.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(kt.a)(t=>(e._loadedConfig=t,t))):function(t){return new St.a(e=>e.error(Po(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ui.a)(new Bs([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(ui.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Hs(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Hs(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Vo(o)});return Object(ui.a)(i).pipe(Ks(),Object(so.a)(t=>{if(!zs(t))return;const e=Po(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(kt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ui.a)(n);if(r.numberOfChildren>1||!r.children.primary)return la(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Wo(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Uo(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Uo(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Ko(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function da(t){const e={};for(const n of Object.keys(t.children)){const r=da(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ko(t.segments.concat(e.segments),e.children)}return t}(new Ko(t.segments,e))}class fa{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class pa{constructor(t,e){this.component=t,this.route=e}}function ga(t,e,n){const r=t._root;return ya(r,e?e._root:null,n,[r.value])}function ma(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function ya(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=gs(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!$o(t.url,e.url);case"pathParamsOrQueryParamsChange":return!$o(t.url,e.url)||!Do(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ss(t,e)||!Do(t.queryParams,e.queryParams);case"paramsChange":default:return!Ss(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new fa(r)):(o.data=s.data,o._resolvedData=s._resolvedData),ya(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new pa(a.outlet.component,s))}else s&&va(e,a,i),i.canActivateChecks.push(new fa(r)),ya(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Uo(o,(t,e)=>va(t,n.getContext(e),i)),i}function va(t,e,n){const r=gs(t),i=t.value;Uo(r,(t,r)=>{va(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new pa(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ba{}function _a(t){return new St.a(e=>e.error(t))}class wa{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=na(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Ao);if(null===e)return null;const n=new _s([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ao,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ps(n,e),i=new ws(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=bs(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Xs(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Oa(n);return r.sort((t,e)=>t.value.outlet===Ao?-1:e.value.outlet===Ao?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return oa(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!ia(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Mo(n).parameters:{};i=new _s(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ta(t),Js(t),t.component,t,Ea(e),Sa(e)+n.length,ka(t))}else{const r=ea(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new _s(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ta(t),Js(t),t.component,t,Ea(e),Sa(e)+o.length,ka(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=na(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new ps(i,t)]}if(0===a.length&&0===c.length)return[new ps(i,[])];const l=Js(t)===r,h=this.processSegment(a,u,c,l?Ao:r);return null===h?null:[new ps(i,h)]}}function Ca(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Oa(t){const e=[],n=new Set;for(const r of t){if(!Ca(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Oa(r.children);e.push(new ps(r.value,t))}return e.filter(t=>!n.has(t))}function Ea(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Sa(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ta(t){return t.data||{}}function ka(t){return t.resolve||{}}function Ia(t){return xi(e=>{const n=t(e);return n?Object(Et.a)(n).pipe(Object(kt.a)(()=>e)):Object(ui.a)(e)})}class xa extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Aa=new r.r("ROUTES");class ja{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(kt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Bs(Lo(i.injector.get(Aa,void 0,r.q.Self|r.q.Optional)).map(Ys),i)}),Hi(t=>{throw e._loader$=void 0,t}));return e._loader$=new ki.a(n,()=>new ci.a).pipe(Object(ao.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(Et.a)(this.loader.load(t)):Vo(t()).pipe(Object(Ki.a)(t=>t instanceof r.w?Object(ui.a)(t):Object(Et.a)(this.compiler.compileModuleAsync(t))))}}class Ra{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pa,this.attachRef=null}}class Pa{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Ra,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Na{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Da(t){throw t}function Fa(t,e,n){return e.parse("/")}function La(t,e){return Object(ui.a)(null)}let Ma=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new ci.a,this.errorHandler=Da,this.malformedUriErrorHandler=Fa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:La,afterPreactivation:La},this.urlHandlingStrategy=new Na,this.routeReuseStrategy=new xa,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Z);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Wo(new Ko([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ja(s,a,t=>this.triggerEvent(new Oo(t)),t=>this.triggerEvent(new Eo(t))),this.routerState=ys(this.currentUrlTree,this.rootComponentType),this.transitions=new hi({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Vi(t=>0!==t.id),Object(kt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),xi(t=>{let n=!1,r=!1;return Object(ui.a)(t).pipe(Object(so.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),xi(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ui.a)(t).pipe(xi(t=>{const n=this.transitions.getValue();return e.next(new po(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Si.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,xi(t=>function(t,e,n,r,i){return new ha(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(kt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(so.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Ki.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new wa(t,e,n,r,i,o).recognize();return null===s?_a(new ba):Object(ui.a)(s)}catch(jC){return _a(jC)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(kt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(so.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new vo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new po(n,this.serializeUrl(r),i,o);e.next(a);const u=ys(r,this.rootComponentType).snapshot;return Object(ui.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Si.a}),Ia(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(so.a)(t=>{const e=new bo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(kt.a)(t=>Object.assign(Object.assign({},t),{guards:ga(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Ki.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ui.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Et.a)(t).pipe(Object(Ki.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ui.a)(!0);const s=o.map(o=>{const s=ma(o,e,i);let a;if(function(t){return t&&Hs(t.canDeactivate)}(s))a=Vo(s.canDeactivate(t,e,n,r));else{if(!Hs(s))throw new Error("Invalid CanDeactivate guard");a=Vo(s(t,e,n,r))}return a.pipe(oo())});return Object(ui.a)(s).pipe(Ks())}(t.component,t.route,n,e,r)),oo(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Ki.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Et.a)(e).pipe(Qi(e=>Ei(function(t,e){return null!==t&&e&&e(new So(t)),Object(ui.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new ko(t)),Object(ui.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Ti(()=>{const i=e.guards.map(i=>{const o=ma(i,e.node,n);let s;if(function(t){return t&&Hs(t.canActivateChild)}(o))s=Vo(o.canActivateChild(r,t));else{if(!Hs(o))throw new Error("Invalid CanActivateChild guard");s=Vo(o(r,t))}return s.pipe(oo())});return Object(ui.a)(i).pipe(Ks())}));return Object(ui.a)(i).pipe(Ks())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ui.a)(!0);const i=r.map(r=>Ti(()=>{const i=ma(r,e,n);let o;if(function(t){return t&&Hs(t.canActivate)}(i))o=Vo(i.canActivate(e,t));else{if(!Hs(i))throw new Error("Invalid CanActivate guard");o=Vo(i(e,t))}return o.pipe(oo())}));return Object(ui.a)(i).pipe(Ks())}(t,e.route,n))),oo(t=>!0!==t,!0))}(r,o,t,e):Object(ui.a)(n)),Object(kt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(so.a)(t=>{if(zs(t.guardsResult)){const e=Po(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new _o(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Vi(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new mo(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ia(t=>{if(t.guards.canActivateChecks.length)return Object(ui.a)(t).pipe(Object(so.a)(t=>{const e=new wo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),xi(t=>{let n=!1;return Object(ui.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Ki.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ui.a)(t);let o=0;return Object(Et.a)(n).pipe(Qi(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ui.a)({});const o={};return Object(Et.a)(i).pipe(Object(Ki.a)(i=>function(t,e,n,r){const i=ma(t,e,r);return Vo(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(so.a)(t=>{o[i]=t}))),$i(1),Object(Ki.a)(()=>Object.keys(o).length===i.length?Object(ui.a)(o):Si.a))}(t._resolve,t,e,r).pipe(Object(kt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),bs(t,n).resolve),null)))}(t.route,e,r,i)),Object(so.a)(()=>o++),$i(1),Object(Ki.a)(e=>o===n.length?Object(ui.a)(t):Si.a))})),Object(so.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new mo(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(so.a)(t=>{const e=new Co(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ia(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(kt.a)(t=>{const e=function(t,e,n){const r=Ts(t,e._root,n?n._root:void 0);return new ms(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(so.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),Object(kt.a)(t=>(new Vs(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Object(so.a)({next(){n=!0},complete(){n=!0}}),co(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new mo(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Hi(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=zs(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new mo(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new yo(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(ip){t.reject(ip)}}var i;return Si.a}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){$s(t),this.config=t.map(Ys),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return As(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Rs(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Uo(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Rs(n,e,r)}(n);if(o.toRoot())return As(e.root,new Ko([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Ps(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ps(t,t===e.root,0)}const r=Is(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ps(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Ds(s.segmentGroup,s.index,o.commands):Ns(s.segmentGroup,s.index,o.commands);return As(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=zs(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(jC){e=this.malformedUriErrorHandler(jC,this.urlSerializer,t)}return e}isActive(t,e){if(zs(t))return qo(this.currentUrlTree,t,e);const n=this.parseUrl(t);return qo(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new go(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.O),r.Zb(Go),r.Zb(Pa),r.Zb(w),r.Zb(r.s),r.Zb(r.x),r.Zb(r.i),r.Zb(void 0))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})(),Ua=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new ci.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:qa(this.skipLocationChange),replaceUrl:qa(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:qa(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ma),r.Qb(vs),r.ac("tabindex"),r.Qb(r.F),r.Qb(r.l))},t.\u0275dir=r.Lb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.cc("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.Ab]}),t})(),Va=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new ci.a,this.subscription=t.events.subscribe(t=>{t instanceof go&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:qa(this.skipLocationChange),replaceUrl:qa(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:qa(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ma),r.Qb(vs),r.Qb(m))},t.\u0275dir=r.Lb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.cc("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Yb("href",e.href,r.yc),r.Db("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.Ab]}),t})();function qa(t){return""===t||!!t}let Ba=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof go&&this.update()})}ngAfterContentInit(){Object(ui.a)(this.links.changes,this.linksWithHrefs.changes,Object(ui.a)(null)).pipe(Object(Oi.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(Et.a)(e).pipe(Object(Oi.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Ma),r.Qb(r.l),r.Qb(r.F),r.Qb(r.h),r.Qb(Ua,8),r.Qb(Va,8))},t.\u0275dir=r.Lb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Jb(n,Ua,1),r.Jb(n,Va,1)),2&t){let t;r.sc(t=r.dc())&&(e.links=t),r.sc(t=r.dc())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.Ab]}),t})(),Ha=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Ao,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new za(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Pa),r.Qb(r.R),r.Qb(r.j),r.ac("name"),r.Qb(r.h))},t.\u0275dir=r.Lb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class za{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===vs?this.route:t===Pa?this.childContexts:this.parent.get(t,e)}}class Wa{}class Ka{preload(t,e){return Object(ui.a)(null)}}let Qa=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ja(e,n,e=>t.triggerEvent(new Oo(e)),e=>t.triggerEvent(new Eo(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vi(t=>t instanceof go),Qi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Et.a)(n).pipe(Object(Oi.a)(),Object(kt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(ui.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Ki.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Ma),r.Zb(r.x),r.Zb(r.i),r.Zb(r.s),r.Zb(Wa))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})(),$a=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof po?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof go&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xo&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new xo(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Ma),r.Zb(H),r.Zb(void 0))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})();const Ga=new r.r("ROUTER_CONFIGURATION"),Za=new r.r("ROUTER_FORROOT_GUARD"),Ya=[w,{provide:Go,useClass:Zo},{provide:Ma,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Ma(null,t,e,n,r,i,s,Lo(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Go,Pa,w,r.s,r.x,r.i,Aa,Ga,[class{},new r.B],[class{},new r.B]]},Pa,{provide:vs,useFactory:function(t){return t.routerState.root},deps:[Ma]},{provide:r.x,useClass:r.L},Qa,Ka,class{preload(t,e){return e().pipe(Hi(()=>Object(ui.a)(null)))}},{provide:Ga,useValue:{enableTracing:!1}}];function Ja(){return new r.z("Router",Ma)}let Xa=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Ya,ru(e),{provide:Za,useFactory:nu,deps:[[Ma,new r.B,new r.K]]},{provide:Ga,useValue:n||{}},{provide:m,useFactory:eu,deps:[a,[new r.p(v),new r.B],Ga]},{provide:$a,useFactory:tu,deps:[Ma,H,Ga]},{provide:Wa,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ka},{provide:r.z,multi:!0,useFactory:Ja},[iu,{provide:r.d,multi:!0,useFactory:ou,deps:[iu]},{provide:au,useFactory:su,deps:[iu]},{provide:r.b,multi:!0,useExisting:au}]]}}static forChild(e){return{ngModule:t,providers:[ru(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Za,8),r.Zb(Ma,8))},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({}),t})();function tu(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new $a(t,e,n)}function eu(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function nu(t){return"guarded"}function ru(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Aa,multi:!0,useValue:t}]}let iu=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new ci.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Ma),r=this.injector.get(Ga);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(ui.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Ga),n=this.injector.get(Qa),i=this.injector.get($a),o=this.injector.get(Ma),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.s))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})();function ou(t){return t.appInitializer.bind(t)}function su(t){return t.bootstrapListener.bind(t)}const au=new r.r("Router Initializer");class uu{constructor(t){this.key="",this.name="",this.url="",this.file=t}}class cu{constructor(){this.id="",this.title="",this.abstract="",this.photo="",this.link=""}}var lu=n("D0XW");function hu(){return t=>t.lift(new du)}class du{call(t,e){return e.subscribe(new fu(t))}}class fu extends fi.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function pu(t,e){return n=>n.lift(new gu(t,e))}class gu{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new mu(t,this.compare,this.keySelector))}}class mu extends fi.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var yu=n("pxpQ"),vu=n("spgP"),bu=n("Jgta"),_u=n("zIRd"),wu=n("qOnz"),Cu=n("q/0M"),Ou=function(t,e){return(Ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Eu(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Su,Tu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ku=ku||{},Iu=Tu||self;function xu(){}function Au(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ju(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ru="closure_uid_"+(1e9*Math.random()>>>0),Pu=0;function Nu(t,e,n){return t.call.apply(t.bind,arguments)}function Du(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Fu(t,e,n){return(Fu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nu:Du).apply(null,arguments)}function Lu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Mu(){return Date.now()}function Uu(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Vu(){this.j=this.j,this.i=this.i}Vu.prototype.j=!1,Vu.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Ru)&&t[Ru]||(t[Ru]=++Pu)}(this)},Vu.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var qu=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Bu=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Hu(t){return Array.prototype.concat.apply([],arguments)}function zu(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Wu(t){return/^[\s\xa0]*$/.test(t)}var Ku,Qu=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function $u(t,e){return-1!=t.indexOf(e)}function Gu(t,e){return t<e?-1:t>e?1:0}t:{var Zu=Iu.navigator;if(Zu){var Yu=Zu.userAgent;if(Yu){Ku=Yu;break t}}Ku=""}function Ju(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Xu(t){var e={};for(var n in t)e[n]=t[n];return e}var tc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ec(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<tc.length;o++)n=tc[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function nc(t){return nc[" "](t),t}nc[" "]=xu;var rc,ic,oc=$u(Ku,"Opera"),sc=$u(Ku,"Trident")||$u(Ku,"MSIE"),ac=$u(Ku,"Edge"),uc=ac||sc,cc=$u(Ku,"Gecko")&&!($u(Ku.toLowerCase(),"webkit")&&!$u(Ku,"Edge"))&&!($u(Ku,"Trident")||$u(Ku,"MSIE"))&&!$u(Ku,"Edge"),lc=$u(Ku.toLowerCase(),"webkit")&&!$u(Ku,"Edge");function hc(){var t=Iu.document;return t?t.documentMode:void 0}t:{var dc="",fc=(ic=Ku,cc?/rv:([^\);]+)(\)|;)/.exec(ic):ac?/Edge\/([\d\.]+)/.exec(ic):sc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ic):lc?/WebKit\/(\S+)/.exec(ic):oc?/(?:Version)[ \/]?(\S+)/.exec(ic):void 0);if(fc&&(dc=fc?fc[1]:""),sc){var pc=hc();if(null!=pc&&pc>parseFloat(dc)){rc=String(pc);break t}}rc=dc}var gc={};function mc(t){return function(t,e){var n=gc;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Qu(String(rc)).split("."),r=Qu(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Gu(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Gu(0==s[2].length,0==a[2].length)||Gu(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var yc=Iu.document&&sc&&(hc()||parseInt(rc,10))||void 0,vc=!sc||9<=Number(yc),bc=sc&&!mc("9"),_c=function(){if(!Iu.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Iu.addEventListener("test",xu,e),Iu.removeEventListener("test",xu,e)}catch(n){}return t}();function wc(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Cc(t,e){if(wc.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(cc){t:{try{nc(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Oc[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}wc.prototype.b=function(){this.defaultPrevented=!0},Uu(Cc,wc);var Oc={2:"touch",3:"pen",4:"mouse"};Cc.prototype.b=function(){Cc.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,bc)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ec="closure_listenable_"+(1e6*Math.random()|0),Sc=0;function Tc(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Sc,this.Y=this.Z=!1}function kc(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ic(t){this.src=t,this.a={},this.b=0}function xc(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=qu(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(kc(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ac(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ic.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ac(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Tc(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var jc="closure_lm_"+(1e6*Math.random()|0),Rc={};function Pc(t,e,n,r,i){if(r&&r.once)return Dc(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pc(t,e[o],n,r,i);return null}return n=Hc(n),t&&t[Ec]?t.va(e,n,ju(r)?!!r.capture:!!r,i):Nc(t,e,n,!1,r,i)}function Nc(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ju(i)?!!i.capture:!!i;if(s&&!vc)return null;var a=qc(t);if(a||(t[jc]=a=new Ic(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Vc,e=vc?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_c||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Mc(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Dc(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Dc(t,e[o],n,r,i);return null}return n=Hc(n),t&&t[Ec]?t.wa(e,n,ju(r)?!!r.capture:!!r,i):Nc(t,e,n,!0,r,i)}function Fc(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Fc(t,e[o],n,r,i);else r=ju(r)?!!r.capture:!!r,n=Hc(n),t&&t[Ec]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Ac(o=t.a[e],n,r,i))&&(kc(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=qc(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ac(e,n,r,i)),(n=-1<t?e[t]:null)&&Lc(n))}function Lc(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ec])xc(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Mc(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=qc(e))?(xc(n,t),0==n.b&&(n.src=null,e[jc]=null)):kc(t)}}}function Mc(t){return t in Rc?Rc[t]:Rc[t]="on"+t}function Uc(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Lc(t),n.call(r,e)}function Vc(t,e){if(t.Y)return!0;if(!vc){if(!e)t:{e=["window","event"];for(var n=Iu,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Uc(t,e=new Cc(e,this))}return Uc(t,new Cc(e,this))}function qc(t){return(t=t[jc])instanceof Ic?t:null}var Bc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hc(t){return"function"==typeof t?t:(t[Bc]||(t[Bc]=function(e){return t.handleEvent(e)}),t[Bc])}function zc(){Vu.call(this),this.c=new Ic(this),this.J=this,this.C=null}function Wc(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new wc(e,t);else if(e instanceof wc)e.target=e.target||t;else{var i=e;ec(e=new wc(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Kc(s,r,!0,e)&&i}if(i=Kc(s=e.a=t,r,!0,e)&&i,i=Kc(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Kc(s=e.a=n[o],r,!1,e)&&i}function Kc(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&xc(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Uu(zc,Vu),zc.prototype[Ec]=!0,(Su=zc.prototype).addEventListener=function(t,e,n,r){Pc(this,t,e,n,r)},Su.removeEventListener=function(t,e,n,r){Fc(this,t,e,n,r)},Su.G=function(){if(zc.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)kc(n[r]);delete e.a[t],e.b--}}this.C=null},Su.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Su.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Qc=Iu.JSON.stringify;function $c(){this.b=this.a=null}var Gc,Zc=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Jc},function(t){t.reset()});function Yc(){var t=nl,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Jc(){this.next=this.b=this.a=null}function Xc(t){Iu.setTimeout(function(){throw t},0)}function tl(t,e){Gc||function(){var t=Iu.Promise.resolve(void 0);Gc=function(){t.then(rl)}}(),el||(Gc(),el=!0),nl.add(t,e)}$c.prototype.add=function(t,e){var n=Zc.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Jc.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Jc.prototype.reset=function(){this.next=this.b=this.a=null};var el=!1,nl=new $c;function rl(){for(var t;t=Yc();){try{t.a.call(t.b)}catch(n){Xc(n)}var e=Zc;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}el=!1}function il(t,e){zc.call(this),this.b=t||1,this.a=e||Iu,this.f=Fu(this.Za,this),this.g=Mu()}function ol(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function sl(t,e,n){if("function"==typeof t)n&&(t=Fu(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Fu(t.handleEvent,t)}return 2147483647<Number(e)?-1:Iu.setTimeout(t,e||0)}function al(t){t.a=sl(function(){t.a=null,t.c&&(t.c=!1,al(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Uu(il,zc),(Su=il.prototype).aa=!1,Su.M=null,Su.Za=function(){if(this.aa){var t=Mu()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Wc(this,"tick"),this.aa&&(ol(this),this.start()))}},Su.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Mu())},Su.G=function(){il.X.G.call(this),ol(this),delete this.a};var ul=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ou(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:al(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Iu.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Vu);function cl(t){Vu.call(this),this.b=t,this.a={}}Uu(cl,Vu);var ll=[];function hl(t,e,n,r){Array.isArray(n)||(n&&(ll[0]=n.toString()),n=ll);for(var i=0;i<n.length;i++){var o=Pc(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function dl(t){Ju(t.a,function(t,e){this.a.hasOwnProperty(e)&&Lc(t)},t),t.a={}}function fl(){this.a=!0}function pl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Qc(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}cl.prototype.G=function(){cl.X.G.call(this),dl(this)},cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fl.prototype.info=function(){};var gl={},ml=null;function yl(){return ml=ml||new zc}function vl(t){wc.call(this,gl.Fa,t)}function bl(t){var e=yl();Wc(e,new vl(e,t))}function _l(t,e){wc.call(this,gl.STAT_EVENT,t),this.stat=e}function wl(t){var e=yl();Wc(e,new _l(e,t))}function Cl(t){wc.call(this,gl.Ga,t)}function Ol(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Iu.setTimeout(function(){t()},e)}gl.Fa="serverreachability",Uu(vl,wc),gl.STAT_EVENT="statevent",Uu(_l,wc),gl.Ga="timingevent",Uu(Cl,wc);var El={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Sl={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Tl(){}function kl(){}Tl.prototype.a=null;var Il,xl={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Al(){wc.call(this,"d")}function jl(){wc.call(this,"c")}function Rl(){}function Pl(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new cl(this),this.P=Nl,this.R=new il(t=uc?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Uu(Al,wc),Uu(jl,wc),Uu(Rl,Tl),Il=new Rl;var Nl=45e3,Dl={},Fl={};function Ll(t,e,n){t.H=1,t.i=oh(Xl(e)),t.j=n,t.I=!0,Ml(t,null)}function Ml(t,e){t.u=Mu(),ql(t),t.l=Xl(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),vh(n.b,"t",r),t.D=0,t.a=dd(t.g,t.g.C?e:null),0<t.O&&(t.F=new ul(Fu(t.Ca,t,t.a),t.O)),hl(t.J,t.a,"readystatechange",t.Xa),e=t.B?Xu(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),bl(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ul(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Vl(t,n);if(i==Fl){4==e&&(t.h=4,wl(14),r=!1),pl(t.c,t.f,null,"[Incomplete Response]");break}if(i==Dl){t.h=4,wl(15),pl(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}pl(t.c,t.f,i,null),Kl(t,i)}4==e&&0==n.length&&(t.h=1,wl(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),id(e),e.F=!0,wl(11))):(pl(t.c,t.f,n,"[Invalid Chunked Response]"),Wl(t),zl(t))}function Vl(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Fl:(n=Number(e.substring(n,r)),isNaN(n)?Dl:(r+=1)+n>e.length?Fl:(e=e.substr(r,n),t.D=r+n,e))}function ql(t){t.T=Mu()+t.P,Bl(t,t.P)}function Bl(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ol(Fu(t.Va,t),e)}function Hl(t){t.o&&(Iu.clearTimeout(t.o),t.o=null)}function zl(t){0==t.g.v||t.A||ad(t.g,t)}function Wl(t){Hl(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ol(t.R),dl(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Kl(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Sh(n.b,t)))if(n.I=t.N,!t.C&&Sh(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch($w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;sd(n),Gh(n)}rd(n),wl(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ol(Fu(n.Sa,n),6e3));if(1>=Eh(n.b)&&n.ea){try{n.ea()}catch($w){}n.ea=void 0}}else cd(n,11)}else if((t.C||n.a==t)&&sd(n),!Wu(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&($u(l,"spdy")||$u(l,"quic")||$u(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Th(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,ih(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Mu()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=hd(u,u.C?u.ga:null,u.fa),f.C){kh(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(Hl(p),ql(p)),u.a=f}else nd(u);0<n.g.length&&Jh(n)}else"stop"!=i[0]&&"close"!=i[0]||cd(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?cd(n,7):$h(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);bl(4)}catch($w){}}function Ql(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Au(t)||"string"==typeof t)Bu(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Au(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Au(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function $l(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof $l)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Gl(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Zl(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Zl(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Zl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Su=Pl.prototype).setTimeout=function(t){this.P=t},Su.Xa=function(t){t=t.target;var e=this.F;e&&3==zh(t)?e.f():this.Ca(t)},Su.Ca=function(t){try{if(t==this.a)t:{var e=zh(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!uc&&!this.a.$())){this.A||4!=e||7==n||bl(8==n||0>=r?3:2),Hl(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wu(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,wl(12),Wl(this),zl(this);break t}pl(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Kl(this,u)}this.I?(Ul(this,e,o),uc&&this.b&&3==e&&(hl(this.J,this.R,"tick",this.Wa),this.R.start())):(pl(this.c,this.f,o,null),Kl(this,o)),4==e&&Wl(this),this.b&&!this.A&&(4==e?ad(this.g,this):(this.b=!1,ql(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,wl(12)):(this.h=0,wl(13)),Wl(this),zl(this)}}}catch(c){}},Su.Wa=function(){if(this.a){var t=zh(this.a),e=this.a.$();this.D<e.length&&(Hl(this),Ul(this,t,e),this.b&&4!=t&&ql(this))}},Su.cancel=function(){this.A=!0,Wl(this)},Su.Va=function(){this.o=null;var t=Mu();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(bl(3),wl(17)),Wl(this),this.h=2,zl(this)):Bl(this,this.T-t)},(Su=$l.prototype).K=function(){Gl(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Su.L=function(){return Gl(this),this.a.concat()},Su.get=function(t,e){return Zl(this.b,t)?this.b[t]:e},Su.set=function(t,e){Zl(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Su.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Yl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jl(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Jl){this.a=void 0!==e?e:t.a,th(this,t.f),this.j=t.j,eh(this,t.c),nh(this,t.h),this.g=t.g,e=t.b;var n=new ph;n.c=e.c,e.a&&(n.a=new $l(e.a),n.b=e.b),rh(this,n),this.i=t.i}else t&&(n=String(t).match(Yl))?(this.a=!!e,th(this,n[1]||"",!0),this.j=sh(n[2]||""),eh(this,n[3]||"",!0),nh(this,n[4]),this.g=sh(n[5]||"",!0),rh(this,n[6]||"",!0),this.i=sh(n[7]||"")):(this.a=!!e,this.b=new ph(null,this.a))}function Xl(t){return new Jl(t)}function th(t,e,n){t.f=n?sh(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function eh(t,e,n){t.c=n?sh(e,!0):e}function nh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function rh(t,e,n){e instanceof ph?(t.b=e,function(t,e){e&&!t.f&&(gh(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(mh(this,e),vh(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=ah(e,dh)),t.b=new ph(e,t.a))}function ih(t,e,n){t.b.set(e,n)}function oh(t){return ih(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Mu()).toString(36)),t}function sh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ah(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,uh),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function uh(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Jl.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ah(e,ch,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ah(e,ch,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ah(n,"/"==n.charAt(0)?hh:lh,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ah(n,fh)),t.join("")};var ch=/[#\/\?@]/g,lh=/[#\?:]/g,hh=/[#\?]/g,dh=/[#\?@]/g,fh=/#/g;function ph(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function gh(t){t.a||(t.a=new $l,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function mh(t,e){gh(t),e=bh(t,e),Zl(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Zl((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Gl(t)))}function yh(t,e){return gh(t),e=bh(t,e),Zl(t.a.b,e)}function vh(t,e,n){mh(t,e),0<n.length&&(t.c=null,t.a.set(bh(t,e),zu(n)),t.b+=n.length)}function bh(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Su=ph.prototype).add=function(t,e){gh(this),this.c=null,t=bh(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Su.forEach=function(t,e){gh(this),this.a.forEach(function(n,r){Bu(n,function(n){t.call(e,n,r,this)},this)},this)},Su.L=function(){gh(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Su.K=function(t){gh(this);var e=[];if("string"==typeof t)yh(this,t)&&(e=Hu(e,this.a.get(bh(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Hu(e,t[n])}return e},Su.set=function(t,e){return gh(this),this.c=null,yh(this,t=bh(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Su.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Su.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var _h=function(){return function(t,e){this.b=t,this.a=e}}();function wh(t){this.g=t||Ch,t=Iu.PerformanceNavigationTiming?0<(t=Iu.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Iu.ia&&Iu.ia.ya&&Iu.ia.ya()&&Iu.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ch=10;function Oh(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Eh(t){return t.b?1:t.a?t.a.size:0}function Sh(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Th(t,e){t.a?t.a.add(e):t.b=e}function kh(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ih(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Eu(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return zu(t.c)}function xh(){}function Ah(){this.a=new xh}function jh(t,e,n){var r=n||"";try{Ql(t,function(t,n){var i=t;ju(t)&&(i=Qc(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(jC){throw e.push(r+"type="+encodeURIComponent("_badmap")),jC}}function Rh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}wh.prototype.cancel=function(){var t,e;if(this.c=Ih(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Eu(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},xh.prototype.stringify=function(t){return Iu.JSON.stringify(t,void 0)},xh.prototype.parse=function(t){return Iu.JSON.parse(t,void 0)};var Ph=Iu.JSON.parse;function Nh(t){zc.call(this),this.headers=new $l,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Dh,this.D=this.F=!1}Uu(Nh,zc);var Dh="",Fh=/^https?$/i,Lh=["POST","PUT"];function Mh(t){return"content-type"==t.toLowerCase()}function Uh(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Vh(t),Bh(t)}function Vh(t){t.u||(t.u=!0,Wc(t,"complete"),Wc(t,"error"))}function qh(t){if(t.b&&void 0!==ku&&(!t.s[1]||4!=zh(t)||2!=t.W()))if(t.l&&4==zh(t))sl(t.za,0,t);else if(Wc(t,"readystatechange"),4==zh(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Yl)[1]||null;if(!o&&Iu.self&&Iu.self.location){var s=Iu.self.location.protocol;o=s.substr(0,s.length-1)}i=!Fh.test(o?o.toLowerCase():"")}e=i}if(e)Wc(t,"complete"),Wc(t,"success");else{t.h=6;try{var a=2<zh(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Vh(t)}}finally{Bh(t)}}}function Bh(t,e){if(t.a){Hh(t);var n=t.a,r=t.s[0]?xu:null;t.a=null,t.s=null,e||Wc(t,"ready");try{n.onreadystatechange=r}catch(jC){}}}function Hh(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Iu.clearTimeout(t.m),t.m=null)}function zh(t){return t.a?t.a.readyState:0}function Wh(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ju(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ih(t,e,n))}function Kh(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qh(t){this.pa=0,this.g=[],this.c=new fl,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Kh("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Kh("baseRetryDelayMs",5e3,t),this.Ra=Kh("retryDelaySeedMs",1e4,t),this.Ma=Kh("forwardChannelMaxRetries",2,t),this.ma=Kh("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new wh(t&&t.concurrentRequestLimit),this.ka=new Ah,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function $h(t){if(Zh(t),3==t.v){var e=t.R++,n=Xl(t.B);ih(n,"SID",t.J),ih(n,"RID",e),ih(n,"TYPE","terminate"),td(t,n),(e=new Pl(t,t.c,e,void 0)).H=2,e.i=oh(Xl(n)),n=!1,Iu.navigator&&Iu.navigator.sendBeacon&&(n=Iu.navigator.sendBeacon(e.i.toString(),"")),!n&&Iu.Image&&((new Image).src=e.i,n=!0),n||(e.a=dd(e.g,null),e.a.ba(e.i)),e.u=Mu(),ql(e)}ld(t)}function Gh(t){t.a&&(id(t),t.a.cancel(),t.a=null)}function Zh(t){Gh(t),t.j&&(Iu.clearTimeout(t.j),t.j=null),sd(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Iu.clearTimeout(t.h),t.h=null)}function Yh(t,e){t.g.push(new _h(t.Oa++,e)),3==t.v&&Jh(t)}function Jh(t){Oh(t.b)||t.h||(t.h=!0,tl(t.Ba,t),t.u=0)}function Xh(t,e){var n;n=e?e.f:t.R++;var r=Xl(t.B);ih(r,"SID",t.J),ih(r,"RID",n),ih(r,"AID",t.P),td(t,r),t.i&&t.l&&Wh(r,t.i,t.l),n=new Pl(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ed(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Th(t.b,n),Ll(n,r,e)}function td(t,e){t.f&&Ql({},function(t,n){ih(e,n,t)})}function ed(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Fu(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{jh(l,s,"req"+c+"_")}catch(Hd){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function nd(t){t.a||t.j||(t.T=1,tl(t.Aa,t),t.o=0)}function rd(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ol(Fu(t.Aa,t),ud(t,t.o)),t.o++,0))}function id(t){null!=t.s&&(Iu.clearTimeout(t.s),t.s=null)}function od(t){t.a=new Pl(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Xl(t.la);ih(e,"RID","rpc"),ih(e,"SID",t.J),ih(e,"CI",t.H?"0":"1"),ih(e,"AID",t.P),td(t,e),ih(e,"TYPE","xmlhttp"),t.i&&t.l&&Wh(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=oh(Xl(e)),n.j=null,n.I=!0,Ml(n,t)}function sd(t){null!=t.m&&(Iu.clearTimeout(t.m),t.m=null)}function ad(t,e){var n=null;if(t.a==e){sd(t),id(t),t.a=null;var r=2}else{if(!Sh(t.b,e))return;n=e.s,kh(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Mu()-e.u;var i=t.u;Wc(r=yl(),new Cl(r,n,e,i)),Jh(t)}else nd(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Eh(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ol(Fu(t.Ba,t,e),ud(t,t.u)),t.u++,0)))}(t,e)||2==r&&rd(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:cd(t,5);break;case 4:cd(t,10);break;case 3:cd(t,6);break;default:cd(t,2)}}function ud(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function cd(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Fu(t.Ya,t);n||(n=new Jl("//www.google.com/images/cleardot.gif"),Iu.location&&"http"==Iu.location.protocol||th(n,"https"),oh(n)),function(t,e){var n=new fl;if(Iu.Image){var r=new Image;r.onload=Lu(Rh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Lu(Rh,n,r,"TestLoadImage: error",!1,e),r.onabort=Lu(Rh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lu(Rh,n,r,"TestLoadImage: timeout",!1,e),Iu.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else wl(2);t.v=0,t.f&&t.f.ra(e),ld(t),Zh(t)}function ld(t){t.v=0,t.I=-1,t.f&&(0==Ih(t.b).length&&0==t.g.length||(t.b.c.length=0,zu(t.g),t.g.length=0),t.f.qa())}function hd(t,e,n){var r=function(t){return t instanceof Jl?Xl(t):new Jl(t,void 0)}(n);if(""!=r.c)e&&eh(r,e+"."+r.c),nh(r,r.h);else{var i=Iu.location;r=function(t,e,n,r){var i=new Jl(null,void 0);return t&&th(i,t),e&&eh(i,e),n&&nh(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ju(t.V,function(t,e){ih(r,e,t)}),n=t.na,(e=t.A)&&n&&ih(r,e,n),ih(r,"VER",t.ha),td(t,r),r}function dd(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nh(t.Na)).F=t.C,e}function fd(){}function pd(){if(sc&&!(10<=Number(yc)))throw Error("Environmental error: no available transport.")}function gd(t,e){zc.call(this),this.a=new Qh(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Wu(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wu(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new vd(this)}function md(t){Al.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function yd(){jl.call(this),this.status=1}function vd(t){this.a=t}(Su=Nh.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Il),this.a.onreadystatechange=Fu(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Uh(this,o)}t=n||"";var i=new $l(this.headers);r&&Ql(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Mh,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Iu.FormData&&t instanceof Iu.FormData,!(0<=qu(Lh,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Hh(this),0<this.o&&((this.D=function(t){return sc&&mc(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Fu(this.xa,this)):this.m=sl(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Uh(this,o)}},Su.xa=function(){void 0!==ku&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Wc(this,"timeout"),this.abort(8))},Su.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Wc(this,"complete"),Wc(this,"abort"),Bh(this))},Su.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Bh(this,!0)),Nh.X.G.call(this)},Su.za=function(){this.j||(this.A||this.l||this.g?qh(this):this.Ua())},Su.Ua=function(){qh(this)},Su.W=function(){try{return 2<zh(this)?this.a.status:-1}catch(ic){return-1}},Su.$=function(){try{return this.a?this.a.responseText:""}catch(ic){return""}},Su.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ph(e)}},Su.ua=function(){return this.h},Su.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Su=Qh.prototype).ha=8,Su.v=1,Su.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Pl(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ec(r=Xu(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ed(this,n,e),ih(i=Xl(this.B),"RID",t),ih(i,"CVER",22),this.A&&ih(i,"X-HTTP-Session-Id",this.A),td(this,i),this.i&&r&&Wh(i,this.i,r),Th(this.b,n),this.Ia&&ih(i,"TYPE","init"),this.da?(ih(i,"$req",e),ih(i,"SID","null"),n.U=!0,Ll(n,i,null)):Ll(n,i,e),this.v=2}}else 3==this.v&&(t?Xh(this,t):0==this.g.length||Oh(this.b)||Xh(this))},Su.Aa=function(){if(this.j=null,od(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ol(Fu(this.Ta,this),t)}},Su.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,wl(10),Gh(this),od(this))},Su.Sa=function(){null!=this.m&&(this.m=null,Gh(this),rd(this),wl(19))},Su.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),wl(2)):(this.c.info("Failed to ping google.com"),wl(1))},(Su=fd.prototype).ta=function(){},Su.sa=function(){},Su.ra=function(){},Su.qa=function(){},Su.Ja=function(){},pd.prototype.a=function(t,e){return new gd(t,e)},Uu(gd,zc),gd.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;wl(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=hd(t,null,t.fa),Jh(t)},gd.prototype.close=function(){$h(this.a)},gd.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Yh(this.a,e)}else this.l?((e={}).__data__=Qc(t),Yh(this.a,e)):Yh(this.a,t)},gd.prototype.G=function(){this.a.f=null,delete this.f,$h(this.a),delete this.a,gd.X.G.call(this)},Uu(md,Al),Uu(yd,jl),Uu(vd,fd),vd.prototype.ta=function(){Wc(this.a,"a")},vd.prototype.sa=function(t){Wc(this.a,new md(t))},vd.prototype.ra=function(t){Wc(this.a,new yd(t))},vd.prototype.qa=function(){Wc(this.a,"b")},pd.prototype.createWebChannel=pd.prototype.a,gd.prototype.send=gd.prototype.h,gd.prototype.open=gd.prototype.g,gd.prototype.close=gd.prototype.close,El.NO_ERROR=0,El.TIMEOUT=8,El.HTTP_ERROR=6,Sl.COMPLETE="complete",kl.EventType=xl,xl.OPEN="a",xl.CLOSE="b",xl.ERROR="c",xl.MESSAGE="d",zc.prototype.listen=zc.prototype.va,Nh.prototype.listenOnce=Nh.prototype.wa,Nh.prototype.getLastError=Nh.prototype.Qa,Nh.prototype.getLastErrorCode=Nh.prototype.ua,Nh.prototype.getStatus=Nh.prototype.W,Nh.prototype.getResponseJson=Nh.prototype.Pa,Nh.prototype.getResponseText=Nh.prototype.$,Nh.prototype.send=Nh.prototype.ba;var bd=El,_d=Sl,wd=gl,Cd=kl,Od=Nh,Ed=n("mrSG"),Sd=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Sd.o=-1;var Td={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Ed.d)(e,t),e}(Error),Id=new Cu.b("@firebase/firestore");function xd(){return Id.logLevel}function Ad(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Id.logLevel<=Cu.a.DEBUG){var r=e.map(Pd);Id.debug.apply(Id,Object(Ed.h)(["Firestore (8.5.0): "+t],r))}}function jd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Id.logLevel<=Cu.a.ERROR){var r=e.map(Pd);Id.error.apply(Id,Object(Ed.h)(["Firestore (8.5.0): "+t],r))}}function Rd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Id.logLevel<=Cu.a.WARN){var r=e.map(Pd);Id.warn.apply(Id,Object(Ed.h)(["Firestore (8.5.0): "+t],r))}}function Pd(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(jC){return t}}function Nd(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw jd(e),new Error(e)}function Dd(t,e){t||Nd()}function Fd(t,e){return t}function Ld(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Md=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ld(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ud(t,e){return t<e?-1:t>e?1:0}function Vd(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function qd(t){return t+"\0"}var Bd=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new kd(Td.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new kd(Td.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new kd(Td.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kd(Td.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ud(this.nanoseconds,t.nanoseconds):Ud(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Hd=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Bd(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function zd(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wd(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kd(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Qd=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Nd(),void 0===n?n=t.length-e:n>t.length-e&&Nd(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),$d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ed.d)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new kd(Td.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Qd),Gd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ed.d)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Gd.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new kd(Td.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new kd(Td.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new kd(Td.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new kd(Td.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Qd),Yd=function(){function t(t){this.fields=t,t.sort(Zd.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Vd(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Jd=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ud(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Jd.EMPTY_BYTE_STRING=new Jd("");var Xd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tf(t){if(Dd(!!t),"string"==typeof t){var e=0,n=Xd.exec(t);if(Dd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ef(t.seconds),nanos:ef(t.nanos)}}function ef(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function nf(t){return"string"==typeof t?Jd.fromBase64String(t):Jd.fromUint8Array(t)}function rf(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function of(t){var e=t.mapValue.fields.__previous_value__;return rf(e)?of(e):e}function sf(t){var e=tf(t.mapValue.fields.__local_write_time__.timestampValue);return new Bd(e.seconds,e.nanos)}function af(t){return null==t}function uf(t){return 0===t&&1/t==-1/0}function cf(t){return"number"==typeof t&&Number.isInteger(t)&&!uf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var lf=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t($d.fromString(e))},t.fromName=function(e){return new t($d.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===$d.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return $d.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new $d(e.slice()))},t}();function hf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rf(t)?4:10:Nd()}function df(t,e){var n=hf(t);if(n!==hf(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sf(t).isEqual(sf(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=tf(t.timestampValue),r=tf(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return nf(t.bytesValue).isEqual(nf(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ef(t.geoPointValue.latitude)===ef(e.geoPointValue.latitude)&&ef(t.geoPointValue.longitude)===ef(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ef(t.integerValue)===ef(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ef(t.doubleValue),r=ef(e.doubleValue);return n===r?uf(n)===uf(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Vd(t.arrayValue.values||[],e.arrayValue.values||[],df);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(zd(n)!==zd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!df(n[i],r[i])))return!1;return!0}(t,e);default:return Nd()}}function ff(t,e){return void 0!==(t.values||[]).find(function(t){return df(t,e)})}function pf(t,e){var n=hf(t),r=hf(e);if(n!==r)return Ud(n,r);switch(n){case 0:return 0;case 1:return Ud(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ef(t.integerValue||t.doubleValue),r=ef(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return gf(t.timestampValue,e.timestampValue);case 4:return gf(sf(t),sf(e));case 5:return Ud(t.stringValue,e.stringValue);case 6:return function(t,e){var n=nf(t),r=nf(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ud(n[i],r[i]);if(0!==o)return o}return Ud(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ud(ef(t.latitude),ef(e.latitude));return 0!==n?n:Ud(ef(t.longitude),ef(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=pf(n[i],r[i]);if(o)return o}return Ud(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ud(r[s],o[s]);if(0!==a)return a;var u=pf(n[r[s]],i[o[s]]);if(0!==u)return u}return Ud(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Nd()}}function gf(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ud(t,e);var n=tf(t),r=tf(e),i=Ud(n.seconds,r.seconds);return 0!==i?i:Ud(n.nanos,r.nanos)}function mf(t){return yf(t)}function yf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=tf(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?nf(t.bytesValue).toBase64():"referenceValue"in t?lf.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=yf(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+yf(t.fields[o])}return e+"}"}(t.mapValue):Nd();var e}function vf(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function bf(t){return!!t&&"integerValue"in t}function _f(t){return!!t&&"arrayValue"in t}function wf(t){return!!t&&"nullValue"in t}function Cf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Of(t){return!!t&&"mapValue"in t}var Ef=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Zd.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return df(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===hf(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Of(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Zd.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Of(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Sf(t){var e=[];return Wd(t.fields||{},function(t,n){var r=new Zd([t]);if(Of(n)){var i=Sf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Yd(e)}var Tf=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Hd.min(),Ef.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ef.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ef.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ef.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ef.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),kf=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function If(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new kf(t,e,n,r,i,o,s)}function xf(t){var e=Fd(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+mf(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),af(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Bf(e.startAt)),e.endAt&&(n+="|ub:",n+=Bf(e.endAt)),e.h=n}return e.h}function Af(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!zf(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!df(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kf(t.startAt,e.startAt)&&Kf(t.endAt,e.endAt)}function jf(t){return lf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Rf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Ed.d)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Pf(t,n,r):"array-contains"===n?new Lf(t,r):"in"===n?new Mf(t,r):"not-in"===n?new Uf(t,r):"array-contains-any"===n?new Vf(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Nf(t,n):new Df(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(pf(e,this.value)):null!==e&&hf(this.value)===hf(e)&&this.m(pf(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Nd()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Pf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=lf.fromName(r.referenceValue),i}return Object(Ed.d)(e,t),e.prototype.matches=function(t){var e=lf.comparator(t.key,this.key);return this.m(e)},e}(Rf),Nf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ff(0,n),r}return Object(Ed.d)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Rf),Df=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ff(0,n),r}return Object(Ed.d)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Rf);function Ff(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return lf.fromName(t.referenceValue)})}var Lf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Ed.d)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return _f(e)&&ff(e.arrayValue,this.value)},e}(Rf),Mf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Ed.d)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&ff(this.value.arrayValue,e)},e}(Rf),Uf=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Ed.d)(e,t),e.prototype.matches=function(t){if(ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!ff(this.value.arrayValue,e)},e}(Rf),Vf=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Ed.d)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!_f(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return ff(e.value.arrayValue,t)})},e}(Rf),qf=function(t,e){this.position=t,this.before=e};function Bf(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return mf(t)}).join(",")}var Hf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function zf(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Wf(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?lf.comparator(lf.fromName(s.referenceValue),n.key):pf(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Kf(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!df(t.position[n],e.position[n]))return!1;return!0}var Qf=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function $f(t,e,n,r,i,o,s,a){return new Qf(t,e,n,r,i,o,s,a)}function Gf(t){return new Qf(t)}function Zf(t){return!af(t.limit)&&"F"===t.limitType}function Yf(t){return!af(t.limit)&&"L"===t.limitType}function Jf(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Xf(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function tp(t){return null!==t.collectionGroup}function ep(t){var e=Fd(t);if(null===e.p){e.p=[];var n=Xf(e),r=Jf(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Hf(n)),e.p.push(new Hf(Zd.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Hf(Zd.keyField(),u))}}}return e.p}function np(t){var e=Fd(t);if(!e.T)if("F"===e.limitType)e.T=If(e.path,e.collectionGroup,ep(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ep(e);r<i.length;r++){var o=i[r];n.push(new Hf(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new qf(e.endAt.position,!e.endAt.before):null,a=e.startAt?new qf(e.startAt.position,!e.startAt.before):null;e.T=If(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function rp(t,e,n){return new Qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ip(t,e){return Af(np(t),np(e))&&t.limitType===e.limitType}function op(t){return xf(np(t))+"|lt:"+t.limitType}function sp(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+mf(e.value);var e}).join(", ")+"]"),af(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Bf(t.startAt)),t.endAt&&(e+=", endAt: "+Bf(t.endAt)),"Target("+e+")"}(np(t))+"; limitType="+t.limitType+")"}function ap(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):lf.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Wf(t.startAt,ep(t),e)||t.endAt&&Wf(t.endAt,ep(t),e))}(t,e)}function up(t){return function(e,n){for(var r=!1,i=0,o=ep(t);i<o.length;i++){var s=o[i],a=cp(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function cp(t,e,n){var r=t.field.isKeyField()?lf.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?pf(r,i):Nd()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Nd()}}function lp(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uf(e)?"-0":e}}function hp(t){return{integerValue:""+t}}function dp(t,e){return cf(e)?hp(e):lp(t,e)}var fp=function(){this._=void 0};function pp(t,e,n){return t instanceof yp?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof vp?bp(t,e):t instanceof _p?wp(t,e):function(t,e){var n=mp(t,e),r=Op(n)+Op(t.A);return bf(n)&&bf(t.A)?hp(r):lp(t.R,r)}(t,e)}function gp(t,e,n){return t instanceof vp?bp(t,e):t instanceof _p?wp(t,e):n}function mp(t,e){return t instanceof Cp?bf(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ed.d)(e,t),e}(fp),vp=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Ed.d)(e,t),e}(fp);function bp(t,e){for(var n=Ep(e),r=function(t){n.some(function(e){return df(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var _p=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Ed.d)(e,t),e}(fp);function wp(t,e){for(var n=Ep(e),r=function(t){n=n.filter(function(e){return!df(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Cp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Ed.d)(e,t),e}(fp);function Op(t){return ef(t.integerValue||t.doubleValue)}function Ep(t){return _f(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Sp=function(t,e){this.field=t,this.transform=e},Tp=function(t,e){this.version=t,this.transformResults=e},kp=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ip(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var xp=function(){};function Ap(t,e,n){t instanceof Dp?function(t,e,n){var r=t.value.clone(),i=Mp(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Fp?function(t,e,n){if(Ip(t.precondition,e)){var r=Mp(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Lp(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function jp(t,e,n){t instanceof Dp?function(t,e,n){if(Ip(t.precondition,e)){var r=t.value.clone(),i=Up(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Np(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Fp?function(t,e,n){if(Ip(t.precondition,e)){var r=Up(t.fieldTransforms,n,e),i=e.data;i.setAll(Lp(t)),i.setAll(r),e.convertToFoundDocument(Np(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Ip(t.precondition,e)&&e.convertToNoDocument(Hd.min())}(t,e)}function Rp(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=mp(o.transform,s||null);null!=a&&(null==n&&(n=Ef.empty()),n.set(o.field,a))}return n||null}function Pp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Vd(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof vp&&e instanceof vp||t instanceof _p&&e instanceof _p?Vd(t.elements,e.elements,df):t instanceof Cp&&e instanceof Cp?df(t.A,e.A):t instanceof yp&&e instanceof yp}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Np(t){return t.isFoundDocument()?t.version:Hd.min()}var Dp=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Ed.d)(e,t),e}(xp),Fp=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Ed.d)(e,t),e}(xp);function Lp(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Mp(t,e,n){var r=new Map;Dd(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gp(s,a,n[i]))}return r}function Up(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,pp(a,u,e))}return r}var Vp,qp,Bp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Ed.d)(e,t),e}(xp),Hp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Ed.d)(e,t),e}(xp),zp=function(t){this.count=t};function Wp(t){switch(t){case Td.OK:return Nd();case Td.CANCELLED:case Td.UNKNOWN:case Td.DEADLINE_EXCEEDED:case Td.RESOURCE_EXHAUSTED:case Td.INTERNAL:case Td.UNAVAILABLE:case Td.UNAUTHENTICATED:return!1;case Td.INVALID_ARGUMENT:case Td.NOT_FOUND:case Td.ALREADY_EXISTS:case Td.PERMISSION_DENIED:case Td.FAILED_PRECONDITION:case Td.ABORTED:case Td.OUT_OF_RANGE:case Td.UNIMPLEMENTED:case Td.DATA_LOSS:return!0;default:return Nd()}}function Kp(t){if(void 0===t)return jd("GRPC error has no .code"),Td.UNKNOWN;switch(t){case Vp.OK:return Td.OK;case Vp.CANCELLED:return Td.CANCELLED;case Vp.UNKNOWN:return Td.UNKNOWN;case Vp.DEADLINE_EXCEEDED:return Td.DEADLINE_EXCEEDED;case Vp.RESOURCE_EXHAUSTED:return Td.RESOURCE_EXHAUSTED;case Vp.INTERNAL:return Td.INTERNAL;case Vp.UNAVAILABLE:return Td.UNAVAILABLE;case Vp.UNAUTHENTICATED:return Td.UNAUTHENTICATED;case Vp.INVALID_ARGUMENT:return Td.INVALID_ARGUMENT;case Vp.NOT_FOUND:return Td.NOT_FOUND;case Vp.ALREADY_EXISTS:return Td.ALREADY_EXISTS;case Vp.PERMISSION_DENIED:return Td.PERMISSION_DENIED;case Vp.FAILED_PRECONDITION:return Td.FAILED_PRECONDITION;case Vp.ABORTED:return Td.ABORTED;case Vp.OUT_OF_RANGE:return Td.OUT_OF_RANGE;case Vp.UNIMPLEMENTED:return Td.UNIMPLEMENTED;case Vp.DATA_LOSS:return Td.DATA_LOSS;default:return Nd()}}(qp=Vp||(Vp={}))[qp.OK=0]="OK",qp[qp.CANCELLED=1]="CANCELLED",qp[qp.UNKNOWN=2]="UNKNOWN",qp[qp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qp[qp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qp[qp.NOT_FOUND=5]="NOT_FOUND",qp[qp.ALREADY_EXISTS=6]="ALREADY_EXISTS",qp[qp.PERMISSION_DENIED=7]="PERMISSION_DENIED",qp[qp.UNAUTHENTICATED=16]="UNAUTHENTICATED",qp[qp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qp[qp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qp[qp.ABORTED=10]="ABORTED",qp[qp.OUT_OF_RANGE=11]="OUT_OF_RANGE",qp[qp.UNIMPLEMENTED=12]="UNIMPLEMENTED",qp[qp.INTERNAL=13]="INTERNAL",qp[qp.UNAVAILABLE=14]="UNAVAILABLE",qp[qp.DATA_LOSS=15]="DATA_LOSS";var Qp=function(){function t(t,e){this.comparator=t,this.root=e||Gp.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gp.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gp.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new $p(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new $p(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new $p(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new $p(this.root,t,this.comparator,!0)},t}(),$p=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Gp=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Nd();if(this.right.isRed())throw Nd();var t=this.left.check();if(t!==this.right.check())throw Nd();return t+(this.isRed()?0:1)},t}();Gp.EMPTY=null,Gp.RED=!0,Gp.BLACK=!1,Gp.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Nd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Nd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Nd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Nd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Nd()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Gp(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Zp=function(){function t(t){this.comparator=t,this.data=new Qp(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Yp(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Yp(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Yp=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Jp=new Qp(lf.comparator);function Xp(){return Jp}var tg=new Qp(lf.comparator);function eg(){return tg}var ng=new Qp(lf.comparator);function rg(){return ng}var ig=new Zp(lf.comparator);function og(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ig,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var sg=new Zp(Ud);function ag(){return sg}var ug=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,cg.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Hd.min(),r,ag(),Xp(),og())},t}(),cg=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Jd.EMPTY_BYTE_STRING,n,og(),og(),og())},t}(),lg=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},hg=function(t,e){this.targetId=t,this.V=e},dg=function(t,e,n,r){void 0===n&&(n=Jd.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},fg=function(){function t(){this.S=0,this.D=mg(),this.C=Jd.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=og(),e=og(),n=og();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Nd()}}),new cg(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=mg()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),pg=function(){function t(t){this.W=t,this.G=new Map,this.H=Xp(),this.J=gg(),this.Y=new Zp(Ud)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Nd()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(jf(i))if(0===n){var o=new lf(i.path);this.tt(e,o,Tf.newNoDocument(o,Hd.min()))}else Dd(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&jf(o.target)){var s=new lf(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Tf.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=og();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new ug(t,n,this.Y,this.H,r);return this.H=Xp(),this.J=gg(),this.Y=new Zp(Ud),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new fg,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Zp(Ud),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ad("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new fg),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function gg(){return new Qp(lf.comparator)}function mg(){return new Qp(lf.comparator)}var yg={asc:"ASCENDING",desc:"DESCENDING"},vg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bg=function(t,e){this.databaseId=t,this.I=e};function _g(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function wg(t,e){return t.I?e.toBase64():e.toUint8Array()}function Cg(t,e){return _g(t,e.toTimestamp())}function Og(t){return Dd(!!t),Hd.fromTimestamp(function(t){var e=tf(t);return new Bd(e.seconds,e.nanos)}(t))}function Eg(t,e){return function(t){return new $d(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Sg(t){var e=$d.fromString(t);return Dd(Gg(e)),e}function Tg(t,e){return Eg(t.databaseId,e.path)}function kg(t,e){var n=Sg(e);if(n.get(1)!==t.databaseId.projectId)throw new kd(Td.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new kd(Td.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lf(jg(n))}function Ig(t,e){return Eg(t.databaseId,e)}function xg(t){var e=Sg(t);return 4===e.length?$d.emptyPath():jg(e)}function Ag(t){return new $d(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jg(t){return Dd(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Rg(t,e,n){return{name:Tg(t,e),fields:n.toProto().mapValue.fields}}function Pg(t,e,n){var r=kg(t,e.name),i=Og(e.updateTime),o=new Ef({mapValue:{fields:e.fields}}),s=Tf.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Ng(t,e){var n;if(e instanceof Dp)n={update:Rg(t,e.key,e.value)};else if(e instanceof Bp)n={delete:Tg(t,e.key)};else if(e instanceof Fp)n={update:Rg(t,e.key,e.data),updateMask:$g(e.fieldMask)};else{if(!(e instanceof Hp))return Nd();n={verify:Tg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof yp)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vp)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _p)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Cp)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Nd()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Cg(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Nd()}(t,e.precondition)),n}function Dg(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?kp.updateTime(Og(t.updateTime)):void 0!==t.exists?kp.exists(t.exists):kp.none()}(e.currentDocument):kp.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Dd("REQUEST_TIME"===e.setToServerValue),n=new yp):"appendMissingElements"in e?n=new vp(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new _p(e.removeAllFromArray.values||[]):"increment"in e?n=new Cp(t,e.increment):Nd();var r=Zd.fromServerFormat(e.fieldPath);return new Sp(r,n)}(t,e)}):[];if(e.update){var i=kg(t,e.update.name),o=new Ef({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Yd((t.fieldPaths||[]).map(function(t){return Zd.fromServerFormat(t)}))}(e.updateMask);return new Fp(i,o,s,n,r)}return new Dp(i,o,n,r)}if(e.delete){var a=kg(t,e.delete);return new Bp(a,n)}if(e.verify){var u=kg(t,e.verify);return new Hp(u,n)}return Nd()}function Fg(t,e){return{documents:[Ig(t,e.path)]}}function Lg(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ig(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ig(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Cf(t.value))return{unaryFilter:{field:zg(t.field),op:"IS_NAN"}};if(wf(t.value))return{unaryFilter:{field:zg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Cf(t.value))return{unaryFilter:{field:zg(t.field),op:"IS_NOT_NAN"}};if(wf(t.value))return{unaryFilter:{field:zg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zg(t.field),op:Hg(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:zg(t.field),direction:Bg(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||af(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Vg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Vg(e.endAt)),n}function Mg(t){var e=xg(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Dd(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ug(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Hf(Wg(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return af(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=qg(n.startAt));var l=null;return n.endAt&&(l=qg(n.endAt)),$f(e,i,a,s,u,"F",c,l)}function Ug(t){return t?void 0!==t.unaryFilter?[Qg(t)]:void 0!==t.fieldFilter?[Kg(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Ug(t)}).reduce(function(t,e){return t.concat(e)}):Nd():[]}function Vg(t){return{before:t.before,values:t.position}}function qg(t){return new qf(t.values||[],!!t.before)}function Bg(t){return yg[t]}function Hg(t){return vg[t]}function zg(t){return{fieldPath:t.canonicalString()}}function Wg(t){return Zd.fromServerFormat(t.fieldPath)}function Kg(t){return Rf.create(Wg(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Nd()}}(t.fieldFilter.op),t.fieldFilter.value)}function Qg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Wg(t.unaryFilter.field);return Rf.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Wg(t.unaryFilter.field);return Rf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Wg(t.unaryFilter.field);return Rf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Wg(t.unaryFilter.field);return Rf.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Nd()}}function $g(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Gg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Zg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Jg(e)),e=Yg(t.get(n),e);return Jg(e)}function Yg(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Jg(t){return t+"\x01\x01"}function Xg(t){var e=t.length;if(Dd(e>=2),2===e)return Dd("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),$d.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Nd(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Nd()}o=s+2}return new $d(r)}var tm=function(t,e){this.seconds=t,this.nanoseconds=e},em=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};em.store="owner",em.key="owner";var nm=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};nm.store="mutationQueues",nm.keyPath="userId";var rm=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};rm.store="mutations",rm.keyPath="batchId",rm.userMutationsIndex="userMutationsIndex",rm.userMutationsKeyPath=["userId","batchId"];var im=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Zg(e)]},t.key=function(t,e,n){return[t,Zg(e),n]},t}();im.store="documentMutations",im.PLACEHOLDER=new im;var om=function(t,e){this.path=t,this.readTime=e},sm=function(t,e){this.path=t,this.version=e},am=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};am.store="remoteDocuments",am.readTimeIndex="readTimeIndex",am.readTimeIndexPath="readTime",am.collectionReadTimeIndex="collectionReadTimeIndex",am.collectionReadTimeIndexPath=["parentPath","readTime"];var um=function(t){this.byteSize=t};um.store="remoteDocumentGlobal",um.key="remoteDocumentGlobalKey";var cm=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};cm.store="targets",cm.keyPath="targetId",cm.queryTargetsIndexName="queryTargetsIndex",cm.queryTargetsKeyPath=["canonicalId","targetId"];var lm=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};lm.store="targetDocuments",lm.keyPath=["targetId","path"],lm.documentTargetsIndex="documentTargetsIndex",lm.documentTargetsKeyPath=["path","targetId"];var hm=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};hm.key="targetGlobalKey",hm.store="targetGlobal";var dm=function(t,e){this.collectionId=t,this.parent=e};dm.store="collectionParents",dm.keyPath=["collectionId","parent"];var fm=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};fm.store="clientMetadata",fm.keyPath="clientId";var pm=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};pm.store="bundles",pm.keyPath="bundleId";var gm=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};gm.store="namedQueries",gm.keyPath="name";var mm=Object(Ed.h)(Object(Ed.h)([],Object(Ed.h)(Object(Ed.h)([],Object(Ed.h)(Object(Ed.h)([],Object(Ed.h)(Object(Ed.h)([],[nm.store,rm.store,im.store,am.store,cm.store,em.store,hm.store,lm.store]),[fm.store])),[um.store])),[dm.store])),[pm.store,gm.store]),ym="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vm=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),bm=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},_m=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Nd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),wm=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new bm,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Em(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=xm(e.target.error);n.ft.reject(new Em(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Em(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ad("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Tm(e)},t}(),Cm=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(wu.p)())&&jd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ad("SimpleDb","Removing database:",t),km(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(wu.p)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Ad("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Em(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new kd(Td.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Em(t,n))},i.onupgradeneeded=function(t){Ad("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Ad("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Ed.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Ed.e)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Ed.e)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=wm.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),_m.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Ad("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Om=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return km(this.Pt.delete())},t}(),Em=function(t){function e(e,n){var r=this;return(r=t.call(this,Td.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Ed.d)(e,t),e}(kd);function Sm(t){return"IndexedDbTransactionError"===t.name}var Tm=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ad("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ad("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),km(n)},t.prototype.add=function(t){return Ad("SimpleDb","ADD",this.store.name,t,t),km(this.store.add(t))},t.prototype.get=function(t){var e=this;return km(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Ad("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Ad("SimpleDb","DELETE",this.store.name,t),km(this.store.delete(t))},t.prototype.count=function(){return Ad("SimpleDb","COUNT",this.store.name),km(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Ad("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new _m(function(n,r){e.onerror=function(t){var e=xm(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new _m(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Om(i),s=e(i.primaryKey,i.value,o);if(s instanceof _m){var a=s.catch(function(t){return o.done(),_m.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return _m.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function km(t){return new _m(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=xm(t.target.error);n(e)}})}var Im=!1;function xm(t){var e=Cm._t(Object(wu.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new kd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Im||(Im=!0,setTimeout(function(){throw r},0)),r}}return t}var Am=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Ed.d)(e,t),e}(vm);function jm(t,e){var n=Fd(t);return Cm.It(n.Mt,e)}var Rm=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ap(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&jp(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&jp(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Hd.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},og())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Vd(this.mutations,t.mutations,function(t,e){return Pp(t,e)})&&Vd(this.baseMutations,t.baseMutations,function(t,e){return Pp(t,e)})},t}(),Pm=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Dd(e.mutations.length===r.length);for(var i=rg(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Nm=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Hd.min()),void 0===o&&(o=Hd.min()),void 0===s&&(s=Jd.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Dm=function(t){this.Lt=t};function Fm(t,e){if(e.document)return Pg(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=lf.fromSegments(e.noDocument.path),r=qm(e.noDocument.readTime),i=Tf.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=lf.fromSegments(e.unknownDocument.path);return r=qm(e.unknownDocument.version),Tf.newUnknownDocument(o,r)}return Nd()}function Lm(t,e,n){var r=Mm(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Tg(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:_g(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new am(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Vm(e.version);return s=e.hasCommittedMutations,new am(null,new om(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Vm(e.version);return new am(new sm(c,l),null,null,!0,r,i)}return Nd()}function Mm(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Um(t){var e=new Bd(t[0],t[1]);return Hd.fromTimestamp(e)}function Vm(t){var e=t.toTimestamp();return new tm(e.seconds,e.nanoseconds)}function qm(t){var e=new Bd(t.seconds,t.nanoseconds);return Hd.fromTimestamp(e)}function Bm(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Dg(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Dg(t.Lt,e)}),o=Bd.fromMillis(e.localWriteTimeMs);return new Rm(e.batchId,o,n,i)}function Hm(t){var e,n,r=qm(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?qm(t.lastLimboFreeSnapshotVersion):Hd.min();return void 0!==t.query.documents?(Dd(1===(n=t.query).documents.length),e=np(Gf(xg(n.documents[0])))):e=function(t){return np(Mg(t))}(t.query),new Nm(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Jd.fromBase64String(t.resumeToken))}function zm(t,e){var n,r=Vm(e.snapshotVersion),i=Vm(e.lastLimboFreeSnapshotVersion);n=jf(e.target)?Fg(t.Lt,e.target):Lg(t.Lt,e.target);var o=e.resumeToken.toBase64();return new cm(e.targetId,xf(e.target),r,o,e.sequenceNumber,i,n)}function Wm(t){var e=Mg({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?rp(e,e.limit,"L"):e}var Km=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Qm(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:qm(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Qm(t).put({bundleId:(n=e).id,createTime:Vm(Og(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return $m(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Wm(e.bundledQuery),readTime:qm(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return $m(t).put(function(t){return{name:t.name,readTime:Vm(Og(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Qm(t){return jm(t,pm.store)}function $m(t){return jm(t,gm.store)}var Gm=function(){function t(){this.Bt=new Zm}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),_m.resolve()},t.prototype.getCollectionParents=function(t,e){return _m.resolve(this.Bt.getEntries(e))},t}(),Zm=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Zp($d.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Zp($d.comparator)).toArray()},t}(),Ym=function(){function t(){this.qt=new Zm}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Zg(i)};return Jm(t).put(o)}return _m.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[qd(e),""],!1,!0);return Jm(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Xg(o.parent))}return n})},t}();function Jm(t){return jm(t,dm.store)}var Xm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ty=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ey(t,e,n){var r=t.store(rm.store),i=t.store(im.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Dd(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=im.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return _m.waitFor(o).next(function(){return c})}function ny(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Nd();e=t.noDocument}return JSON.stringify(e).length}ty.DEFAULT_COLLECTION_PERCENTILE=10,ty.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ty.DEFAULT=new ty(41943040,ty.DEFAULT_COLLECTION_PERCENTILE,ty.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ty.DISABLED=new ty(-1,0,0);var ry=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Dd(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oy(t).Ot({index:rm.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=sy(t),s=oy(t);return s.add({}).next(function(a){Dd("number"==typeof a);for(var u=new Rm(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Ng(t.Lt,e)}),i=n.mutations.map(function(e){return Ng(t.Lt,e)});return new rm(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Zp(function(t,e){return Ud(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=im.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,im.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),_m.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return oy(t).get(e).next(function(t){return t?(Dd(t.userId===n.userId),Bm(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?_m.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return oy(t).Ot({index:rm.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Dd(e.batchId>=r),o=Bm(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return oy(t).Ot({index:rm.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oy(t).Nt(rm.userMutationsIndex,n).next(function(t){return t.map(function(t){return Bm(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=im.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return sy(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=Xg(r[1]);if(a===n.userId&&e.path.isEqual(c))return oy(t).get(u).next(function(t){if(!t)throw Nd();Dd(t.userId===n.userId),o.push(Bm(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Zp(Ud),i=[];return e.forEach(function(e){var o=im.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=sy(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=Xg(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),_m.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=im.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Zp(Ud);return sy(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=Xg(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(oy(t).get(e).next(function(t){if(null===t)throw Nd();Dd(t.userId===n.userId),r.push(Bm(n.R,t))}))}),_m.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return ey(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),_m.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return _m.resolve();var r=IDBKeyRange.lowerBound(im.prefixForUser(e.userId)),i=[];return sy(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=Xg(t[1]);i.push(o)}else r.done()}).next(function(){Dd(0===i.length)})})},t.prototype.containsKey=function(t,e){return iy(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ay(t).get(this.userId).next(function(t){return t||new nm(e.userId,-1,"")})},t}();function iy(t,e,n){var r=im.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return sy(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function oy(t){return jm(t,rm.store)}function sy(t){return jm(t,im.store)}function ay(t){return jm(t,nm.store)}var uy=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),cy=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new uy(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Hd.fromTimestamp(new Bd(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ly(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Dd(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ly(t).Ot(function(s,a){var u=Hm(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return _m.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return ly(t).Ot(function(t,n){var r=Hm(n);e(r)})},t.prototype.Xt=function(t){return hy(t).get(hm.key).next(function(t){return Dd(null!==t),t})},t.prototype.Zt=function(t,e){return hy(t).put(hm.key,e)},t.prototype.te=function(t,e){return ly(t).put(zm(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=xf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ly(t).Ot({range:r,index:cm.queryTargetsIndexName},function(t,n,r){var o=Hm(n);Af(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=dy(t);return e.forEach(function(e){var s=Zg(e.path);i.push(o.put(new lm(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),_m.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=dy(t);return _m.forEach(e,function(e){var o=Zg(e.path);return _m.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=dy(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=dy(t),i=og();return r.Ot({range:n,kt:!0},function(t,e,n){var r=Xg(t[1]),o=new lf(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Zg(e.path),r=IDBKeyRange.bound([n],[qd(n)],!1,!0),i=0;return dy(t).Ot({index:lm.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return ly(t).get(e).next(function(t){return t?Hm(t):null})},t}();function ly(t){return jm(t,cm.store)}function hy(t){return jm(t,hm.store)}function dy(t){return jm(t,lm.store)}function fy(t){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(e){if(t.code!==Td.FAILED_PRECONDITION||t.message!==ym)throw t;return Ad("LocalStore","Unexpectedly lost primary lease"),[2]})})}function py(t,e){var n=t[1],r=e[1],i=Ud(t[0],e[0]);return 0===i?Ud(n,r):i}var gy=function(){function t(t){this.ne=t,this.buffer=new Zp(py),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();py(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),my=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ad("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Ed.b)(e,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Sm(e=n.sent())?(Ad("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,fy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),yy=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return _m.resolve(Sd.o);var r=new gy(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ad("LruGarbageCollector","Garbage collection skipped; disabled"),_m.resolve(Xm)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Ad("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Xm):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ad("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),xd()<=Cu.a.DEBUG&&Ad("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),_m.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),vy=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new yy(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return by(t,n)},t.prototype.removeReference=function(t,e,n){return by(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return by(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return ay(t).$t(function(r){return iy(t,r,e).next(function(t){return t&&(n=!0),_m.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),dy(t).delete([0,Zg(s.path)])})});i.push(u)}}).next(function(){return _m.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return by(t,e)},t.prototype.we=function(t,e){var n,r=dy(t),i=Sd.o;return r.Ot({index:lm.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Sd.o&&e(new lf(Xg(n)),i),i=s,n=o):i=Sd.o}).next(function(){i!==Sd.o&&e(new lf(Xg(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function by(t,e){return dy(t).put(function(t,e){return new lm(0,Zg(t.path),e)}(e,t.currentSequenceNumber))}var _y=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Wd(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Kd(this.inner)},t}(),wy=function(){function t(){this.changes=new _y(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Hd.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Tf.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?_m.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Cy=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Sy(t).put(Ty(e),n)},t.prototype.removeEntry=function(t,e){var n=Sy(t),r=Ty(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Sy(t).get(Ty(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Sy(t).get(Ty(e)).next(function(t){return{document:n.ye(e,t),size:ny(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Xp();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Xp(),i=new Qp(lf.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,ny(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return _m.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Sy(t).Ot({range:r},function(t,e,r){for(var s=lf.fromSegments(t);o&&lf.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Xp(),o=e.path.length+1,s={};if(n.isEqual(Hd.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Mm(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=am.collectionReadTimeIndex}return Sy(t).Ot(s,function(t,n,s){if(t.length===o){var a=Fm(r.R,n);e.path.isPrefixOf(a.key.path)?ap(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Oy(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Ey(t).get(um.key).next(function(t){return Dd(!!t),t})},t.prototype.me=function(t,e){return Ey(t).put(um.key,e)},t.prototype.ye=function(t,e){if(e){var n=Fm(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Hd.min()))return n}return Tf.newInvalidDocument(t)},t}(),Oy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new _y(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Ed.d)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Zp(function(t,e){return Ud(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Lm(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=ny(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Lm(e.Ie.R,Tf.newNoDocument(o,Hd.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),_m.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(wy);function Ey(t){return jm(t,um.store)}function Sy(t){return jm(t,am.store)}function Ty(t){return t.path.toArray()}var ky=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Dd(n<r&&n>=0&&r<=11);var o=new wm("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(em.store)}(t),function(t){t.createObjectStore(nm.store,{keyPath:nm.keyPath}),t.createObjectStore(rm.store,{keyPath:rm.keyPath,autoIncrement:!0}).createIndex(rm.userMutationsIndex,rm.userMutationsKeyPath,{unique:!0}),t.createObjectStore(im.store)}(t),Iy(t),function(t){t.createObjectStore(am.store)}(t));var s=_m.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(lm.store),t.deleteObjectStore(cm.store),t.deleteObjectStore(hm.store)}(t),Iy(t)),s=s.next(function(){return function(t){var e=t.store(hm.store),n=new hm(0,0,Hd.min().toTimestamp(),0);return e.put(hm.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(rm.store).Nt().next(function(n){t.deleteObjectStore(rm.store),t.createObjectStore(rm.store,{keyPath:rm.keyPath,autoIncrement:!0}).createIndex(rm.userMutationsIndex,rm.userMutationsKeyPath,{unique:!0});var r=e.store(rm.store),i=n.map(function(t){return r.put(t)});return _m.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(fm.store,{keyPath:fm.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(um.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(am.store);e.createIndex(am.readTimeIndex,am.readTimeIndexPath,{unique:!1}),e.createIndex(am.collectionReadTimeIndex,am.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(pm.store,{keyPath:pm.keyPath})}(t),function(t){t.createObjectStore(gm.store,{keyPath:gm.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(am.store).Ot(function(t,n){e+=ny(n)}).next(function(){var n=new um(e);return t.store(um.store).put(um.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(nm.store),r=t.store(rm.store);return n.Nt().next(function(n){return _m.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(rm.userMutationsIndex,i).next(function(r){return _m.forEach(r,function(r){Dd(r.userId===n.userId);var i=Bm(e.R,r);return ey(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(lm.store),n=t.store(am.store);return t.store(hm.store).get(hm.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new $d(n),s=function(t){return[0,Zg(t)]}(o);r.push(e.get(s).next(function(n){return n?_m.resolve():function(n){return e.put(new lm(0,Zg(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return _m.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(dm.store,{keyPath:dm.keyPath});var n=e.store(dm.store),r=new Zm,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Zg(i)})}};return e.store(am.store).Ot({kt:!0},function(t,e){var n=new $d(t);return i(n.popLast())}).next(function(){return e.store(im.store).Ot({kt:!0},function(t,e){var n=Xg(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(cm.store);return n.Ot(function(t,r){var i=Hm(r),o=zm(e.R,i);return n.put(o)})},t}();function Iy(t){t.createObjectStore(lm.store,{keyPath:lm.keyPath}).createIndex(lm.documentTargetsIndex,lm.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(cm.store,{keyPath:cm.keyPath}).createIndex(cm.queryTargetsIndexName,cm.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(hm.store)}var xy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ay=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new kd(Td.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vy(this,i),this.Le=n+"main",this.R=new Dm(u),this.Be=new Cm(this.Le,11,new ky(this.R)),this.qe=new cy(this.referenceDelegate,this.R),this.Ut=new Ym,this.Ue=function(t,e){return new Cy(t,e)}(this.R,this.Ut),this.Qe=new Km,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&jd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new kd(Td.FAILED_PRECONDITION,xy);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Sd(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Ed.b)(e,void 0,void 0,function(){return Object(Ed.e)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Ed.b)(e,void 0,void 0,function(){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Ed.b)(e,void 0,void 0,function(){return Object(Ed.e)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Ry(e).put(new fm(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Sm(e))return Ad("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ad("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return jy(t).get(em.key).next(function(t){return _m.resolve(e.tn(t))})},t.prototype.en=function(t){return Ry(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=jm(t,fm.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return _m.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?_m.resolve(!0):jy(t).get(em.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new kd(Td.FAILED_PRECONDITION,xy);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ry(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Ad("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t=this;return Object(Ed.e)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[em.store,fm.store],function(e){var n=new Am(e,Sd.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Ry(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ry.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Ad("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",mm,function(o){return r=new Am(o,i.Ne?i.Ne.next():Sd.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw jd("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new kd(Td.FAILED_PRECONDITION,ym);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return jy(t).get(em.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new kd(Td.FAILED_PRECONDITION,xy)})},t.prototype.Ze=function(t){var e=new em(this.clientId,this.allowTabSynchronization,Date.now());return jy(t).put(em.key,e)},t.yt=function(){return Cm.yt()},t.prototype.Xe=function(t){var e=this,n=jy(t);return n.get(em.key).next(function(t){return e.tn(t)?(Ad("IndexedDbPersistence","Releasing primary lease."),n.delete(em.key)):_m.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(jd("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Ad("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return jd("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){jd("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function jy(t){return jm(t,em.store)}function Ry(t){return jm(t,fm.store)}function Py(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Ny=function(t,e){this.progress=t,this.wn=e},Dy=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return lf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):tp(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new lf(e)).next(function(t){var e=eg();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=eg();return this.Ut.getCollectionParents(t,i).next(function(s){return _m.forEach(s,function(s){var a=function(t,e){return new Qf(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Tf.newInvalidDocument(c),r=r.insert(c,l)),jp(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){ap(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=og(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Fp&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Fy=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=og(),i=og(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ly=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Hd.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Zf(e)||Yf(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(xd()<=Cu.a.DEBUG&&Ad("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),sp(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Zp(up(t));return e.forEach(function(e,r){ap(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return xd()<=Cu.a.DEBUG&&Ad("QueryEngine","Using full collection scan to execute query:",sp(e)),this.Sn.getDocumentsMatchingQuery(t,e,Hd.min())},t}(),My=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Qp(Ud),this.kn=new _y(function(t){return xf(t)},Af),this.On=Hd.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Dy(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Uy(t,e,n,r){return new My(t,e,n,r)}function Vy(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ed.e)(this,function(s){switch(s.label){case 0:return n=Fd(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Dy(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=og(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function qy(t,e){var n=Fd(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=_m.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Dd(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function By(t){var e=Fd(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Hy(t,e){var n=Fd(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Dd(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Xp();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(zy(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Hd.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return _m.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function zy(t,e,n,r,i){var o=og();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Xp();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Hd.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Ad("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Wy(t,e){var n=Fd(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Ky(t,e){var n=Fd(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?_m.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Nm(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Qy(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ed.e)(this,function(a){switch(a.label){case 0:r=Fd(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Sm(s=a.sent()))throw s;return Ad("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function $y(t,e,n){var r=Fd(t),i=Hd.min(),o=og();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Fd(t),i=r.kn.get(n);return void 0!==i?_m.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,np(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Hd.min(),n?o:og())}).next(function(t){return{documents:t,Bn:o}})})}function Gy(t,e){var n=Fd(t),r=Fd(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Zy(t){var e=Fd(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Fd(t),i=Xp(),o=Mm(n),s=Sy(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:am.readTimeIndex,range:a},function(t,e){var n=Fm(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Um(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function Yy(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){return[2,(e=Fd(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Sy(t),n=Hd.min();return e.Ot({index:am.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Um(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Jy(t,e,n,r){return Object(Ed.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Ed.e)(this,function(p){switch(p.label){case 0:for(i=Fd(t),o=og(),s=Xp(),a=rg(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Ky(i,function(t){return np(Gf($d.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return zy(t,d,s,Hd.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Xy(t,e,n){return void 0===n&&(n=og()),Object(Ed.b)(this,void 0,void 0,function(){var r,i;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return[4,Ky(t,np(Wm(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Fd(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Og(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Jd.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var tv=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return _m.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Og(n.createTime)}),_m.resolve()},t.prototype.getNamedQuery=function(t,e){return _m.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Wm(t.bundledQuery),readTime:Og(t.readTime)}}(e)),_m.resolve()},t}(),ev=function(){function t(){this.Wn=new Zp(nv.Gn),this.zn=new Zp(nv.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new nv(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new nv(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new lf(new $d([])),r=new nv(n,t),i=new nv(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new lf(new $d([])),n=new nv(e,t),r=new nv(e,t+1),i=og();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new nv(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),nv=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return lf.comparator(t.key,e.key)||Ud(t.ns,e.ns)},t.Hn=function(t,e){return Ud(t.ns,e.ns)||lf.comparator(t.key,e.key)},t}(),rv=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Zp(nv.Gn)}return t.prototype.checkEmpty=function(t){return _m.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Rm(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new nv(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return _m.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return _m.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return _m.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return _m.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return _m.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new nv(e,0),i=new nv(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),_m.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Zp(Ud);return e.forEach(function(t){var e=new nv(t,0),i=new nv(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),_m.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;lf.isDocumentKey(i)||(i=i.child(""));var o=new nv(new lf(i),0),s=new Zp(Ud);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),_m.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Dd(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return _m.forEach(e.mutations,function(i){var o=new nv(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new nv(e,0),r=this.rs.firstAfterOrEqual(n);return _m.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return _m.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),iv=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Qp(lf.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return _m.resolve(n?n.document.clone():Tf.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Xp();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Tf.newInvalidDocument(t))}),_m.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Xp(),i=new lf(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||ap(e,u)&&(r=r.insert(u.key,u.clone()))}return _m.resolve(r)},t.prototype.fs=function(t,e){return _m.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new ov(this)},t.prototype.getSize=function(t){return _m.resolve(this.size)},t}(),ov=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Ed.d)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),_m.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(wy),sv=function(){function t(t){this.persistence=t,this.ds=new _y(function(t){return xf(t)},Af),this.lastRemoteSnapshotVersion=Hd.min(),this.highestTargetId=0,this.ws=0,this._s=new ev,this.targetCount=0,this.ys=uy.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),_m.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return _m.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return _m.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),_m.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),_m.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new uy(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,_m.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),_m.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,_m.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),_m.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return _m.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return _m.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),_m.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),_m.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),_m.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return _m.resolve(n)},t.prototype.containsKey=function(t,e){return _m.resolve(this._s.containsKey(e))},t}(),av=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Sd(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new sv(this),this.Ut=new Gm,this.Ue=function(t,e){return new iv(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Dm(e),this.Qe=new tv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new rv(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Ad("MemoryPersistence","Starting transaction:",t);var i=new uv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return _m.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),uv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Ed.d)(e,t),e}(vm),cv=function(){function t(t){this.persistence=t,this.As=new ev,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Nd()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),_m.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),_m.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),_m.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _m.forEach(this.vs,function(r){var i=lf.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return _m.or([function(){return _m.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),lv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function hv(t,e){return"firestore_clients_"+t+"_"+e}function dv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function fv(t,e){return"firestore_targets_"+t+"_"+e}lv.UNAUTHENTICATED=new lv(null),lv.GOOGLE_CREDENTIALS=new lv("google-credentials-uid"),lv.FIRST_PARTY=new lv("first-party-uid");var pv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new kd(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(jd("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),gv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new kd(i.error.code,i.error.message)),o?new t(e,i.state,r):(jd("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ag(),s=0;i&&s<r.activeTargetIds.length;++s)i=cf(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(jd("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),yv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(jd("SharedClientState","Failed to parse online state: "+e),null)},t}(),vv=function(){function t(){this.activeTargetIds=ag()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),bv=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Qp(Ud),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=hv(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new vv),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Ed.e)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(hv(this.persistenceKey,r)))&&(o=mv.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(fv(this.persistenceKey,t));if(n){var r=gv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(fv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ad("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ad("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ad("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ad("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void jd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Ed.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Ed.e)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Sd.o;if(null!=t)try{var n=JSON.parse(t);Dd("number"==typeof n),e=n}catch(t){jd("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Sd.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new pv(this.currentUser,t,e,n),i=dv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=dv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=fv(this.persistenceKey,t),i=new gv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return mv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return pv.Vs(new lv(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return gv.Vs(r,e)},t.prototype.js=function(t){return yv.Vs(t)},t.prototype.ii=function(t){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ad("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ag();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),_v=function(){function t(){this.li=new vv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new vv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),wv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Cv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ad("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ad("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ov={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ev=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Sv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Ed.d)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Od;s.listenOnce(_d.COMPLETE,function(){try{switch(s.getLastErrorCode()){case bd.NO_ERROR:var e=s.getResponseJson();Ad("Connection","XHR received:",JSON.stringify(e)),i(e);break;case bd.TIMEOUT:Ad("Connection",'RPC "'+t+'" timed out'),o(new kd(Td.DEADLINE_EXCEEDED,"Request time out"));break;case bd.HTTP_ERROR:var n=s.getStatus();if(Ad("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Td).indexOf(e)>=0?e:Td.UNKNOWN}(r.status);o(new kd(a,r.message))}else o(new kd(Td.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new kd(Td.UNAVAILABLE,"Connection failed."));break;default:Nd()}}finally{Ad("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new pd,i=yl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(wu.w)()||Object(wu.z)()||Object(wu.t)()||Object(wu.v)()||Object(wu.A)()||Object(wu.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Ad("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Ev({Ei:function(t){c?Ad("Connection","Not sending because WebChannel is closed:",t):(u||(Ad("Connection","Opening WebChannel transport."),a.open(),u=!0),Ad("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Cd.EventType.OPEN,function(){c||Ad("Connection","WebChannel transport opened.")}),h(a,Cd.EventType.CLOSE,function(){c||(c=!0,Ad("Connection","WebChannel transport closed"),l.Vi())}),h(a,Cd.EventType.ERROR,function(t){c||(c=!0,Rd("Connection","WebChannel transport errored:",t),l.Vi(new kd(Td.UNAVAILABLE,"The operation could not be completed")))}),h(a,Cd.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Dd(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Ad("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Vp[t];if(void 0!==e)return Kp(e)}(i),s=r.message;void 0===o&&(o=Td.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new kd(o,s)),a.close()}else Ad("Connection","WebChannel received:",n),l.Si(n)}}),h(i,wd.STAT_EVENT,function(t){10===t.stat?Ad("Connection","Detected buffering proxy"):11===t.stat&&Ad("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ad("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Ad("RestConnection","Received: ",t),t},function(e){throw Rd("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ov[t]},t}());function Tv(){return"undefined"!=typeof window?window:null}function kv(){return"undefined"!=typeof document?document:null}function Iv(t){return new bg(t,!0)}var xv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Ad("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Av=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new xv(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Td.RESOURCE_EXHAUSTED?(jd(e.toString()),jd("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Td.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new kd(Td.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Ed.b)(t,void 0,void 0,function(){return Object(Ed.e)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Ad("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Ad("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),jv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Ed.d)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Nd()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Dd(void 0===e||"string"==typeof e),Jd.fromBase64String(e||"")):(Dd(void 0===e||e instanceof Uint8Array),Jd.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Td.UNKNOWN:Kp(t.code);return new kd(e,t.message||"")}(a);n=new dg(r,i,o,s||null)}else if("documentChange"in e){i=kg(t,(r=e.documentChange).document.name),o=Og(r.document.updateTime);var a=new Ef({mapValue:{fields:r.document.fields}}),u=(s=Tf.newFoundDocument(i,o,a),r.targetIds||[]);n=new lg(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=kg(t,(r=e.documentDelete).document),o=r.readTime?Og(r.readTime):Hd.min(),a=Tf.newNoDocument(i,o),n=new lg([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=kg(t,(r=e.documentRemove).document),n=new lg([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Nd();var c=e.filter;i=new zp(r=c.count||0),n=new hg(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Hd.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Hd.min():e.readTime?Og(e.readTime):Hd.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ag(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=jf(r)?{documents:Fg(t,r)}:{query:Lg(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=wg(t,e.resumeToken):e.snapshotVersion.compareTo(Hd.min())>0&&(n.readTime=_g(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nd()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ag(this.R),e.removeTarget=t,this.cr(e)},e}(Av),Rv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Ed.d)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Dd(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Dd(void 0!==e),t.map(function(t){return function(t,e){var n=Og(t.updateTime?t.updateTime:e);return n.isEqual(Hd.min())&&(n=Og(e)),new Tp(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Og(t.commitTime);return this.listener.Tr(n,e)}return Dd(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ag(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Ng(e.R,t)})};this.cr(n)},e}(Av),Pv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Ed.d)(e,t),e.prototype.br=function(){if(this.Rr)throw new kd(Td.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Td.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new kd(Td.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Td.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new kd(Td.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Nv=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(jd(e),this.Vr=!1):Ad("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Dv=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Ed.b)(o,void 0,void 0,function(){return Object(Ed.e)(this,function(t){switch(t.label){case 0:return zv(this)?(Ad("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return(e=Fd(t)).$r.add(4),[4,Lv(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Fv(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Nv(n,r)};function Fv(t){return Object(Ed.b)(this,void 0,void 0,function(){var e,n;return Object(Ed.e)(this,function(r){switch(r.label){case 0:if(!zv(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Lv(t){return Object(Ed.b)(this,void 0,void 0,function(){var e,n;return Object(Ed.e)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Mv(t,e){var n=Fd(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Hv(n)?Bv(n):ob(n).er()&&Vv(n,e))}function Uv(t,e){var n=Fd(t),r=ob(n);n.Or.delete(e),r.er()&&qv(n,e),0===n.Or.size&&(r.er()?r.ir():zv(n)&&n.Br.set("Unknown"))}function Vv(t,e){t.qr.U(e.targetId),ob(t).mr(e)}function qv(t,e){t.qr.U(e),ob(t).yr(e)}function Bv(t){t.qr=new pg({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),ob(t).start(),t.Br.Sr()}function Hv(t){return zv(t)&&!ob(t).tr()&&t.Or.size>0}function zv(t){return 0===Fd(t).$r.size}function Wv(t){t.qr=void 0}function Kv(t){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(e){return t.Or.forEach(function(e,n){Vv(t,e)}),[2]})})}function Qv(t,e){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(n){return Wv(t),Hv(t)?(t.Br.Nr(e),Bv(t)):t.Br.set("Unknown"),[2]})})}function $v(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i,o;return Object(Ed.e)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof dg&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ed.e)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ad("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Gv(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof lg?t.qr.X(e):e instanceof hg?t.qr.rt(e):t.qr.et(e),n.isEqual(Hd.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,By(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Jd.EMPTY_BYTE_STRING,n.snapshotVersion)),qv(t,e);var r=new Nm(n.target,e,1,n.sequenceNumber);Vv(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ad("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Gv(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Gv(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r=this;return Object(Ed.e)(this,function(i){switch(i.label){case 0:if(!Sm(e))throw e;return t.$r.add(1),[4,Lv(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return By(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Ed.b)(r,void 0,void 0,function(){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return Ad("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Fv(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Zv(t,e){return e().catch(function(n){return Gv(t,n,e)})}function Yv(t){return Object(Ed.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Ed.e)(this,function(s){switch(s.label){case 0:e=Fd(t),n=sb(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return zv(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Wy(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=sb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Gv(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Jv(e)&&Xv(e),[2]}})})}function Jv(t){return zv(t)&&!sb(t).tr()&&t.kr.length>0}function Xv(t){sb(t).start()}function tb(t){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(e){return sb(t).Ar(),[2]})})}function eb(t){return Object(Ed.b)(this,void 0,void 0,function(){var e,n,r;return Object(Ed.e)(this,function(i){for(e=sb(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function nb(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Pm.from(r,e,n),[4,Zv(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Yv(t)];case 2:return o.sent(),[2]}})})}function rb(t,e){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(n){switch(n.label){case 0:return e&&sb(t).pr?[4,function(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return Wp(r=e.code)&&r!==Td.ABORTED?(n=t.kr.shift(),sb(t).sr(),[4,Zv(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Yv(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Jv(t)&&Xv(t),[2]}})})}function ib(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return n=Fd(t),e?(n.$r.delete(2),[4,Fv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Lv(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function ob(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Fd(t);return r.br(),new jv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Kv.bind(null,t),Ri:Qv.bind(null,t),_r:$v.bind(null,t)}),t.Mr.push(function(n){return Object(Ed.b)(e,void 0,void 0,function(){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Hv(t)?Bv(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Wv(t),e.label=3;case 3:return[2]}})})})),t.Ur}function sb(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Fd(t);return r.br(),new Rv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:tb.bind(null,t),Ri:rb.bind(null,t),Ir:eb.bind(null,t),Tr:nb.bind(null,t)}),t.Mr.push(function(n){return Object(Ed.b)(e,void 0,void 0,function(){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Yv(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Ad("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var ab=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kd(Td.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ub(t,e){if(jd("AsyncQueue",e+": "+t),Sm(t))return new kd(Td.UNAVAILABLE,e+": "+t);throw t}var cb=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||lf.comparator(e.key,n.key)}:function(t,e){return lf.comparator(t.key,e.key)},this.keyedMap=eg(),this.sortedSet=new Qp(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),lb=function(){function t(){this.Kr=new Qp(lf.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Nd():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),hb=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,cb.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ip(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),db=function(){this.Wr=void 0,this.listeners=[]},fb=function(){this.queries=new _y(function(t){return op(t)},ip),this.onlineState="Unknown",this.Gr=new Set};function pb(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Ed.e)(this,function(c){switch(c.label){case 0:if(n=Fd(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new db),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=ub(a,"Initialization of query '"+sp(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&vb(n),[2]}})})}function gb(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ed.e)(this,function(a){return n=Fd(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function mb(t,e){for(var n=Fd(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&vb(n)}function yb(t,e,n){var r=Fd(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function vb(t){t.Gr.forEach(function(t){t.next()})}var bb=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new hb(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=hb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),_b=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),wb=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return kg(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Pg(this.R,t.document,!1):Tf.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Og(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new wb(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||og()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return[4,Jy(this.localStore,new wb(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Xy(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ny(Object.assign({},this.progress),t))]}})})}}();var Cb=function(t){this.key=t},Ob=function(t){this.key=t},Eb=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=og(),this.mutatedKeys=og(),this.lo=up(t),this.fo=new cb(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new lb,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Zf(this.query)&&i.size===this.query.limit?i.last():null,c=Yf(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=ap(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Zf(this.query)||Yf(this.query))for(;s.size>this.query.limit;){var l=Zf(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nd()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new hb(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new lb,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=og(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Ob(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Cb(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=og();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return hb.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Sb=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Tb=function(t){this.key=t,this.bo=!1},kb=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new _y(function(t){return op(t)},ip),this.Vo=new Map,this.So=new Set,this.Do=new Qp(lf.comparator),this.Co=new Map,this.No=new ev,this.xo={},this.Fo=new Map,this.ko=uy.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Ib(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ed.e)(this,function(a){switch(a.label){case 0:return n=r_(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Ky(n.localStore,np(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,xb(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Mv(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function xb(t,e,n,r){return Object(Ed.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Ed.e)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Ed.b)(this,void 0,void 0,function(){var i,o,s;return Object(Ed.e)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,$y(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Bb(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,$y(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Eb(e,i.Bn),s=o._o(i.documents),a=cg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Bb(t,n,u.To),c=new Sb(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Ab(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return n=Fd(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!ip(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Qy(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Uv(n.remoteStore,r.targetId),Vb(n,r.targetId)}).catch(fy)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Vb(n,r.targetId),[4,Qy(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function jb(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ed.e)(this,function(a){switch(a.label){case 0:r=i_(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Fd(t),i=Bd.now(),o=e.reduce(function(t,e){return t.add(e.key)},og());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Rp(c,n.get(c.key));null!=l&&s.push(new Fp(c.key,l,Sf(l.toProto().mapValue),kp.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Qp(Ud)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Wb(r,i.changes)];case 3:return a.sent(),[4,Yv(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ub(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Rb(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r;return Object(Ed.e)(this,function(i){switch(i.label){case 0:n=Fd(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Hy(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Dd(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Dd(r.bo):t.removedDocuments.size>0&&(Dd(r.bo),r.bo=!1))}),[4,Wb(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,fy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Pb(t,e,n){var r=Fd(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Fd(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&vb(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Nb(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Ed.e)(this,function(c){switch(c.label){case 0:return(r=Fd(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Qp(lf.comparator)).insert(o,Tf.newNoDocument(o,Hd.min())),a=og().add(o),u=new ug(Hd.min(),new Map,new Zp(Ud),s,a),[4,Rb(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),zb(r),[3,4];case 2:return[4,Qy(r.localStore,e,!1).then(function(){return Vb(r,e,n)}).catch(fy)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Db(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ed.e)(this,function(o){switch(o.label){case 0:n=Fd(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,qy(n.localStore,e)];case 2:return i=o.sent(),Ub(n,r,null),Mb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Wb(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,fy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Fb(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i;return Object(Ed.e)(this,function(o){switch(o.label){case 0:r=Fd(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Fd(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Dd(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Ub(r,e,n),Mb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Wb(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,fy(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Lb(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ed.e)(this,function(a){switch(a.label){case 0:zv((n=Fd(t)).remoteStore)||Ad("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Fd(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=ub(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Mb(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Ub(t,e,n){var r=Fd(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Vb(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||qb(t,e)})}function qb(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Uv(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),zb(t))}function Bb(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Cb?(t.No.addReference(o.key,e),Hb(t,o)):o instanceof Ob?(Ad("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||qb(t,o.key)):Nd()}}function Hb(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ad("SyncEngine","New document in limbo: "+n),t.So.add(r),zb(t))}function zb(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new lf($d.fromString(e)),r=t.ko.next();t.Co.set(r,new Tb(n)),t.Do=t.Do.insert(n,r),Mv(t.remoteStore,new Nm(np(Gf(n.path)),r,2,Sd.o))}}function Wb(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ed.e)(this,function(a){switch(a.label){case 0:return r=Fd(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Fy.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Ed.e)(this,function(l){switch(l.label){case 0:n=Fd(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return _m.forEach(e,function(e){return _m.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return _m.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Sm(r=l.sent()))throw r;return Ad("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Kb(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return(n=Fd(t)).currentUser.isEqual(e)?[3,3]:(Ad("SyncEngine","User change. New user:",e.toKey()),[4,Vy(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new kd(Td.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Wb(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Qb(t,e){var n=Fd(t),r=n.Co.get(e);if(r&&r.bo)return og().add(r.key);var i=og(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function $b(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return[4,$y((n=Fd(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Bb(n,e.targetId,i.To),i)]}})})}function Gb(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){return[2,Zy((e=Fd(t)).localStore).then(function(t){return Wb(e,t)})]})})}function Zb(t,e,n,r){return Object(Ed.b)(this,void 0,void 0,function(){var i,o;return Object(Ed.e)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Fd(t),r=Fd(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):_m.resolve(null)})})}((i=Fd(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Yv(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ub(i,e,r||null),Mb(i,e),function(t,e){Fd(Fd(t)._n).Gt(e)}(i.localStore,e)):Nd(),s.label=4;case 4:return[4,Wb(i,o)];case 5:return s.sent(),[3,7];case 6:Ad("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Yb(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Ed.e)(this,function(c){switch(c.label){case 0:return r_(n=Fd(t)),i_(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Jb(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,ib(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Mv(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Vb(n,e),Qy(n.localStore,e,!0)}),Uv(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Jb(n,a)];case 5:return c.sent(),function(t){var e=Fd(t);e.Co.forEach(function(t,n){Uv(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Qp(lf.comparator)}(n),n.Oo=!1,[4,ib(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Jb(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Ed.e)(this,function(g){switch(g.label){case 0:n=Fd(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Ky(n.localStore,np(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,$b(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Gy(n.localStore,a)];case 8:return p=g.sent(),[4,Ky(n.localStore,p)];case 9:return u=g.sent(),[4,xb(n,Xb(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Xb(t){return $f(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function t_(t){var e=Fd(t);return Fd(Fd(e.localStore).persistence).fn()}function e_(t,e,n,r){return Object(Ed.b)(this,void 0,void 0,function(){var i,o,s;return Object(Ed.e)(this,function(a){switch(a.label){case 0:return(i=Fd(t)).Oo?(Ad("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Zy(i.localStore)];case 3:return o=a.sent(),s=ug.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Wb(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Qy(i.localStore,e,!0)];case 6:return a.sent(),Vb(i,e,r),[3,8];case 7:Nd(),a.label=8;case 8:return[2]}})})}function n_(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Ed.e)(this,function(d){switch(d.label){case 0:if(!(r=r_(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Ad("SyncEngine","Adding an already active target "+s),[3,5]):[4,Gy(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,Ky(r.localStore,a)];case 3:return u=d.sent(),[4,xb(r,Xb(a),u.targetId,!1)];case 4:d.sent(),Mv(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Qy(r.localStore,t,!1).then(function(){Uv(r.remoteStore,t),Vb(r,t)}).catch(fy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function r_(t){var e=Fd(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nb.bind(null,e),e.vo._r=mb.bind(null,e.eventManager),e.vo.Mo=yb.bind(null,e.eventManager),e}function i_(t){var e=Fd(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Db.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fb.bind(null,e),e}var o_=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return this.R=Iv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Uy(this.persistence,new Ly,t.initialUser,this.R)},t.prototype.qo=function(t){return new av(cv.bs,this.R)},t.prototype.Bo=function(t){return new _v},t.prototype.terminate=function(){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),s_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Ed.d)(e,t),e.prototype.initialize=function(e){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Yy(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,i_(this.Ko.syncEngine)];case 4:return n.sent(),[4,Yv(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Uy(this.persistence,new Ly,t.initialUser,this.R)},e.prototype.Uo=function(t){return new my(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Py(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ty.withCacheSize(this.cacheSizeBytes):ty.DEFAULT;return new Ay(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Tv(),kv(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new _v},e}(o_),a_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Ed.d)(e,t),e.prototype.initialize=function(e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r=this;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof bv?(this.sharedClientState.syncEngine={ui:Zb.bind(null,n),ai:e_.bind(null,n),hi:n_.bind(null,n),fn:t_.bind(null,n),ci:Gb.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Ed.b)(r,void 0,void 0,function(){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return[4,Yb(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Tv();if(!bv.yt(e))throw new kd(Td.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Py(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new bv(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(s_),u_=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n=this;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Pb(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Kb.bind(null,this.syncEngine),[4,ib(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new fb},t.prototype.createDatastore=function(t){var e=Iv(t.databaseInfo.databaseId),n=new Sv(t.databaseInfo);return function(t,e,n){return new Pv(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Pb(s.syncEngine,t,0)},o=Cv.yt()?new Cv:new wv,new Dv(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new kb(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return e=Fd(t),Ad("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Lv(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),c_=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),l_=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new bm,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new _b(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t,e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t,e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ed.e)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new kd(Td.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Ed.e)(this,function(u){switch(u.label){case 0:return n=Fd(t),r=Ag(n.R)+"/documents",i={documents:e.map(function(t){return Tg(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Dd(!!e.found);var n=kg(t,e.found.name),r=Og(e.found.updateTime),i=new Ef({mapValue:{fields:e.found.fields}});return Tf.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Dd(!!e.missing),Dd(!!e.readTime);var n=kg(t,e.missing),r=Og(e.readTime);return Tf.newNoDocument(n,r)}(t,e):Nd()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Dd(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Bp(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t,e=this;return Object(Ed.e)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=lf.fromPath(n);e.mutations.push(new Hp(r,e.precondition(r)))}),[4,function(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return n=Fd(t),r=Ag(n.R)+"/documents",i={writes:e.map(function(t){return Ng(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Nd();e=Hd.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new kd(Td.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?kp.updateTime(e):kp.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Hd.min()))throw new kd(Td.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kp.updateTime(e)}return kp.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),h_=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new xv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Ed.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Ed.e)(this,function(r){return t=new l_(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!af(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Wp(e)}return!1},t}(),d_=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=lv.UNAUTHENTICATED,this.clientId=Md.u(),this.credentialListener=function(){},this.receivedInitialUser=new bm,this.credentials.setChangeListener(function(t){Ad("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new kd(Td.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new bm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Ed.b)(t,void 0,void 0,function(){var t,n;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ub(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function f_(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ad("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Ed.b)(i,void 0,void 0,function(){return Object(Ed.e)(this,function(t){switch(t.label){case 0:return[4,Vy(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function p_(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,g_(t)];case 1:return n=i.sent(),Ad("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return(n=Fd(t)).asyncQueue.verifyOperationInProgress(),Ad("RemoteStore","RemoteStore received new credentials"),r=zv(n),n.$r.add(3),[4,Lv(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Fv(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function g_(t){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ad("FirestoreClient","Using default OfflineComponentProvider"),[4,f_(t,new o_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function m_(t){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ad("FirestoreClient","Using default OnlineComponentProvider"),[4,p_(t,new u_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function y_(t){return g_(t).then(function(t){return t.persistence})}function v_(t){return g_(t).then(function(t){return t.localStore})}function b_(t){return m_(t).then(function(t){return t.remoteStore})}function __(t){return m_(t).then(function(t){return t.syncEngine})}function w_(t){return Object(Ed.b)(this,void 0,void 0,function(){var e,n;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return[4,m_(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Ib.bind(null,e.syncEngine),n.onUnlisten=Ab.bind(null,e.syncEngine),n)]}})})}function C_(t,e,n){var r=this;void 0===n&&(n={});var i=new bm;return t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(r,void 0,void 0,function(){var r;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new c_({next:function(o){e.enqueueAndForget(function(){return gb(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new kd(Td.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new kd(Td.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new bb(Gf(n.path),o,{includeMetadataChanges:!0,so:!0});return pb(t,s)},[4,w_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function O_(t,e,n){var r=this;void 0===n&&(n={});var i=new bm;return t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(r,void 0,void 0,function(){var r;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new c_({next:function(n){e.enqueueAndForget(function(){return gb(t,s)}),n.fromCache&&"server"===r.source?i.reject(new kd(Td.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new bb(n,o,{includeMetadataChanges:!0,so:!0});return pb(t,s)},[4,w_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var E_=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},S_=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),T_=new Map,k_=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},I_=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(lv.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),x_=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),A_=function(){function t(t){var e=this;this.oc=null,this.currentUser=lv.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Ad("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Dd("string"==typeof n.accessToken),new k_(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Dd(null===t||"string"==typeof t),new lv(t)},t}(),j_=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=lv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),R_=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new j_(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(lv.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function P_(t,e,n){if(!n)throw new kd(Td.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function N_(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new kd(Td.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function D_(t,e,n,r){if(!0===e&&!0===r)throw new kd(Td.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function F_(t){if(!lf.isDocumentKey(t))throw new kd(Td.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function L_(t){if(lf.isDocumentKey(t))throw new kd(Td.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function M_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Nd()}function U_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new kd(Td.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=M_(t);throw new kd(Td.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function V_(t,e){if(e<=0)throw new kd(Td.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var q_=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new kd(Td.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kd(Td.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,D_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),B_=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q_({}),this._settingsFrozen=!1,t instanceof S_?(this._databaseId=t,this._credentials=new I_):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new kd(Td.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new S_(t.options.projectId)}(t),this._credentials=new A_(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new kd(Td.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new kd(Td.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q_(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new I_;switch(t.type){case"gapi":var e=t.client;return Dd(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new R_(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new kd(Td.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=T_.get(this))&&(Ad("ComponentProvider","Removing Datastore"),T_.delete(this),t.terminate()),Promise.resolve();var t},t}(),H_=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new W_(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),z_=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),W_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Gf(r))||this)._path=r,i.type="collection",i}return Object(Ed.d)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new H_(this.firestore,null,new lf(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(z_);function K_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(wu.o)(t),P_("collection","path",e),t instanceof B_)return L_(n=$d.fromString.apply($d,Object(Ed.h)([e],r))),new W_(t,null,n);if(!(t instanceof H_||t instanceof W_))throw new kd(Td.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return L_(n=$d.fromString.apply($d,Object(Ed.h)([t.path],r)).child($d.fromString(e))),new W_(t.firestore,null,n)}function Q_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(wu.o)(t),1===arguments.length&&(e=Md.u()),P_("doc","path",e),t instanceof B_)return F_(n=$d.fromString.apply($d,Object(Ed.h)([e],r))),new H_(t,null,new lf(n));if(!(t instanceof H_||t instanceof W_))throw new kd(Td.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return F_(n=t._path.child($d.fromString.apply($d,Object(Ed.h)([e],r)))),new H_(t.firestore,t instanceof W_?t.converter:null,new lf(n))}function $_(t,e){return t=Object(wu.o)(t),e=Object(wu.o)(e),(t instanceof H_||t instanceof W_)&&(e instanceof H_||e instanceof W_)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function G_(t,e){return t=Object(wu.o)(t),e=Object(wu.o)(e),t instanceof z_&&e instanceof z_&&t.firestore===e.firestore&&ip(t._query,e._query)&&t.converter===e.converter}var Z_=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new xv(this,"async_queue_retry"),this.Ec=function(){var e=kv();e&&Ad("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=kv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=kv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t,e=this;return Object(Ed.e)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Sm(t=n.sent()))throw t;return Ad("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,jd("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=ab.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Nd()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t;return Object(Ed.e)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Y_(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new bm,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var J_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Z_,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Ed.d)(e,t),e.prototype._terminate=function(){return this._firestoreClient||tw(this),this._firestoreClient.terminate()},e}(B_);function X_(t){return t._firestoreClient||tw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tw(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new E_(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new d_(t._credentials,t._queue,r)}function ew(t,e,n){var r=this,i=new bm;return t.asyncQueue.enqueue(function(){return Object(Ed.b)(r,void 0,void 0,function(){var r;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,f_(t,n)];case 1:return o.sent(),[4,p_(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Td.FAILED_PRECONDITION||t.code===Td.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function nw(t){if(t._initialized||t._terminated)throw new kd(Td.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var rw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new kd(Td.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zd(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),iw=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Jd.fromBase64String(e))}catch(e){throw new kd(Td.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Jd.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ow=function(t){this._methodName=t},sw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new kd(Td.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new kd(Td.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ud(this._lat,t._lat)||Ud(this._long,t._long)},t}(),aw=/^__.*__$/,uw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Fp(t,this.data,this.fieldMask,e,this.fieldTransforms):new Dp(t,this.data,e,this.fieldTransforms)},t}(),cw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Fp(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function lw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nd()}}var hw=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return jw(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(lw(this.Dc)&&aw.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),dw=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Iv(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new hw({Dc:t,methodName:e,Lc:n,path:Zd.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function fw(t){var e=t._freezeSettings(),n=Iv(t._databaseId);return new dw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pw(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);kw("Data must be an object, but it was:",s,r);var a,u,c=Sw(r,s);if(o.merge)a=new Yd(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Iw(e,d[h],n);if(!s.contains(f))throw new kd(Td.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Rw(l,f)||l.push(f)}a=new Yd(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new uw(new Ef(c),a,u)}var gw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ed.d)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ow);function mw(t,e,n){return new hw({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var yw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ed.d)(e,t),e.prototype._toFieldTransform=function(t){return new Sp(t.path,new yp)},e.prototype.isEqual=function(t){return t instanceof e},e}(ow),vw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Ed.d)(e,t),e.prototype._toFieldTransform=function(t){var e=mw(this,t,!0),n=this.qc.map(function(t){return Ew(t,e)}),r=new vp(n);return new Sp(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ow),bw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Ed.d)(e,t),e.prototype._toFieldTransform=function(t){var e=mw(this,t,!0),n=this.qc.map(function(t){return Ew(t,e)}),r=new _p(n);return new Sp(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ow),_w=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Ed.d)(e,t),e.prototype._toFieldTransform=function(t){var e=new Cp(t.R,dp(t.R,this.Uc));return new Sp(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ow);function ww(t,e,n,r){var i=t.Bc(1,e,n);kw("Data must be an object, but it was:",i,r);var o=[],s=Ef.empty();Wd(r,function(t,r){var a=Aw(e,t,n);r=Object(wu.o)(r);var u=i.kc(a);if(r instanceof gw)o.push(a);else{var c=Ew(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Yd(o);return new cw(s,a,i.fieldTransforms)}function Cw(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Iw(e,r,n)],u=[i];if(o.length%2!=0)throw new kd(Td.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Iw(e,o[c])),u.push(o[c+1]);for(var l=[],h=Ef.empty(),d=a.length-1;d>=0;--d)if(!Rw(l,a[d])){var f=a[d],p=u[d];p=Object(wu.o)(p);var g=s.kc(f);if(p instanceof gw)l.push(f);else{var m=Ew(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new Yd(l);return new cw(h,y,s.fieldTransforms)}function Ow(t,e,n,r){return void 0===r&&(r=!1),Ew(n,t.Bc(r?4:3,e))}function Ew(t,e){if(Tw(t=Object(wu.o)(t)))return kw("Unsupported field value:",e,t),Sw(t,e);if(t instanceof ow)return function(t,e){if(!lw(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ew(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(wu.o)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dp(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Bd.fromDate(t);return{timestampValue:_g(e.R,n)}}if(t instanceof Bd)return n=new Bd(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:_g(e.R,n)};if(t instanceof sw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof iw)return{bytesValue:wg(e.R,t._byteString)};if(t instanceof H_){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Eg(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+M_(t))}(t,e)}function Sw(t,e){var n={};return Kd(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wd(t,function(t,r){var i=Ew(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Tw(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Bd||t instanceof sw||t instanceof iw||t instanceof H_||t instanceof ow)}function kw(t,e,n){if(!Tw(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=M_(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Iw(t,e,n){if((e=Object(wu.o)(e))instanceof rw)return e._internalPath;if("string"==typeof e)return Aw(t,e);throw jw("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var xw=new RegExp("[~\\*/\\[\\]]");function Aw(t,e,n){if(e.search(xw)>=0)throw jw("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(rw.bind.apply(rw,Object(Ed.h)([void 0],e.split(".")))))._internalPath}catch(r){throw jw("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function jw(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new kd(Td.INVALID_ARGUMENT,(a+=". ")+t+u)}function Rw(t,e){return t.some(function(t){return t.isEqual(e)})}var Pw=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new H_(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Nw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Dw("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Nw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ed.d)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Pw);function Dw(t,e){return"string"==typeof e?Aw(t,e):e instanceof rw?e._internalPath:e._delegate._internalPath}var Fw=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Lw=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Ed.d)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Mw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Dw("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Pw),Mw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ed.d)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Lw),Uw=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Fw(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Mw(n._firestore,n._userDataWriter,r.key,r,new Fw(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kd(Td.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Mw(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Fw(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Mw(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Fw(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Vw(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Vw(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nd()}}function qw(t,e){return t instanceof Lw&&e instanceof Lw?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Uw&&e instanceof Uw&&t._firestore===e._firestore&&G_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Bw(t){if(Yf(t)&&0===t.explicitOrderBy.length)throw new kd(Td.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hw=function(){};function zw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Ww=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Ed.d)(e,t),e.prototype._apply=function(t){var e=fw(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new kd(Td.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Jw(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Yw(r,t,l[c]));a={arrayValue:{values:u}}}else a=Yw(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Jw(s,o),a=Ow(n,"where",s,"in"===o||"not-in"===o);var h=Rf.create(i,o,a);return function(t,e){if(e.g()){var n=Xf(t);if(null!==n&&!n.isEqual(e.field))throw new kd(Td.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Jf(t);null!==r&&Xw(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new kd(Td.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new z_(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Hw),Kw=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Ed.d)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new kd(Td.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new kd(Td.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Hf(e,n);return function(t,e){if(null===Jf(t)){var n=Xf(t);null!==n&&Xw(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new z_(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Qf(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Hw),Qw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Ed.d)(e,t),e.prototype._apply=function(t){return new z_(t.firestore,t.converter,rp(t._query,this.Gc,this.zc))},e}(Hw),$w=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Ed.d)(e,t),e.prototype._apply=function(t){var e=Zw(t,this.type,this.Hc,this.Jc);return new z_(t.firestore,t.converter,function(t,e){return new Qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Hw),Gw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Ed.d)(e,t),e.prototype._apply=function(t){var e=Zw(t,this.type,this.Hc,this.Jc);return new z_(t.firestore,t.converter,function(t,e){return new Qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Hw);function Zw(t,e,n,r){if(n[0]=Object(wu.o)(n[0]),n[0]instanceof Pw)return function(t,e,n,r,i){if(!r)throw new kd(Td.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ep(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(vf(e,r.key));else{var c=r.data.field(u.field);if(rf(c))throw new kd(Td.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new kd(Td.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new qf(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=fw(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new kd(Td.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new kd(Td.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!tp(t)&&-1!==c.indexOf("/"))throw new kd(Td.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child($d.fromString(c));if(!lf.isDocumentKey(l))throw new kd(Td.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new lf(l);a.push(vf(e,h))}else{var d=Ow(n,r,c);a.push(d)}}return new qf(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Yw(t,e,n){if("string"==typeof(n=Object(wu.o)(n))){if(""===n)throw new kd(Td.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!tp(e)&&-1!==n.indexOf("/"))throw new kd(Td.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child($d.fromString(n));if(!lf.isDocumentKey(r))throw new kd(Td.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return vf(t,new lf(r))}if(n instanceof H_)return vf(t,n._key);throw new kd(Td.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+M_(n)+".")}function Jw(t,e){if(!Array.isArray(t)||0===t.length)throw new kd(Td.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new kd(Td.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Xw(t,e,n){if(!n.isEqual(e))throw new kd(Td.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var tC=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),hf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ef(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(nf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Nd()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Wd(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new sw(ef(t.latitude),ef(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=of(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(sf(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=tf(t);return new Bd(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=$d.fromString(t);Dd(Gg(n));var r=new S_(n.get(1),n.get(3)),i=new lf(n.popFirst(5));return r.isEqual(e)||jd("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function eC(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var nC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ed.d)(e,t),e.prototype.convertBytes=function(t){return new iw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new H_(this.firestore,null,e)},e}(tC),rC=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=fw(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=iC(t,this._firestore),i=eC(r.converter,e,n),o=pw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,kp.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=iC(t,this._firestore);return o="string"==typeof(e=Object(wu.o)(e))||e instanceof rw?Cw(this._dataReader,"WriteBatch.update",s._key,e,n,r):ww(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,kp.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=iC(t,this._firestore);return this._mutations=this._mutations.concat(new Bp(e._key,kp.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new kd(Td.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function iC(t,e){if((t=Object(wu.o)(t)).firestore!==e)throw new kd(Td.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var oC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ed.d)(e,t),e.prototype.convertBytes=function(t){return new iw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new H_(this.firestore,null,e)},e}(tC);function sC(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=U_(t,H_);var o=U_(t.firestore,J_),s=fw(o);return uC(o,[("string"==typeof(e=Object(wu.o)(e))||e instanceof rw?Cw(s,"updateDoc",t._key,e,n,r):ww(s,"updateDoc",t._key,e)).toMutation(t._key,kp.exists(!0))])}function aC(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(wu.o)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Y_(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Y_(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof H_)c=U_(t.firestore,J_),l=Gf(t._key.path),u={next:function(e){i[a]&&i[a](cC(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=U_(t,z_);c=U_(f.firestore,J_),l=f._query;var p=new oC(c);u={next:function(t){i[a]&&i[a](new Uw(c,p,f,t))},error:i[a+1],complete:i[a+2]},Bw(t._query)}return function(t,e,n,r){var i=this,o=new c_(r),s=new bb(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(i,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return e=pb,[4,w_(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(i,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return e=gb,[4,w_(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(X_(c),l,h,u)}function uC(t,e){return function(t,e){var n=this,r=new bm;return t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(n,void 0,void 0,function(){var n;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return n=jb,[4,__(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(X_(t),e)}function cC(t,e,n){var r=n.docs.get(e._key),i=new oC(t);return new Lw(t,i,e._key,r,new Fw(n.hasPendingWrites,n.fromCache),e.converter)}var lC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Ed.d)(e,t),e.prototype.get=function(e){var n=this,r=iC(e,this._firestore),i=new oC(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Lw(n._firestore,i,r._key,t._document,new Fw(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=fw(t)}return t.prototype.get=function(t){var e=this,n=iC(t,this._firestore),r=new nC(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Nd();var i=t[0];if(i.isFoundDocument())return new Pw(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Pw(e._firestore,r,n._key,null,n.converter);throw Nd()})},t.prototype.set=function(t,e,n){var r=iC(t,this._firestore),i=eC(r.converter,e,n),o=pw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=iC(t,this._firestore);return o="string"==typeof(e=Object(wu.o)(e))||e instanceof rw?Cw(this._dataReader,"Transaction.update",s._key,e,n,r):ww(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=iC(t,this._firestore);return this._transaction.delete(e._key),this},t}());function hC(){if("undefined"==typeof Uint8Array)throw new kd(Td.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function dC(){if("undefined"==typeof atob)throw new kd(Td.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var fC=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return dC(),new t(iw.fromBase64String(e))},t.fromUint8Array=function(e){return hC(),new t(iw.fromUint8Array(e))},t.prototype.toBase64=function(){return dC(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return hC(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),pC=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){nw(t=U_(t,J_));var n=X_(t),r=t._freezeSettings(),i=new u_;return ew(n,i,new s_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){nw(t=U_(t,J_));var e=X_(t),n=t._freezeSettings(),r=new u_;return ew(e,r,new a_(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new kd(Td.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new bm;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Ed.b)(e,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Ed.b)(this,void 0,void 0,function(){return Object(Ed.e)(this,function(e){switch(e.label){case 0:return Cm.yt()?[4,Cm.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Py(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),gC=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof S_||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=U_(t,B_))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Rd("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(wu.j)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new kd(Td.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new x_(new k_(o,new lv(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Ed.b)(e,void 0,void 0,function(){var e,n;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return[4,y_(t)];case 1:return e=r.sent(),[4,b_(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Fd(t);return e.$r.delete(0),Fv(e)}(n))]}})})})}(X_(U_(this._delegate,J_)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Ed.b)(e,void 0,void 0,function(){var e,n;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return[4,y_(t)];case 1:return e=r.sent(),[4,b_(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return(e=Fd(t)).$r.add(0),[4,Lv(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(X_(U_(this._delegate,J_)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&D_("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new bm;return t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(e,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return e=Lb,[4,__(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(X_(U_(this._delegate,J_)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new c_(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(n,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return e=function(t,e){Fd(t).Gr.add(e),e.next()},[4,w_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(n,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return e=function(t,e){Fd(t).Gr.delete(e)},[4,w_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(X_(t=U_(t,J_)),Y_(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new kd(Td.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xC(this,K_(this._delegate,t))}catch(t){throw wC(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new _C(this,Q_(this._delegate,t))}catch(t){throw wC(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new TC(this,function(t,e){if(t=U_(t,B_),P_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new kd(Td.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new z_(t,null,function(t){return new Qf($d.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw wC(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new bm;return t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(n,void 0,void 0,function(){var n;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return[4,function(t){return m_(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new h_(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(X_(t),function(n){return e(new lC(t,n))})}(this._delegate,function(n){return t(new yC(e,n))})},t.prototype.batch=function(){var t=this;return X_(this._delegate),new vC(new rC(this._delegate,function(e){return uC(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new kd(Td.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new kd(Td.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),mC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ed.d)(e,t),e.prototype.convertBytes=function(t){return new fC(new iw(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return _C.Zc(e,this.firestore,null)},e}(tC),yC=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new mC(t)}return t.prototype.get=function(t){var e=this,n=AC(t);return this._delegate.get(n).then(function(t){return new EC(e._firestore,new Lw(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=AC(t);return n?(N_("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=AC(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Ed.h)([s,e,n],i)),this},t.prototype.delete=function(t){var e=AC(t);return this._delegate.delete(e),this},t}(),vC=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=AC(t);return n?(N_("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=AC(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Ed.h)([s,e,n],i)),this},t.prototype.delete=function(t){var e=AC(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),bC=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Mw(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new SC(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new mC(e),n),i.set(n,o)),o},t}();bC.eu=new WeakMap;var _C=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new mC(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new kd(Td.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new H_(n._delegate,r,new lf(e)))},t.Zc=function(e,n,r){return new t(n,new H_(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xC(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xC(this.firestore,K_(this._delegate,t))}catch(t){throw wC(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(wu.o)(t))instanceof H_&&$_(this._delegate,t)},t.prototype.set=function(t,e){e=N_("DocumentReference.set",e);try{return function(t,e,n){t=U_(t,H_);var r=U_(t.firestore,J_),i=eC(t.converter,e,n);return uC(r,[pw(fw(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,kp.none())])}(this._delegate,t,e)}catch(t){throw wC(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?sC(this._delegate,t):sC.apply(void 0,Object(Ed.h)([this._delegate,t,e],n))}catch(t){throw wC(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return uC(U_((t=this._delegate).firestore,J_),[new Bp(t._key,kp.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=CC(e),i=OC(e,function(e){return new EC(t.firestore,new Lw(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return aC(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=U_(t,H_);var e=U_(t.firestore,J_),n=X_(e),r=new oC(e);return function(t,e){var n=this,r=new bm;return t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(n,void 0,void 0,function(){var n;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i;return Object(Ed.e)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Fd(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new kd(Td.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ub(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,v_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Lw(e,r,t._key,n,new Fw(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=U_(t,H_);var e=U_(t.firestore,J_);return C_(X_(e),t._key,{source:"server"}).then(function(n){return cC(e,t,n)})}(this._delegate):function(t){t=U_(t,H_);var e=U_(t.firestore,J_);return C_(X_(e),t._key).then(function(n){return cC(e,t,n)})}(this._delegate)).then(function(t){return new EC(e.firestore,new Lw(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?bC.tu(this.firestore,e):null))},t}();function wC(t,e,n){return t.message=t.message.replace(e,n),t}function CC(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Y_(r))return r}return{}}function OC(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Y_(t[0])?t[0]:Y_(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var EC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new _C(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return qw(this._delegate,t._delegate)},t}(),SC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ed.d)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(EC),TC=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new mC(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,zw(this._delegate,function(t,e,n){var r=e,i=Dw("where",t);return new Ww(i,r,n)}(e,n,r)))}catch(e){throw wC(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,zw(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Dw("orderBy",t);return new Kw(r,n)}(e,n)))}catch(e){throw wC(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,zw(this._delegate,function(t){return V_("limit",t),new Qw("limit",t,"F")}(e)))}catch(e){throw wC(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,zw(this._delegate,function(t){return V_("limitToLast",t),new Qw("limitToLast",t,"L")}(e)))}catch(e){throw wC(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zw(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $w("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw wC(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zw(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $w("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw wC(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zw(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gw("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw wC(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zw(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Gw("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw wC(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return G_(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=U_(t,z_);var e=U_(t.firestore,J_),n=X_(e),r=new oC(e);return function(t,e){var n=this,r=new bm;return t.asyncQueue.enqueueAndForget(function(){return Object(Ed.b)(n,void 0,void 0,function(){var n;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Ed.e)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,$y(t,e,!0)];case 1:return a=u.sent(),r=new Eb(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ub(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,v_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Uw(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=U_(t,z_);var e=U_(t.firestore,J_),n=X_(e),r=new oC(e);return O_(n,t._query,{source:"server"}).then(function(n){return new Uw(e,r,t,n)})}(this._delegate):function(t){t=U_(t,z_);var e=U_(t.firestore,J_),n=X_(e),r=new oC(e);return Bw(t._query),O_(n,t._query).then(function(n){return new Uw(e,r,t,n)})}(this._delegate)).then(function(t){return new IC(e.firestore,new Uw(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=CC(e),i=OC(e,function(e){return new IC(t.firestore,new Uw(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return aC(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?bC.tu(this.firestore,e):null))},t}(),kC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new SC(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),IC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new TC(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new SC(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new kC(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new SC(n._firestore,r))})},t.prototype.isEqual=function(t){return qw(this._delegate,t._delegate)},t}(),xC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Ed.d)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new _C(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new _C(this.firestore,void 0===t?Q_(this._delegate):Q_(this._delegate,t))}catch(t){throw wC(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=U_(t.firestore,J_),r=Q_(t),i=eC(t.converter,e);return uC(n,[pw(fw(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,kp.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new _C(e.firestore,t)})},e.prototype.isEqual=function(t){return $_(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?bC.tu(this.firestore,t):null))},e}(TC);function AC(t){return U_(t,H_)}var jC,RC=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(rw.bind.apply(rw,Object(Ed.h)([void 0],t)))}return t.documentId=function(){return new t(Zd.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(wu.o)(t))instanceof rw&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),PC=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new yw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new gw("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vw("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bw("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new _w("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),NC=n("/6Yf"),DC={Firestore:gC,GeoPoint:sw,Timestamp:Bd,Blob:fC,Transaction:yC,WriteBatch:vC,DocumentReference:_C,DocumentSnapshot:EC,Query:TC,QueryDocumentSnapshot:SC,QuerySnapshot:IC,CollectionReference:xC,FieldPath:RC,FieldValue:PC,setLogLevel:function(t){Id.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new NC.a("firestore",function(t){return function(t,e){return new gC(t,new J_(t,e),new pC)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},DC)))})(jC=_u.a),jC.registerVersion("@firebase/firestore","2.3.0");var FC=n("VRyK"),LC=n("qgXg"),MC=n("Ylt2");class UC extends ci.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new VC(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new li.a;if(this.isStopped||this.hasError?o=uo.a.EMPTY:(this.observers.push(t),o=new MC.a(this,t)),r&&t.add(t=new yu.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||LC.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class VC{constructor(t,e){this.time=t,this.value=e}}function qC(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new UC(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function BC(t,e){return e?xi(()=>t,e):xi(()=>t)}var HC=n("tf+s");const zC=new r.r("angularfire2.auth.use-emulator"),WC=new r.r("angularfire2.auth.settings"),KC=new r.r("angularfire2.auth.tenant-id"),QC=new r.r("angularfire2.auth.langugage-code"),$C=new r.r("angularfire2.auth.use-device-language"),GC=new r.r("angularfire.auth.persistence");let ZC=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new vu.d(i),d=Object(vu.h)(h),f=new ci.a,p=Object(ui.a)(void 0).pipe(Object(yu.b)(h.outsideAngular),xi(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(kt.a)(()=>Object(vu.g)(t,i,e)),Object(kt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(vu.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),qC({bufferSize:1,refCount:!1}));if(B(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(ui.a)(null);else{p.pipe(oo()).subscribe();const t=p.pipe(xi(t=>t.getRedirectResult().then(t=>t,()=>null)),d,qC({bufferSize:1,refCount:!1})),e=t=>new St.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(xi(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(xi(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(BC(n),Object(HC.a)(h.outsideAngular),Object(yu.b)(h.insideAngular)),this.user=t.pipe(BC(r),Object(HC.a)(h.outsideAngular),Object(yu.b)(h.insideAngular)),this.idToken=this.user.pipe(xi(t=>t?Object(Et.a)(t.getIdToken()):Object(ui.a)(null))),this.idTokenResult=this.user.pipe(xi(t=>t?Object(Et.a)(t.getIdTokenResult()):Object(ui.a)(null))),this.credential=Object(FC.a)(t,f,this.authState.pipe(Vi(t=>!t))).pipe(Object(kt.a)(t=>(null==t?void 0:t.user)?t:null),Object(HC.a)(h.outsideAngular),Object(yu.b)(h.insideAngular))}return Object(vu.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(vu.c),r.Zb(vu.b,8),r.Zb(r.C),r.Zb(r.A),r.Zb(zC,8),r.Zb(WC,8),r.Zb(KC,8),r.Zb(QC,8),r.Zb($C,8),r.Zb(GC,8))},t.\u0275prov=Object(r.Mb)({factory:function(){return new t(Object(r.Zb)(vu.c),Object(r.Zb)(vu.b,8),Object(r.Zb)(r.C),Object(r.Zb)(r.A),Object(r.Zb)(zC,8),Object(r.Zb)(WC,8),Object(r.Zb)(KC,8),Object(r.Zb)(QC,8),Object(r.Zb)($C,8),Object(r.Zb)(GC,8))},token:t,providedIn:"any"}),t})();function YC(t,e){return function(t,e=lu.b){return new St.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function JC(t,e){return YC(t,e).pipe(Object(kt.a)(t=>({payload:t,type:"query"})))}function XC(t,e){return JC(t,e).pipe(Fi(void 0),hu(),Object(kt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function tO(t,e,n){return XC(t,n).pipe(Li((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return eO(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return eO(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eO(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),pu(),Object(kt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function eO(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function nO(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(vu.e)(ZC,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class rO{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=XC(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(kt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Fi(void 0),hu(),Vi(([t,e])=>e.length>0||!t),Object(kt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Li((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=nO(t);return tO(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return JC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(kt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Et.a)(this.query.get(t)).pipe(Object(yu.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new iO(this.ref.doc(t),this.afs)}}class iO{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=lO(n,e);return new rO(r,i,this.afs)}snapshotChanges(){return YC(this.ref,this.afs.schedulers.outsideAngular).pipe(Fi(void 0),hu(),Object(kt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(kt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Et.a)(this.ref.get(t)).pipe(Object(yu.b)(this.afs.schedulers.insideAngular))}}class oO{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?XC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(kt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Vi(t=>t.length>0),this.afs.keepUnstableUntilFirst):XC(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Li((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=nO(t);return tO(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return JC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(kt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Et.a)(this.query.get(t)).pipe(Object(yu.b)(this.afs.schedulers.insideAngular))}}const sO=new r.r("angularfire2.enableFirestorePersistence"),aO=new r.r("angularfire2.firestore.persistenceSettings"),uO=new r.r("angularfire2.firestore.settings"),cO=new r.r("angularfire2.firestore.use-emulator");function lO(t,e=(t=>t)){return{query:e(t),ref:t}}let hO=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new vu.d(o),this.keepUnstableUntilFirst=Object(vu.h)(this.schedulers);const c=Object(vu.g)(t,o,e);!bu.a.auth&&u&&Object(vu.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(vu.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!B(i)){const e=()=>{try{return Object(Et.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(jC){return"undefined"!=typeof console&&console.warn(jC),Object(ui.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ui.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=lO(n,e),o=this.schedulers.ngZone.run(()=>r);return new rO(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new oO(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new iO(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(vu.c),r.Zb(vu.b,8),r.Zb(sO,8),r.Zb(uO,8),r.Zb(r.C),r.Zb(r.A),r.Zb(aO,8),r.Zb(cO,8),r.Zb(zC,8))},t.\u0275prov=Object(r.Mb)({factory:function(){return new t(Object(r.Zb)(vu.c),Object(r.Zb)(vu.b,8),Object(r.Zb)(sO,8),Object(r.Zb)(uO,8),Object(r.Zb)(r.C),Object(r.Zb)(r.A),Object(r.Zb)(aO,8),Object(r.Zb)(cO,8),Object(r.Zb)(zC,8))},token:t,providedIn:"any"}),t})(),dO=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:sO,useValue:!0},{provide:aO,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({providers:[hO]}),t})(),fO=(()=>{class t{constructor(t,e){this.fireStore=t,this.collection=this.fireStore.collection(e),this.list$=this.collection.valueChanges({idField:"id"})}get(t){return this.collection.doc(t).valueChanges({idField:"id"})}create(t){return this.collection.add(Object.assign({},t))}update(t){const e=t.id;return delete t.id,this.collection.doc(e).update(Object.assign({},t))}remove(t){return this.collection.doc(t.id).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(hO),r.Zb("entityName"))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pO=(()=>{class t extends fO{constructor(t){super(t,"articles"),this.fireStore=t}get(t){return"0"==t?Object(ui.a)(new cu):this.collection.doc(t).valueChanges({idField:"id"})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(hO))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var gO=n("w1tV");class mO{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new yO(t,this.observables,this.project))}}class yO extends pi{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(yi(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class vO{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new bO(t,this.predicate))}}class bO extends fi.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function _O(t){return null==t}function wO(t){return"function"==typeof t.set}function CO(t,e){return wO(e)?e:t.ref(e)}function OO(t,e){if("string"==typeof t)return e.stringCase();if(wO(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function EO(t,e,n="on",r=lu.b){return new St.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(kt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(gO.a)())}function SO(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function TO(t,e){const{payload:n,prevKey:r,key:i}=e,o=SO(t,i),s=function(t,e){if(_O(e))return 0;{const n=SO(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function kO(t){return(_O(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function IO(t,e,n){return function(t,e,n){return EO(t,"value","once",n).pipe(xi(r=>{const i=[Object(ui.a)(r)];return e.forEach(e=>i.push(EO(t,e,"on",n))),Object(FC.a)(...i).pipe(Li(TO,[]))}),pu())}(t,e=kO(e),n)}function xO(t,e,n){const r=(e=kO(e)).map(e=>EO(t,e,"on",n));return Object(FC.a)(...r)}function AO(t,e){return function(n,r){return OO(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function jO(t,e){return function(){return EO(t,"value","on",e)}}n("6Uf2");const RO=new r.r("angularfire2.realtimeDatabaseURL"),PO=new r.r("angularfire2.database.use-emulator");let NO=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new vu.d(i),this.keepUnstableUntilFirst=Object(vu.h)(this.schedulers);const a=o,u=Object(vu.g)(t,i,e);!bu.a.auth&&s&&Object(vu.j)(),this.database=Object(vu.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>CO(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:AO(r,"update"),set:AO(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?OO(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>IO(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>xO(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return EO(t,"value","on",e).pipe(Object(kt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new mO(t,n))}}(e),Object(kt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new vO(r))),Object(kt.a)(t=>t.actions));var r}(t,xO(t,e).pipe(Li((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>IO(t,r,n).pipe(Object(kt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>CO(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>jO(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>jO(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(kt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(vu.c),r.Zb(vu.b,8),r.Zb(RO,8),r.Zb(r.C),r.Zb(r.A),r.Zb(PO,8),r.Zb(zC,8))},t.\u0275prov=Object(r.Mb)({factory:function(){return new t(Object(r.Zb)(vu.c),Object(r.Zb)(vu.b,8),Object(r.Zb)(RO,8),Object(r.Zb)(r.C),Object(r.Zb)(r.A),Object(r.Zb)(PO,8),Object(r.Zb)(zC,8))},token:t,providedIn:"any"}),t})(),DO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({providers:[NO]}),t})();class FO{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new LO(t,this.dueTime,this.scheduler))}}class LO extends fi.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(MO,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function MO(t){t.debouncedNext()}var UO="firebasestorage.googleapis.com",VO=function(t){function e(n,r){var i=t.call(this,qO(n),"Firebase Storage: "+r+" ("+qO(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(Ed.d)(e,t),e.prototype._codeEquals=function(t){return qO(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(wu.c);function qO(t){return"storage/"+t}function BO(){return new VO("unknown","An unknown error occurred, please check the error payload for server response.")}function HO(){return new VO("canceled","User canceled the upload/download.")}function zO(){return new VO("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function WO(t){return new VO("invalid-argument",t)}function KO(){return new VO("app-deleted","The Firebase app was deleted.")}function QO(t){return new VO("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $O(t,e){return new VO("invalid-format","String does not match format '"+t+"': "+e)}function GO(t){throw new VO("internal-error","Internal error: "+t)}var ZO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},YO=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function JO(t,e){switch(t){case ZO.RAW:return new YO(XO(e));case ZO.BASE64:case ZO.BASE64URL:return new YO(tE(t,e));case ZO.DATA_URL:return new YO((n=new eE(e)).base64?tE(ZO.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(jC){throw $O(ZO.DATA_URL,"Malformed data URL.")}return XO(e)}(n.rest),new eE(e).contentType)}var n;throw BO()}function XO(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function tE(t,e){switch(t){case ZO.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw $O(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case ZO.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw $O(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(jC){throw $O(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var eE=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw $O(ZO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),nE={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function rE(t){switch(t){case"running":case"pausing":case"canceling":return nE.RUNNING;case"paused":return nE.PAUSED;case"success":return nE.SUCCESS;case"canceled":return nE.CANCELED;case"error":default:return nE.ERROR}}var iE=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),oE=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=iE.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=iE.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=iE.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw GO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw GO("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw GO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(jC){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw GO("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),sE=function(){function t(){}return t.prototype.createXhrIo=function(){return new oE},t}(),aE=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(jC){return new t(e,"")}if(""===r.path)return r;throw new VO("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===UO?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),r=new t(h[l.indices.bucket],d),l.postModify(r);break}}if(null==r)throw function(t){return new VO("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),uE=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function cE(t){return"string"==typeof t||t instanceof String}function lE(t){return hE()&&t instanceof Blob}function hE(){return"undefined"!=typeof Blob}function dE(t,e,n,r){if(r<e)throw WO("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw WO("Invalid value for '"+t+"'. Expected "+n+" or less.")}function fE(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function pE(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var gE=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(jC){o(jC)}else null!==s?((r=BO()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?KO():HO():new VO("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new mE(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new mE(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===iE.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new mE(s,n))}else{var a=n.getErrorCode()===iE.ABORT;e(!1,new mE(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Ed.h)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Ed.h)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),mE=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function yE(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function vE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=yE();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(hE())return new Blob(t);throw new VO("unsupported-environment","This browser doesn't seem to support creating Blobs")}var bE=function(){function t(t,e){var n=0,r="";lE(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(lE(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(hE()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(vE.apply(null,r))}var i=e.map(function(t){return cE(t)?JO(ZO.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function _E(t){var e,n;try{e=JSON.parse(t)}catch(jC){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function wE(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function CE(t,e){return e}var OE=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||CE}}(),EE=null;function SE(){if(EE)return EE;var t=[];t.push(new OE("bucket")),t.push(new OE("generation")),t.push(new OE("metageneration")),t.push(new OE("name","fullPath",!0));var e=new OE("name");e.xform=function(t,e){return function(t){return!cE(t)||t.length<2?t:wE(t)}(e)},t.push(e);var n=new OE("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new OE("timeCreated")),t.push(new OE("updated")),t.push(new OE("md5Hash",null,!0)),t.push(new OE("cacheControl",null,!0)),t.push(new OE("contentDisposition",null,!0)),t.push(new OE("contentEncoding",null,!0)),t.push(new OE("contentLanguage",null,!0)),t.push(new OE("contentType",null,!0)),t.push(new OE("metadata","customMetadata",!0)),EE=t}function TE(t,e,n){var r=_E(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new aE(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function kE(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var IE=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function xE(t){if(!t)throw BO()}function AE(t,e){return function(n,r){var i=TE(t,r,e);return xE(null!==i),i}}function jE(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new VO("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new VO("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new VO("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new VO("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function RE(t){var e=jE(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new VO("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function PE(t,e,n){var r=fE(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new IE(r,"GET",AE(t,n),i);return o.errorHandler=RE(e),o}function NE(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var DE=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function FE(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(jC){xE(!1)}return xE(!!n&&-1!==(e||["active"]).indexOf(n)),n}var LE=262144,ME=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function UE(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var VE=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=SE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=NE(e,r,i),a={name:s.fullPath},u=fE(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=kE(s,n),h=new IE(u,"POST",function(t){var e;FE(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(jC){xE(!1)}return xE(cE(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=jE(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new IE(n,"POST",function(t){var e=FE(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(jC){xE(!1)}n||xE(!1);var i=Number(n);return xE(!isNaN(i)),new DE(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=jE(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=LE*this._chunkMultiplier,n=new DE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new DE(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new VO("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw zO();var p=new IE(n,"POST",function(t,n){var i,s=FE(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?AE(e,o)(t,n):null,new DE(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=jE(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(jC){return t._error=jC,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){LE*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=PE(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=NE(e,r,i),c=kE(u,n),l=bE.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw zO();var h={name:u.fullPath},d=fE(o,t.host),f=t.maxUploadRetryTime,p=new IE(d,"POST",AE(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=jE(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=HO(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=rE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new ME(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(rE(this._state)){case nE.SUCCESS:UE(this._resolve.bind(null,this.snapshot))();break;case nE.CANCELED:case nE.ERROR:UE(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(rE(this._state)){case nE.RUNNING:case nE.PAUSED:t.next&&UE(t.next.bind(t,this.snapshot))();break;case nE.SUCCESS:t.complete&&UE(t.complete.bind(t))();break;case nE.CANCELED:case nE.ERROR:t.error&&UE(t.error.bind(t,this._error))();break;default:t.error&&UE(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),qE=function(){function t(t,e){this._service=t,this._location=e instanceof aE?e:aE.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new aE(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return wE(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new aE(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw QO(t)},t}();function BE(t){var e={prefixes:[],items:[]};return HE(t,e).then(function(){return e})}function HE(t,e,n){return Object(Ed.b)(this,void 0,void 0,function(){var r,i,o;return Object(Ed.e)(this,function(s){switch(s.label){case 0:return[4,zE(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,HE(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function zE(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n,r;return Object(Ed.e)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&dE("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=fE(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new IE(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=_E(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new aE(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new aE(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return xE(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=jE(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function WE(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new aE(t._location.bucket,n);return new qE(t.storage,r)}function KE(t){return/^[A-Za-z]+:\/\//.test(t)}function QE(t,e){if(t instanceof ZE){var n=t;if(null==n._bucket)throw new VO("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new qE(n,n._bucket);return null!=e?QE(r,e):r}if(void 0!==e){if(e.includes(".."))throw WO('`path` param cannot contain ".."');return WE(t,e)}return t}function $E(t,e){if(e&&KE(e)){if(t instanceof ZE)return new qE(t,e);throw WO("To use ref(service, url), the first argument must be a Storage instance.")}return QE(t,e)}function GE(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:aE.makeFromBucketSpec(n,t)}var ZE=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=UO,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?aE.makeFromBucketSpec(i,this._host):GE(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?aE.makeFromBucketSpec(this._url,t):GE(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){dE("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){dE("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t,e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return Object(Ed.b)(this,void 0,void 0,function(){var t;return Object(Ed.e)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new qE(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new uE(KO());var i=function(t,e,n,r,i,o){var s=pE(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new gE(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function YE(t,e){return $E(t=Object(wu.o)(t),e)}var JE,XE,tS=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),eS=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new tS(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new tS(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new tS(t,i,i._ref))}:{next:e.next?function(t){return e.next(new tS(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),nS=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new rS(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new rS(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),rS=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return WE(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new eS(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new VE(t,new bE(e),n)}(t=Object(wu.o)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=ZO.RAW),this._throwIfRoot("putString");var r=JO(e,t),i=Object(Ed.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new eS(new VE(this._delegate,new bE(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,BE(t=Object(wu.o)(t))).then(function(t){return new nS(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return zE(t=Object(wu.o)(t),e)}(this._delegate,t||void 0).then(function(t){return new nS(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=PE(t.storage,t._location,SE()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(wu.o)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Ed.b)(this,void 0,void 0,function(){var n;return Object(Ed.e)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=fE(e.fullServerUrl(),t.host),o=kE(n,r),s=t.maxOperationRetryTime,a=new IE(i,"PATCH",AE(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=RE(e),a}(t.storage,t._location,e,SE()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=Object(wu.o)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=fE(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new IE(r,"GET",function(t,e){return function(n,r){var i=TE(t,r,e);return xE(null!==i),function(t,e,n){var r=_E(e);if(null===r)return null;if(!cE(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return fE("/b/"+o(t.bucket)+"/o/"+o(r),n)+pE({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=RE(e),o}(t.storage,t._location,SE()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new VO("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(wu.o)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(Ed.b)(this,void 0,void 0,function(){var e;return Object(Ed.e)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=fE(e.fullServerUrl(),t.host),r=new IE(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=RE(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(wu.o)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw QO(t)},t}(),iS=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(KE(t))throw WO("ref() expected a child path but got a URL, use refFromURL instead.");return new rS(YE(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!KE(t))throw WO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{aE.makeFromUrl(t,this._delegate.host)}catch(jC){throw WO("refFromUrl() expected a valid full URL but got an invalid one.")}return new rS(YE(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function oS(t){const e=function(t){return new St.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=lu.a){return n=>n.lift(new FO(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(kt.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function sS(t,e,n){return{getDownloadURL:()=>Object(ui.a)(void 0).pipe(Object(yu.b)(e.outsideAngular),xi(()=>t.getDownloadURL()),n),getMetadata:()=>Object(ui.a)(void 0).pipe(Object(yu.b)(e.outsideAngular),xi(()=>t.getMetadata()),n),delete:()=>Object(Et.a)(t.delete()),child:r=>sS(t.child(r),e,n),updateMetadata:e=>Object(Et.a)(t.updateMetadata(e)),put:(e,n)=>oS(t.put(e,n)),putString:(e,n,r)=>oS(t.putString(e,n,r)),listAll:()=>Object(Et.a)(t.listAll())}}XE={TaskState:nE,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:ZO,Storage:ZE,Reference:rS},(JE=_u.a).INTERNAL.registerComponent(new NC.a("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new iS(r,new ZE(r,i,o,new sE,n,_u.a.SDK_VERSION))},"PUBLIC").setServiceProps(XE).setMultipleInstances(!0)),JE.registerVersion("@firebase/storage","0.5.2");const aS=new r.r("angularfire2.storageBucket"),uS=new r.r("angularfire2.storage.maxUploadRetryTime"),cS=new r.r("angularfire2.storage.maxOperationRetryTime");let lS=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new vu.d(i),this.keepUnstableUntilFirst=Object(vu.h)(this.schedulers);const a=Object(vu.g)(t,i,e);this.storage=Object(vu.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return sS(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return sS(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return sS(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(vu.c),r.Zb(vu.b,8),r.Zb(aS,8),r.Zb(r.C),r.Zb(r.A),r.Zb(uS,8),r.Zb(cS,8))},t.\u0275prov=Object(r.Mb)({factory:function(){return new t(Object(r.Zb)(vu.c),Object(r.Zb)(vu.b,8),Object(r.Zb)(aS,8),Object(r.Zb)(r.C),Object(r.Zb)(r.A),Object(r.Zb)(uS,8),Object(r.Zb)(cS,8))},token:t,providedIn:"any"}),t})(),hS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({}),t})(),dS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({providers:[lS],imports:[hS]}),t})(),fS=(()=>{class t{constructor(t,e){this.db=t,this.storage=e,this.basePath="/uploads",this.photos=this.getFiles(100)}pushFileToStorage(t){const e=`${this.basePath}/${t.file.name}`,n=this.storage.ref(e),r=this.storage.upload(e,t.file);return r.snapshotChanges().pipe(co(()=>{n.getDownloadURL().subscribe(e=>{t.url=e,t.name=t.file.name,this.saveFileData(t)})})).subscribe(),r.percentageChanges()}saveFileData(t){this.db.list(this.basePath).push(t)}getFiles(t){return this.db.list(this.basePath,e=>e.limitToLast(t))}deleteFile(t){this.deleteFileDatabase(t.key).then(()=>{this.deleteFileStorage(t.name)}).catch(t=>console.log(t))}deleteFileDatabase(t){return console.log(t),this.db.list(this.basePath).remove(t)}deleteFileStorage(t){this.storage.ref(this.basePath).child(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(NO),r.Zb(lS))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const pS=["toast-component",""];function gS(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",5),r.cc("click",function(){return r.wc(t),r.ec().remove()}),r.Vb(1,"span",6),r.Ec(2,"\xd7"),r.Ub(),r.Ub()}}function mS(t,e){if(1&t&&(r.Tb(0),r.Ec(1),r.Sb()),2&t){const t=r.ec(2);r.Cb(1),r.Gc("[",t.duplicatesCount+1,"]")}}function yS(t,e){if(1&t&&(r.Vb(0,"div"),r.Ec(1),r.Dc(2,mS,2,1,"ng-container",4),r.Ub()),2&t){const t=r.ec();r.Eb(t.options.titleClass),r.Db("aria-label",t.title),r.Cb(1),r.Gc(" ",t.title," "),r.Cb(1),r.kc("ngIf",t.duplicatesCount)}}function vS(t,e){if(1&t&&r.Rb(0,"div",7),2&t){const t=r.ec();r.Eb(t.options.messageClass),r.kc("innerHTML",t.message,r.xc)}}function bS(t,e){if(1&t&&(r.Vb(0,"div",8),r.Ec(1),r.Ub()),2&t){const t=r.ec();r.Eb(t.options.messageClass),r.Db("aria-label",t.message),r.Cb(1),r.Gc(" ",t.message," ")}}function _S(t,e){if(1&t&&(r.Vb(0,"div"),r.Rb(1,"div",9),r.Ub()),2&t){const t=r.ec();r.Cb(1),r.Ac("width",t.width+"%")}}function wS(t,e){if(1&t){const t=r.Wb();r.Vb(0,"button",5),r.cc("click",function(){return r.wc(t),r.ec().remove()}),r.Vb(1,"span",6),r.Ec(2,"\xd7"),r.Ub(),r.Ub()}}function CS(t,e){if(1&t&&(r.Tb(0),r.Ec(1),r.Sb()),2&t){const t=r.ec(2);r.Cb(1),r.Gc("[",t.duplicatesCount+1,"]")}}function OS(t,e){if(1&t&&(r.Vb(0,"div"),r.Ec(1),r.Dc(2,CS,2,1,"ng-container",4),r.Ub()),2&t){const t=r.ec();r.Eb(t.options.titleClass),r.Db("aria-label",t.title),r.Cb(1),r.Gc(" ",t.title," "),r.Cb(1),r.kc("ngIf",t.duplicatesCount)}}function ES(t,e){if(1&t&&r.Rb(0,"div",7),2&t){const t=r.ec();r.Eb(t.options.messageClass),r.kc("innerHTML",t.message,r.xc)}}function SS(t,e){if(1&t&&(r.Vb(0,"div",8),r.Ec(1),r.Ub()),2&t){const t=r.ec();r.Eb(t.options.messageClass),r.Db("aria-label",t.message),r.Cb(1),r.Gc(" ",t.message," ")}}function TS(t,e){if(1&t&&(r.Vb(0,"div"),r.Rb(1,"div",9),r.Ub()),2&t){const t=r.ec();r.Cb(1),r.Ac("width",t.width+"%")}}class kS{constructor(t,e,n,r,i,o){this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=i,this.toastRef=o,this._onTap=new ci.a,this._onAction=new ci.a,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const IS={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},xS=new r.r("ToastConfig");class AS{constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class jS extends class{attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}{constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){const n=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=n.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let RS=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=Object(r.Mb)({factory:function(){return new t(Object(r.Zb)(s))},token:t,providedIn:"root"}),t})();class PS{constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let NS=(()=>{class t{constructor(t,e,n,r){this._overlayContainer=t,this._componentFactoryResolver=e,this._appRef=n,this._document=r,this._paneElements=new Map}create(t,e){return this._createOverlayRef(this.getPaneElement(t,e))}getPaneElement(t="",e){return this._paneElements.get(e)||this._paneElements.set(e,{}),this._paneElements.get(e)[t]||(this._paneElements.get(e)[t]=this._createPaneElement(t,e)),this._paneElements.get(e)[t]}_createPaneElement(t,e){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(t),n.classList.add("toast-container"),e?e.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(t){return new jS(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new PS(this._createPortalHost(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(RS),r.Zb(r.j),r.Zb(r.g),r.Zb(s))},t.\u0275prov=Object(r.Mb)({factory:function(){return new t(Object(r.Zb)(RS),Object(r.Zb)(r.j),Object(r.Zb)(r.g),Object(r.Zb)(s))},token:t,providedIn:"root"}),t})();class DS{constructor(t){this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new ci.a,this._activate=new ci.a,this._manualClose=new ci.a,this._resetTimeout=new ci.a,this._countDuplicate=new ci.a}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class FS{constructor(t,e){this._toastPackage=t,this._parentInjector=e}get(t,e,n){return t===kS?this._toastPackage:this._parentInjector.get(t,e,n)}}let LS=(()=>{class t{constructor(t,e,n,r,i){this.overlay=e,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,e,n={},r=""){return this._preBuildNotification(r,t,e,this.applyConfig(n))}success(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,e,this.applyConfig(n))}error(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,e,this.applyConfig(n))}info(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,e,this.applyConfig(n))}warning(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,e,this.applyConfig(n))}clear(t){for(const e of this.toasts)if(void 0!==t){if(e.toastId===t)return void e.toastRef.manualClose()}else e.toastRef.manualClose()}remove(t){const e=this._findToast(t);if(!e)return!1;if(e.activeToast.toastRef.close(),this.toasts.splice(e.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const t=this.toasts[this.currentlyActive].toastRef;t.isInactive()||(this.currentlyActive=this.currentlyActive+1,t.activate())}return!0}findDuplicate(t="",e="",n,r){const{includeTitleDuplicates:i}=this.toastrConfig;for(const o of this.toasts){const s=i&&o.title===t;if((!i||s)&&o.message===e)return o.toastRef.onDuplicate(n,r),o}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let e=0;e<this.toasts.length;e++)if(this.toasts[e].toastId===t)return{index:e,activeToast:this.toasts[e]};return null}_preBuildNotification(t,e,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,e,n,r)):this._buildNotification(t,e,n,r)}_buildNotification(t,e,n,i){if(!i.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(n,e,this.toastrConfig.resetTimeoutOnDuplicate&&i.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||e)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=e;let s=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(s=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const a=this.overlay.create(i.positionClass,this.overlayContainer);this.index=this.index+1;let u=e;e&&i.enableHtml&&(u=this.sanitizer.sanitize(r.J.HTML,e));const c=new DS(a),l=new kS(this.index,i,u,n,t,c),h=new FS(l,this._injector),d=new AS(i.toastComponent,h),f=a.attach(d,this.toastrConfig.newestOnTop);c.componentInstance=f.instance;const p={toastId:this.index,title:n||"",message:e||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:f};return s||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{p.toastRef.activate()})),this.toasts.push(p),p}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(xS),r.Zb(NS),r.Zb(r.s),r.Zb(vt),r.Zb(r.A))},t.\u0275prov=Object(r.Mb)({factory:function(){return new t(Object(r.Zb)(xS),Object(r.Zb)(NS),Object(r.Zb)(r.o),Object(r.Zb)(vt),Object(r.Zb)(r.A))},token:t,providedIn:"root"}),t})(),MS=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),e)):this.timeout=setTimeout(()=>t(),e)}outsideInterval(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),e)):this.intervalId=setInterval(()=>t(),e)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(LS),r.Qb(kS),r.Qb(r.A))},t.\u0275cmp=r.Kb({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,e){1&t&&r.cc("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.Cc("@flyInOut",e.state),r.Eb(e.toastClasses),r.Ac("display",e.displayStyle))},attrs:pS,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.Dc(0,gS,3,0,"button",0),r.Dc(1,yS,3,5,"div",1),r.Dc(2,vS,1,3,"div",2),r.Dc(3,bS,2,4,"div",3),r.Dc(4,_S,2,2,"div",4)),2&t&&(r.kc("ngIf",e.options.closeButton),r.Cb(1),r.kc("ngIf",e.title),r.Cb(1),r.kc("ngIf",e.message&&e.options.enableHtml),r.Cb(1),r.kc("ngIf",e.message&&!e.options.enableHtml),r.Cb(1),r.kc("ngIf",e.options.progressBar))},directives:[R],encapsulation:2,data:{animation:[("flyInOut",e=[Ae("inactive",xe({opacity:0})),Ae("active",xe({opacity:1})),Ae("removed",xe({opacity:0})),je("inactive => active",ke("{{ easeTime }}ms {{ easing }}")),je("active => removed",ke("{{ easeTime }}ms {{ easing }}"))],{type:7,name:"flyInOut",definitions:e,options:{}})]}}),t;var e})();const US=Object.assign(Object.assign({},IS),{toastComponent:MS});let VS=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:xS,useValue:{default:US,config:e}}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({imports:[[q]]}),t})(),qS=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.appRef=n,this.width=-1,this.toastClasses="",this.state="inactive",this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state&&(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(LS),r.Qb(kS),r.Qb(r.g))},t.\u0275cmp=r.Kb({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,e){1&t&&r.cc("click",function(){return e.tapToast()})("mouseenter",function(){return e.stickAround()})("mouseleave",function(){return e.delayedHideToast()}),2&t&&(r.Eb(e.toastClasses),r.Ac("display",e.displayStyle))},attrs:pS,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.Dc(0,wS,3,0,"button",0),r.Dc(1,OS,3,5,"div",1),r.Dc(2,ES,1,3,"div",2),r.Dc(3,SS,2,4,"div",3),r.Dc(4,TS,2,2,"div",4)),2&t&&(r.kc("ngIf",e.options.closeButton),r.Cb(1),r.kc("ngIf",e.title),r.Cb(1),r.kc("ngIf",e.message&&e.options.enableHtml),r.Cb(1),r.kc("ngIf",e.message&&!e.options.enableHtml),r.Cb(1),r.kc("ngIf",e.options.progressBar))},directives:[R],encapsulation:2}),t})();Object.assign(Object.assign({},IS),{toastComponent:qS});const BS=function(t){return{width:t}};function HS(t,e){if(1&t&&(r.Vb(0,"div",26),r.Vb(1,"div",27),r.Ec(2),r.Ub(),r.Ub()),2&t){const t=r.ec(2);r.Cb(1),r.kc("ngStyle",r.nc(3,BS,t.percentage+"%")),r.Db("aria-valuenow",t.percentage),r.Cb(1),r.Gc(" ",t.percentage,"% ")}}function zS(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",8),r.Vb(1,"form",9,10),r.cc("ngSubmit",function(){r.wc(t);const e=r.tc(2),n=r.ec();return n.onUpdate(e,n.article)}),r.Vb(3,"div",11),r.Vb(4,"label",12),r.Ec(5,"Title"),r.Ub(),r.Vb(6,"input",13),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().article.title=e}),r.Ub(),r.Ub(),r.Vb(7,"div",11),r.Vb(8,"label",14),r.Ec(9,"Abstract"),r.Ub(),r.Vb(10,"input",15),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().article.abstract=e}),r.Ub(),r.Ub(),r.Vb(11,"div",11),r.Vb(12,"label",16),r.Ec(13,"Link"),r.Ub(),r.Vb(14,"input",17),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().article.link=e}),r.Ub(),r.Ub(),r.Vb(15,"div",11),r.Vb(16,"label",18),r.Ec(17,"Photo"),r.Ub(),r.Rb(18,"img",19),r.Vb(19,"input",20),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().article.photo=e}),r.Ub(),r.Ub(),r.Vb(20,"div"),r.Vb(21,"label"),r.Vb(22,"input",21),r.cc("change",function(e){return r.wc(t),r.ec().selectFile(e)}),r.Ub(),r.Ub(),r.Vb(23,"button",22),r.cc("click",function(){return r.wc(t),r.ec().upload()}),r.Ec(24," Upload "),r.Ub(),r.Dc(25,HS,3,5,"div",23),r.Ub(),r.Vb(26,"button",24),r.Rb(27,"i",25),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=r.ec();r.Cb(6),r.kc("ngModel",t.article.title),r.Cb(4),r.kc("ngModel",t.article.abstract),r.Cb(4),r.kc("ngModel",t.article.link),r.Cb(4),r.lc("src",t.article.photo,r.yc),r.lc("alt",t.article.photo),r.Cb(1),r.kc("hidden",t.article)("ngModel",t.article.photo),r.Cb(4),r.kc("disabled",!t.selectedFiles),r.Cb(2),r.kc("ngIf",t.currentPhoto)}}const WS=function(t){return[t]};let KS=(()=>{class t{constructor(t,e,n,r,i){this.articleService=t,this.activatedRoute=e,this.pUploadService=n,this.router=r,this.toaster=i,this.percentage=0}ngOnInit(){this.activatedRoute.params.pipe(xi(t=>this.articleService.get(t.id))).subscribe(t=>this.article=t)}onUpdate(t,e){""==e.id?this.articleService.create(e).then(()=>{this.router.navigate(["admin/articles"]),this.toaster.success("Succesfully created!","Created",{timeOut:3e3})}).catch(t=>console.log(t)):this.articleService.update(e).then(()=>{this.router.navigate(["admin/articles"]),this.toaster.info("Successfully updated!","Updated",{timeOut:3e3})}).catch(t=>console.log(t))}selectFile(t){this.selectedFiles=t.target.files}upload(){const t=this.selectedFiles.item(0);this.selectedFiles=void 0,this.currentPhoto=new uu(t),this.pUploadService.pushFileToStorage(this.currentPhoto).subscribe(t=>{this.percentage=Math.round(t),this.pUploadService.getFiles(1).snapshotChanges().pipe(Object(kt.a)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val())))).subscribe(t=>this.article.photo=t.map(t=>t.url).toString())},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(pO),r.Qb(vs),r.Qb(fS),r.Qb(Ma),r.Qb(LS))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-article-edit"]],decls:10,vars:4,consts:[[1,"container"],[1,"row"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],["class","col-6 offset-3",4,"ngIf"],[1,"col-6","offset-3"],[3,"ngSubmit"],["articleForm","ngForm"],[1,"form-group"],["for","title"],["name","title","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","abstract"],["name","abstract","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","link"],["name","link","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","photo",1,"mr-5"],[2,"width","200px",3,"src","alt"],["name","photo","type","text","readonly","",1,"form-control",3,"hidden","ngModel","ngModelChange"],["type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],["class","progress mt-2",4,"ngIf"],["type","submit",1,"btn","btn-info","col"],[1,"fa","fa-save"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"nav",2),r.Vb(3,"ol",3),r.Vb(4,"li",4),r.Vb(5,"a",5),r.Ec(6,"Articles"),r.Ub(),r.Ub(),r.Vb(7,"li",6),r.Ec(8,"Editor"),r.Ub(),r.Ub(),r.Ub(),r.Dc(9,zS,28,9,"div",7),r.Ub(),r.Ub()),2&t&&(r.Cb(5),r.kc("routerLink",r.nc(2,WS,"/admin/articles")),r.Cb(4),r.kc("ngIf",e.article))},directives:[Va,R,we,Zt,ye,Pt,Gt,_e,D],styles:[""]}),t})();class QS{constructor(){this.id="",this.name="",this.description="",this.size="",this.picture="",this.fullPicture="",this.type=""}}let $S=(()=>{class t extends fO{constructor(t){super(t,"paintings"),this.fireStore=t}get(t){return"0"==t?Object(ui.a)(new QS):this.collection.doc(t).valueChanges({idField:"id"})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(hO))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const GS=function(t){return{width:t}};function ZS(t,e){if(1&t&&(r.Vb(0,"div",30),r.Vb(1,"div",31),r.Ec(2),r.Ub(),r.Ub()),2&t){const t=r.ec(2);r.Cb(1),r.kc("ngStyle",r.nc(3,GS,t.percentage+"%")),r.Db("aria-valuenow",t.percentage),r.Cb(1),r.Gc(" ",t.percentage,"% ")}}function YS(t,e){if(1&t&&(r.Vb(0,"div",30),r.Vb(1,"div",31),r.Ec(2),r.Ub(),r.Ub()),2&t){const t=r.ec(2);r.Cb(1),r.kc("ngStyle",r.nc(3,GS,t.fullPercentage+"%")),r.Db("aria-valuenow",t.fullPercentage),r.Cb(1),r.Gc(" ",t.fullPercentage,"% ")}}function JS(t,e){if(1&t){const t=r.Wb();r.Vb(0,"div",8),r.Vb(1,"form",9,10),r.cc("ngSubmit",function(){r.wc(t);const e=r.tc(2),n=r.ec();return n.onUpdate(e,n.painting)}),r.Vb(3,"div",11),r.Vb(4,"label",12),r.Ec(5,"C\xedm"),r.Ub(),r.Vb(6,"input",13),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().painting.name=e}),r.Ub(),r.Ub(),r.Vb(7,"div",11),r.Vb(8,"label",14),r.Ec(9,"Le\xedr\xe1s"),r.Ub(),r.Vb(10,"input",15),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().painting.description=e}),r.Ub(),r.Ub(),r.Vb(11,"div",11),r.Vb(12,"label",16),r.Ec(13,"M\xe9ret"),r.Ub(),r.Vb(14,"input",17),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().painting.size=e}),r.Ub(),r.Ub(),r.Vb(15,"div",11),r.Vb(16,"label",18),r.Ec(17,"Technika"),r.Ub(),r.Vb(18,"input",19),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().painting.type=e}),r.Ub(),r.Ub(),r.Vb(19,"div",11),r.Vb(20,"label",20),r.Ec(21,"El\u0151n\xe9zeti K\xe9p"),r.Ub(),r.Rb(22,"img",21),r.Vb(23,"input",22),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().painting.picture=e}),r.Ub(),r.Ub(),r.Vb(24,"div"),r.Vb(25,"label"),r.Vb(26,"input",23),r.cc("change",function(e){return r.wc(t),r.ec().selectFile(e)}),r.Ub(),r.Ub(),r.Vb(27,"button",24),r.cc("click",function(){return r.wc(t),r.ec().upload()}),r.Ec(28," Upload "),r.Ub(),r.Dc(29,ZS,3,5,"div",25),r.Ub(),r.Vb(30,"div",11),r.Vb(31,"label",26),r.Ec(32,"Eredeti K\xe9p"),r.Ub(),r.Rb(33,"img",21),r.Vb(34,"input",27),r.cc("ngModelChange",function(e){return r.wc(t),r.ec().painting.fullPicture=e}),r.Ub(),r.Ub(),r.Vb(35,"div"),r.Vb(36,"label"),r.Vb(37,"input",23),r.cc("change",function(e){return r.wc(t),r.ec().selectFullFile(e)}),r.Ub(),r.Ub(),r.Vb(38,"button",24),r.cc("click",function(){return r.wc(t),r.ec().uploadFull()}),r.Ec(39," Upload "),r.Ub(),r.Dc(40,YS,3,5,"div",25),r.Ub(),r.Vb(41,"button",28),r.Rb(42,"i",29),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=r.ec();r.Cb(6),r.kc("ngModel",t.painting.name),r.Cb(4),r.kc("ngModel",t.painting.description),r.Cb(4),r.kc("ngModel",t.painting.size),r.Cb(4),r.kc("ngModel",t.painting.type),r.Cb(4),r.lc("src",t.painting.picture,r.yc),r.lc("alt",t.painting.picture),r.Cb(1),r.kc("hidden",t.painting)("ngModel",t.painting.picture),r.Cb(4),r.kc("disabled",!t.selectedFiles),r.Cb(2),r.kc("ngIf",t.currentPhoto),r.Cb(4),r.lc("src",t.painting.fullPicture,r.yc),r.lc("alt",t.painting.fullPicture),r.Cb(1),r.kc("hidden",t.painting)("ngModel",t.painting.fullPicture),r.Cb(4),r.kc("disabled",!t.selectedFullFiles),r.Cb(2),r.kc("ngIf",t.currentFullPhoto)}}const XS=function(t){return[t]};let tT=(()=>{class t{constructor(t,e,n,r,i){this.activatedRoute=t,this.pService=e,this.pUploadService=n,this.router=r,this.toaster=i,this.percentage=0,this.fullPercentage=0}ngOnInit(){this.activatedRoute.params.pipe(xi(t=>this.pService.get(t.id))).subscribe(t=>this.painting=t)}onUpdate(t,e){""==e.id?this.pService.create(e).then(()=>{this.router.navigate(["admin/paintings"]),this.toaster.success("Sikeres l\xe9trehoz\xe1s!","L\xe9trehozva",{timeOut:3e3})}).catch(t=>console.log(t)):this.pService.update(e).then(()=>{this.router.navigate(["admin/paintings"]),this.toaster.info("Sikeres friss\xedt\xe9s!","Friss\xedtve",{timeOut:3e3})}).catch(t=>console.log(t))}selectFile(t){this.selectedFiles=t.target.files}selectFullFile(t){this.selectedFullFiles=t.target.files}upload(){const t=this.selectedFiles.item(0);this.selectedFiles=void 0,this.currentPhoto=new uu(t),this.pUploadService.pushFileToStorage(this.currentPhoto).subscribe(t=>{this.percentage=Math.round(t),this.pUploadService.getFiles(1).snapshotChanges().pipe(Object(kt.a)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val())))).subscribe(t=>this.painting.picture=t.map(t=>t.url).toString())},t=>{console.log(t)})}uploadFull(){const t=this.selectedFullFiles.item(0);this.selectedFullFiles=void 0,this.currentFullPhoto=new uu(t),this.pUploadService.pushFileToStorage(this.currentFullPhoto).subscribe(t=>{this.fullPercentage=Math.round(t),this.pUploadService.getFiles(1).snapshotChanges().pipe(Object(kt.a)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val())))).subscribe(t=>this.painting.fullPicture=t.map(t=>t.url).toString())},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(vs),r.Qb($S),r.Qb(fS),r.Qb(Ma),r.Qb(LS))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-painting-edit"]],decls:10,vars:4,consts:[[1,"container"],[1,"row"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],["class","col-6 offset-3",4,"ngIf"],[1,"col-6","offset-3"],[3,"ngSubmit"],["paintingForm","ngForm"],[1,"form-group"],["for","name"],["name","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["name","description","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","size"],["name","size","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","type"],["name","type","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","picture",1,"mr-5"],[2,"width","200px",3,"src","alt"],["name","picture","type","text","readonly","",1,"form-control",3,"hidden","ngModel","ngModelChange"],["type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],["class","progress mt-2",4,"ngIf"],["for","fullPicture",1,"mr-5"],["name","fullPicture","type","text","readonly","",1,"form-control",3,"hidden","ngModel","ngModelChange"],["type","submit",1,"btn","btn-info","col"],[1,"fa","fa-save"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"nav",2),r.Vb(3,"ol",3),r.Vb(4,"li",4),r.Vb(5,"a",5),r.Ec(6,"Photos"),r.Ub(),r.Ub(),r.Vb(7,"li",6),r.Ec(8,"Editor"),r.Ub(),r.Ub(),r.Ub(),r.Dc(9,JS,43,16,"div",7),r.Ub(),r.Ub()),2&t&&(r.Cb(5),r.kc("routerLink",r.nc(2,XS,"/admin/paintings")),r.Cb(4),r.kc("ngIf",e.painting))},directives:[Va,R,we,Zt,ye,Pt,Gt,_e,D],styles:[""]}),t})(),eT=(()=>{class t{transform(t,e){return t.filter(t=>t.title.toLowerCase().includes(e.toLowerCase()))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Pb({name:"articleFilter",type:t,pure:!0}),t})();const nT=function(t){return[t]};function rT(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Ec(2),r.Ub(),r.Vb(3,"td"),r.Ec(4),r.Ub(),r.Vb(5,"td"),r.Rb(6,"img",10),r.Ub(),r.Vb(7,"td"),r.Ec(8),r.Ub(),r.Vb(9,"td"),r.Vb(10,"div",11),r.Vb(11,"button",12),r.Rb(12,"i",13),r.Ub(),r.Vb(13,"button",14),r.cc("click",function(){r.wc(t);const n=e.$implicit;return r.ec().onDelete(n)}),r.Rb(14,"i",15),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=e.$implicit;r.Cb(2),r.Fc(t.title),r.Cb(2),r.Fc(t.abstract),r.Cb(2),r.lc("src",t.photo,r.yc),r.Cb(2),r.Fc(t.link),r.Cb(3),r.kc("routerLink",r.nc(5,nT,t.id))}}const iT=function(){return[0]};let oT=(()=>{class t{constructor(t,e){this.articleService=t,this.toaster=e,this.list$=new St.a,this.filterKey=""}ngOnInit(){this.list$=this.articleService.list$}onDelete(t){this.articleService.remove(t),this.toaster.warning("Successfull delete!","Deleted",{timeOut:3e3})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(pO),r.Qb(LS))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-articles-list"]],decls:25,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-1","text-center","mr-0"],[1,"col-3","mb-3"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success","col",3,"routerLink"],[1,"fa","fa-plus"],[1,"table","table-striped"],[1,"bg-dark","text-white"],[4,"ngFor","ngForOf"],["alt","article",2,"width","140px",3,"src"],[1,"btn-group"],["type","submit",1,"btn","btn-info",3,"routerLink"],[1,"fa","fa-pencil"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div"),r.Vb(3,"div",1),r.Vb(4,"div",2),r.Ec(5,"Search"),r.Ub(),r.Vb(6,"div",3),r.Vb(7,"input",4),r.cc("ngModelChange",function(t){return e.filterKey=t}),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"button",5),r.Rb(9,"i",6),r.Ub(),r.Vb(10,"table",7),r.Vb(11,"thead",8),r.Vb(12,"th"),r.Ec(13,"Title"),r.Ub(),r.Vb(14,"th"),r.Ec(15,"Abstract"),r.Ub(),r.Vb(16,"th"),r.Ec(17,"Photo"),r.Ub(),r.Vb(18,"th"),r.Ec(19,"Link"),r.Ub(),r.Rb(20,"th"),r.Ub(),r.Vb(21,"tbody"),r.Dc(22,rT,15,7,"tr",9),r.fc(23,"articleFilter"),r.fc(24,"async"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cb(7),r.kc("ngModel",e.filterKey),r.Cb(1),r.kc("routerLink",r.mc(8,iT)),r.Cb(14),r.kc("ngForOf",r.hc(23,3,r.gc(24,6,e.list$),e.filterKey)))},directives:[Pt,Gt,_e,Ua,A],pipes:[eT,V],styles:[""]}),t})(),sT=(()=>{class t{transform(t,e){return t.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.type.toLowerCase().includes(e.toLowerCase()))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Pb({name:"filter",type:t,pure:!0}),t})();const aT=function(t){return[t]};function uT(t,e){if(1&t){const t=r.Wb();r.Vb(0,"tr"),r.Vb(1,"td"),r.Ec(2),r.Ub(),r.Vb(3,"td"),r.Ec(4),r.Ub(),r.Vb(5,"td"),r.Ec(6),r.Ub(),r.Vb(7,"td"),r.Ec(8),r.Ub(),r.Vb(9,"td"),r.Rb(10,"img",10),r.Ub(),r.Vb(11,"td"),r.Vb(12,"div",11),r.Vb(13,"button",12),r.Rb(14,"i",13),r.Ub(),r.Vb(15,"button",14),r.cc("click",function(){r.wc(t);const n=e.$implicit;return r.ec().onDelete(n)}),r.Rb(16,"i",15),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=e.$implicit;r.Cb(2),r.Fc(t.name),r.Cb(2),r.Fc(t.description),r.Cb(2),r.Fc(t.size),r.Cb(2),r.Fc(t.type),r.Cb(2),r.lc("src",t.picture,r.yc),r.Cb(3),r.kc("routerLink",r.nc(6,aT,t.id))}}const cT=function(){return[0]};let lT=(()=>{class t{constructor(t,e){this.pService=t,this.toaster=e,this.list$=new St.a,this.filterKey=""}ngOnInit(){this.list$=this.pService.list$}onDelete(t){this.pService.remove(t),this.toaster.warning("Successfull delete!","Deleted",{timeOut:3e3})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb($S),r.Qb(LS))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-paintings-list"]],decls:27,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-1","text-center","mr-0"],[1,"col-3","mb-3"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success","col",3,"routerLink"],[1,"fa","fa-plus"],[1,"table","table-striped"],[1,"bg-dark","text-white"],[4,"ngFor","ngForOf"],["alt","",2,"width","140px",3,"src"],[1,"btn-group"],["type","submit",1,"btn","btn-info",3,"routerLink"],[1,"fa","fa-pencil"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div"),r.Vb(3,"div",1),r.Vb(4,"div",2),r.Ec(5,"Search"),r.Ub(),r.Vb(6,"div",3),r.Vb(7,"input",4),r.cc("ngModelChange",function(t){return e.filterKey=t}),r.Ub(),r.Ub(),r.Ub(),r.Vb(8,"button",5),r.Rb(9,"i",6),r.Ub(),r.Vb(10,"table",7),r.Vb(11,"thead",8),r.Vb(12,"th"),r.Ec(13,"Title"),r.Ub(),r.Vb(14,"th"),r.Ec(15,"Description"),r.Ub(),r.Vb(16,"th"),r.Ec(17,"Size"),r.Ub(),r.Vb(18,"th"),r.Ec(19,"Type"),r.Ub(),r.Vb(20,"th"),r.Ec(21,"Photo"),r.Ub(),r.Rb(22,"th"),r.Ub(),r.Vb(23,"tbody"),r.Dc(24,uT,17,8,"tr",9),r.fc(25,"filter"),r.fc(26,"async"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cb(7),r.kc("ngModel",e.filterKey),r.Cb(1),r.kc("routerLink",r.mc(8,cT)),r.Cb(16),r.kc("ngForOf",r.hc(25,3,r.gc(26,6,e.list$),e.filterKey)))},directives:[Pt,Gt,_e,Ua,A],pipes:[sT,V],styles:[""]}),t})();const hT=function(){return{exact:!0}};let dT=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["app-side-nav"]],decls:14,vars:4,consts:[["data-color","purple","data-background-color","white","data-image","../assets/img/sidebar-1.jpg",1,"sidebar"],[1,"logo"],["href","http://www.creative-tim.com",1,"simple-text","logo-normal"],[1,"sidebar-wrapper"],[1,"nav"],["routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],["routerLink","paintings",1,"nav-link"],["routerLink","articles",1,"nav-link"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"a",2),r.Ec(3," Creative Tim "),r.Ub(),r.Ub(),r.Vb(4,"div",3),r.Vb(5,"ul",4),r.Vb(6,"li",5),r.Vb(7,"a",6),r.Vb(8,"p"),r.Ec(9,"Photos"),r.Ub(),r.Ub(),r.Ub(),r.Vb(10,"li",5),r.Vb(11,"a",7),r.Vb(12,"p"),r.Ec(13,"Articles"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&t&&(r.Cb(6),r.kc("routerLinkActiveOptions",r.mc(2,hT)),r.Cb(4),r.kc("routerLinkActiveOptions",r.mc(3,hT)))},directives:[Ba,Va],styles:[""]}),t})(),fT=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["app-admin-nav"]],decls:44,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-transparent","navbar-absolute","fixed-top"],[1,"container-fluid"],[1,"navbar-wrapper"],["routerLink","dashboard",1,"navbar-brand"],["type","button","data-toggle","collapse","aria-controls","navigation-index","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"sr-only"],[1,"navbar-toggler-icon","icon-bar"],[1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav"],[1,"nav-item"],["href","javascript:;",1,"nav-link"],[1,"fa","fa-thermometer-quarter"],[1,"d-lg-none","d-md-block"],[1,"nav-item","dropdown"],["href","http://example.com","id","navbarDropdownMenuLink","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link"],[1,"fa","fa-bell"],[1,"notification"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","dropdown-menu-right"],["href","#",1,"dropdown-item"],["href","javascript:;","id","navbarDropdownProfile","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link"],[1,"fa","fa-user"],["aria-labelledby","navbarDropdownProfile",1,"dropdown-menu","dropdown-menu-right"],["routerLink","/",1,"dropdown-item"]],template:function(t,e){1&t&&(r.Vb(0,"nav",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"a",3),r.Ec(4,"Dashboard"),r.Ub(),r.Ub(),r.Vb(5,"button",4),r.Vb(6,"span",5),r.Ec(7,"Toggle navigation"),r.Ub(),r.Rb(8,"span",6),r.Rb(9,"span",6),r.Rb(10,"span",6),r.Ub(),r.Vb(11,"div",7),r.Vb(12,"ul",8),r.Vb(13,"li",9),r.Vb(14,"a",10),r.Rb(15,"i",11),r.Vb(16,"p",12),r.Ec(17," Stats "),r.Ub(),r.Ub(),r.Ub(),r.Vb(18,"li",13),r.Vb(19,"a",14),r.Rb(20,"i",15),r.Vb(21,"span",16),r.Ec(22,"5"),r.Ub(),r.Vb(23,"p",12),r.Ec(24," Some Actions "),r.Ub(),r.Ub(),r.Vb(25,"div",17),r.Vb(26,"a",18),r.Ec(27,"Mike John responded to your email"),r.Ub(),r.Vb(28,"a",18),r.Ec(29,"You have 5 new tasks"),r.Ub(),r.Vb(30,"a",18),r.Ec(31,"You're now friend with Andrew"),r.Ub(),r.Vb(32,"a",18),r.Ec(33,"Another Notification"),r.Ub(),r.Vb(34,"a",18),r.Ec(35,"Another One"),r.Ub(),r.Ub(),r.Ub(),r.Vb(36,"li",13),r.Vb(37,"a",19),r.Rb(38,"i",20),r.Vb(39,"p",12),r.Ec(40," Account "),r.Ub(),r.Ub(),r.Vb(41,"div",21),r.Vb(42,"a",22),r.Ec(43,"Log out"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub())},directives:[Va],styles:[""]}),t})(),pT=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["app-admin-footer"]],decls:25,vars:0,consts:[[1,"footer"],[1,"container-fluid"],[1,"float-left"],["href","https://www.creative-tim.com"],["href","https://creative-tim.com/presentation"],["href","http://blog.creative-tim.com"],["href","https://www.creative-tim.com/license"],[1,"copyright","float-right"],[1,"material-icons"],["href","https://www.creative-tim.com","target","_blank"]],template:function(t,e){1&t&&(r.Vb(0,"footer",0),r.Vb(1,"div",1),r.Vb(2,"nav",2),r.Vb(3,"ul"),r.Vb(4,"li"),r.Vb(5,"a",3),r.Ec(6," Creative Tim "),r.Ub(),r.Ub(),r.Vb(7,"li"),r.Vb(8,"a",4),r.Ec(9," About Us "),r.Ub(),r.Ub(),r.Vb(10,"li"),r.Vb(11,"a",5),r.Ec(12," Blog "),r.Ub(),r.Ub(),r.Vb(13,"li"),r.Vb(14,"a",6),r.Ec(15," Licenses "),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(16,"div",7),r.Ec(17," \xa9 "),r.Ec(18,", made with "),r.Vb(19,"i",8),r.Ec(20,"favorite"),r.Ub(),r.Ec(21," by "),r.Vb(22,"a",9),r.Ec(23,"Creative Tim"),r.Ub(),r.Ec(24," for a better web. "),r.Ub(),r.Ub(),r.Ub())},styles:[""]}),t})(),gT=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["app-admin"]],decls:9,vars:0,consts:[["rel","stylesheet","href","/assets/css/material-dashboard.min.css"],[1,"wrapper"],[1,"main-panel"],[1,"content"],[1,"container-fluid"]],template:function(t,e){1&t&&(r.Rb(0,"link",0),r.Vb(1,"div",1),r.Rb(2,"app-side-nav"),r.Vb(3,"div",2),r.Rb(4,"app-admin-nav"),r.Vb(5,"div",3),r.Vb(6,"div",4),r.Rb(7,"router-outlet"),r.Ub(),r.Ub(),r.Rb(8,"app-admin-footer"),r.Ub(),r.Ub())},directives:[dT,fT,Ha,pT],styles:[""]}),t})();function mT(t,e){if(1&t&&(r.Vb(0,"div",1),r.Vb(1,"div",2),r.Vb(2,"a",3),r.Rb(3,"img",4),r.Ub(),r.Ub(),r.Vb(4,"div",5),r.Vb(5,"h5"),r.Ec(6),r.Ub(),r.Ub(),r.Ub()),2&t){const t=r.ec();r.Cb(2),r.lc("href",t.painting.fullPicture,r.yc),r.Cb(1),r.lc("src",t.painting.picture,r.yc),r.lc("alt",t.painting.name),r.Cb(3),r.Fc(t.painting.name)}}let yT=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["app-item-card"]],inputs:{painting:"painting"},decls:1,vars:1,consts:[["class","d-flex flex-column cards",4,"ngIf"],[1,"d-flex","flex-column","cards"],[1,"card-header","my-2"],["target","_blank",3,"href"],[3,"src","alt"],[1,"card-body","text-center"]],template:function(t,e){1&t&&r.Dc(0,mT,7,4,"div",0),2&t&&r.kc("ngIf",e.painting)},directives:[R],styles:["img[_ngcontent-%COMP%]{width:100%;box-shadow:0 0 20px #000}.cards[_ngcontent-%COMP%]{color:#fff}.card-header[_ngcontent-%COMP%], .cards[_ngcontent-%COMP%]{border:none;background-color:initial}"]}),t})();function vT(t,e){1&t&&r.Rb(0,"app-item-card",4),2&t&&r.kc("painting",e.$implicit)}let bT=(()=>{class t{constructor(t){this.pService=t}ngOnInit(){this.paintings$=this.pService.list$}}return t.\u0275fac=function(e){return new(e||t)(r.Qb($S))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-item-card-container"]],outputs:{paintings$:"paintings$"},decls:6,vars:3,consts:[[1,"container","mx-0","px-0","mx-sm-auto","px-sm-auto"],[1,"row","col","col-lg-8","item-card--container","mx-0","px-0","mx-sm-auto"],[1,"text-center","my-4","text-white"],["class","col-12 col-md-6 col-lg-4",3,"painting",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4",3,"painting"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"h2",2),r.Ec(3,"Gallery"),r.Ub(),r.Dc(4,vT,1,1,"app-item-card",3),r.fc(5,"async"),r.Ub(),r.Ub()),2&t&&(r.Cb(4),r.kc("ngForOf",r.gc(5,1,e.paintings$)))},directives:[A,yT],pipes:[V],styles:[".item-card--container[_ngcontent-%COMP%]{background-image:linear-gradient(#f59c38,#323232);background-attachment:fixed;height:100%;box-shadow:0 0 20px #000}"]}),t})();function _T(t,e){if(1&t&&(r.Vb(0,"div",1),r.Vb(1,"div",2),r.Rb(2,"img",3),r.Ub(),r.Vb(3,"div",4),r.Vb(4,"h1",5),r.Ec(5),r.Ub(),r.Ub(),r.Vb(6,"div",6),r.Ec(7),r.Rb(8,"br"),r.Ec(9," <"),r.Vb(10,"a",7),r.Ec(11,"read-more"),r.Ub(),r.Ec(12,"> "),r.Ub(),r.Ub()),2&t){const t=r.ec();r.Cb(2),r.lc("src",t.article.photo,r.yc),r.lc("alt",t.article.title),r.Cb(3),r.Fc(t.article.title),r.Cb(2),r.Gc("",t.article.abstract," "),r.Cb(3),r.lc("href",t.article.link,r.yc)}}let wT=(()=>{class t{constructor(){this.article=new cu}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Kb({type:t,selectors:[["app-article-card"]],inputs:{article:"article"},decls:1,vars:1,consts:[["class","d-flex flex-column cards",4,"ngIf"],[1,"d-flex","flex-column","cards"],[1,"img-container","mx-auto","mt-5"],[3,"src","alt"],[1,"article-title","text-center"],[1,"h3","mx-auto","mt-3"],[1,"article-abstract","text-center","mb-5"],["target","_blank",3,"href"]],template:function(t,e){1&t&&r.Dc(0,_T,13,5,"div",0),2&t&&r.kc("ngIf",e.article)},directives:[R],styles:[".cards[_ngcontent-%COMP%]{color:#f5f5f5;height:500px}.img-container[_ngcontent-%COMP%]{background-color:initial;width:90%}img[_ngcontent-%COMP%]{width:100%;box-shadow:0 0 20px #000}"]}),t})();function CT(t,e){1&t&&r.Rb(0,"app-article-card",4),2&t&&r.kc("article",e.$implicit)}let OT=(()=>{class t{constructor(t){this.artService=t,this.articles$=new St.a}ngOnInit(){this.articles$=this.artService.list$}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(pO))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-article-card-container"]],outputs:{articles$:"articles$"},decls:6,vars:3,consts:[[1,"container","mx-0","px-0","mx-sm-auto","px-sm-auto"],[1,"row","col","col-lg-8","article-card--container","mx-0","px-0","mx-sm-auto","pb-4"],[1,"text-center","mt-5","text-white"],["class","col-12 col-md-6 col-lg-4",3,"article",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4",3,"article"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"h2",2),r.Ec(3,"Articles"),r.Ub(),r.Dc(4,CT,1,1,"app-article-card",3),r.fc(5,"async"),r.Ub(),r.Ub()),2&t&&(r.Cb(4),r.kc("ngForOf",r.gc(5,1,e.articles$)))},directives:[A,wT],pipes:[V],styles:[".article-card--container[_ngcontent-%COMP%]{background-image:linear-gradient(#323232,#f59c38);box-shadow:0 0 40px #000;background-attachment:fixed;height:100%;z-index:0}"]}),t})();const ET=[{path:"admin",component:gT,children:[{path:"paintings",component:lT},{path:"paintings/:id",component:tT},{path:"articles",component:oT},{path:"articles/:id",component:KS}]},{path:"",component:(()=>{class t{constructor(t){this.pService=t,this.paintings$=new St.a}ngOnInit(){this.paintings$=this.pService.list$}}return t.\u0275fac=function(e){return new(e||t)(r.Qb($S))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-home"]],outputs:{paintings$:"paintings$"},decls:81,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","mb-0","fixed-top"],["href","#",1,"navbar-brand"],[1,"d-flex","align-items-center","justify-content-center"],["src","/assets/img/logos/historian-narancss\xe1rga.png","alt","historian",1,"historian","mx-auto"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item","mx-auto","m-md-0"],["href","#gallery",1,"nav-link"],[1,"sr-only"],["href","#about",1,"nav-link"],["href","#articles",1,"nav-link"],["href","#contact",1,"nav-link"],[1,"main"],["id","gallery",1,"header"],[1,"d-flex","justify-content-center","logo-container"],["src","/assets/img/logos/h narancss\xe1rga.png","alt","h","srcset","",1,"h-logo"],[1,"card-container"],[1,"container","mx-0","px-0","mx-sm-auto","px-sm-auto"],[1,"row","about","col-12","col-lg-8","mx-0","mx-sm-auto","d-flex"],["id","about",1,"about-header","text-white"],[1,"h2","mx-auto","mt-3","about-title"],[1,"mt-4","mt-md-5"],["src","/assets/img/r\xf3lam.jpg","alt","myself",1,"myself","p-0"],["id","articles"],[1,"article-container"],["id","contact"],[1,"row","contact","col-12","col-lg-8","mx-0","mx-sm-auto","d-flex"],[1,"contact"],[1,"text-center","text-white","mt-4"],[1,"row","mx-auto","mt-5"],[1,"linkedin-con","text-center","mx-auto"],["href","https://www.linkedin.com/in/gerg%C5%91-pap-73105820a/","target","_blank","data-toggle","tooltip","data-placement","top","title","LinkedIn",1,"text-white","mr-2"],["aria-hidden","true",1,"linkedin-icon","fa","fa-linkedin"],[1,"facebook-con","text-center","mx-auto"],["href","https://www.facebook.com/gergo.pap.90/","target","_blank","data-toggle","tooltip","data-placement","top","title","Facebook",1,"text-white","mr-2"],["aria-hidden","true",1,"facebook-icon","fa","fa-facebook-f"],[1,"instagram-con","text-center","mx-auto"],["href","https://www.instagram.com/historianphotography/","target","_blank","data-toggle","tooltip","data-placement","top","title","Facebook",1,"text-white","mr-2"],["aria-hidden","true",1,"instagram-icon","fa","fa-instagram"],[1,"container-lg-fluid","mx-0","px-0"],[1,"row"],[1,"col","footer","py-4","d-flex"],[1,"copyright","mx-auto","mx-md-0"]],template:function(t,e){1&t&&(r.Vb(0,"nav",0),r.Vb(1,"a",1),r.Vb(2,"div",2),r.Rb(3,"img",3),r.Ec(4,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),r.Ub(),r.Ub(),r.Vb(5,"button",4),r.Rb(6,"span",5),r.Ub(),r.Vb(7,"div",6),r.Vb(8,"ul",7),r.Vb(9,"li",8),r.Vb(10,"a",9),r.Ec(11,"Gallery "),r.Vb(12,"span",10),r.Ec(13,"(current)"),r.Ub(),r.Ub(),r.Ub(),r.Vb(14,"li",8),r.Vb(15,"a",11),r.Ec(16,"About"),r.Ub(),r.Ub(),r.Vb(17,"li",8),r.Vb(18,"a",12),r.Ec(19,"Articles"),r.Ub(),r.Ub(),r.Vb(20,"li",8),r.Vb(21,"a",13),r.Ec(22,"Contact"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(23,"main",14),r.Vb(24,"section",15),r.Vb(25,"div",16),r.Rb(26,"img",17),r.Ub(),r.Ub(),r.Vb(27,"section"),r.Rb(28,"app-item-card-container",18),r.Ub(),r.Vb(29,"section"),r.Vb(30,"div",19),r.Vb(31,"div",20),r.Vb(32,"div",21),r.Vb(33,"h1",22),r.Ec(34,"About me"),r.Ub(),r.Vb(35,"p",23),r.Ec(36,"My name is Gerg\u0151 Pap. "),r.Rb(37,"br"),r.Ec(38,"I am a hungarian amateur nature photographer and Frontend webdeveloper. "),r.Rb(39,"br"),r.Ec(40,"What makes me happy is to help other people realize what they and their work worth."),r.Rb(41,"br"),r.Rb(42,"br"),r.Ec(43,"I won't use big words about how great things I can do, "),r.Rb(44,"br"),r.Ec(45,"cause that just woludn't be me. "),r.Rb(46,"br"),r.Ec(47,"So I just let my Photos and my site to talk for themselfs. "),r.Rb(48,"br"),r.Ec(49," If you like what you see, just enjoy it!"),r.Ub(),r.Rb(50,"img",24),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(51,"section",25),r.Rb(52,"app-article-card-container",26),r.Ub(),r.Vb(53,"section",27),r.Vb(54,"div",19),r.Vb(55,"div",28),r.Vb(56,"div",29),r.Vb(57,"h3",30),r.Ec(58,"Contact me"),r.Ub(),r.Vb(59,"div",31),r.Vb(60,"div",32),r.Vb(61,"a",33),r.Rb(62,"i",34),r.Vb(63,"span",10),r.Ec(64,"Link to my linkedIn page"),r.Ub(),r.Ub(),r.Ub(),r.Vb(65,"div",35),r.Vb(66,"a",36),r.Rb(67,"i",37),r.Vb(68,"span",10),r.Ec(69,"Link to my facebook page"),r.Ub(),r.Ub(),r.Ub(),r.Vb(70,"div",38),r.Vb(71,"a",39),r.Rb(72,"i",40),r.Vb(73,"span",10),r.Ec(74,"Link to my instagram page"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(75,"footer"),r.Vb(76,"div",41),r.Vb(77,"div",42),r.Vb(78,"div",43),r.Vb(79,"h6",44),r.Ec(80,"\xa9 Historian 2021. All Rights Reserved"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub())},directives:[bT,OT],styles:['@charset "UTF-8";html[_ngcontent-%COMP%]{margin:0;padding:0}.historian[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;width:90px}.navbar[_ngcontent-%COMP%]{box-shadow:0 0 20px #000}.header[_ngcontent-%COMP%]{height:400px;width:100%;background-image:url(/assets/img/\u0151zbak.jpg);background-size:150%;background-position:50%;box-shadow:0 0 40px #000;z-index:1}.h-logo[_ngcontent-%COMP%]{width:50%;position:absolute}.logo-container[_ngcontent-%COMP%]{position:absolute;z-index:1;background-color:#212121;top:348px;width:100px;height:100px;right:20px;border-radius:100px;box-shadow:0 0 40px #000}.main[_ngcontent-%COMP%]{background-image:url(/assets/img/t\u0171zfa.jpg);background-size:100%;background-attachment:fixed}.card-container[_ngcontent-%COMP%]{position:relative;z-index:0!important}.about[_ngcontent-%COMP%]{background-color:#323232;box-shadow:0 0 40px #000;height:370px;z-index:1;position:relative}.about-title[_ngcontent-%COMP%]{text-shadow:0 0 20px #000}.ring[_ngcontent-%COMP%]{left:450px}.ring[_ngcontent-%COMP%], .ring2[_ngcontent-%COMP%]{position:absolute;top:-45px;width:80px}.ring2[_ngcontent-%COMP%]{left:300px}.myself[_ngcontent-%COMP%]{display:none;position:absolute;border-radius:150px;top:-30px;right:30px;box-shadow:0 0 20px #000}.article-container[_ngcontent-%COMP%]{position:relative;z-index:0!important}.contact[_ngcontent-%COMP%]{background-color:#323232;box-shadow:0 0 40px #000;height:290px;z-index:0;position:relative}.linkedin-con[_ngcontent-%COMP%]{background-color:#1da1f3}.facebook-con[_ngcontent-%COMP%], .linkedin-con[_ngcontent-%COMP%]{width:80px;height:80px;opacity:90%;vertical-align:middle;font-size:50px;line-height:80px;border-radius:10px;box-shadow:0 0 20px #0a0a0a}.facebook-con[_ngcontent-%COMP%]{background-color:#3b5999}.instagram-con[_ngcontent-%COMP%]{background-image:linear-gradient(#b60000,#a95dac);width:80px;height:80px;opacity:90%;vertical-align:middle;font-size:50px;line-height:80px;border-radius:10px;box-shadow:0 0 20px #0a0a0a}.footer[_ngcontent-%COMP%]{background-color:#323232;color:#f5f5f5;z-index:1;box-shadow:0 0 20px #000}@media screen and (min-width:768px){.header[_ngcontent-%COMP%]{background-size:100%}.logo-container[_ngcontent-%COMP%]{top:325px;width:150px;height:150px;right:50px}.about[_ngcontent-%COMP%]{height:340px}.myself[_ngcontent-%COMP%]{display:initial;width:130px}.facebook-con[_ngcontent-%COMP%], .instagram-con[_ngcontent-%COMP%], .linkedin-con[_ngcontent-%COMP%]{width:90px;height:90px;line-height:90px}}@media screen and (min-width:1200px){.header[_ngcontent-%COMP%]{background-position-y:710px}.historian[_ngcontent-%COMP%]{width:80px}.logo-container[_ngcontent-%COMP%]{top:300px;width:200px;height:200px;right:70px}.myself[_ngcontent-%COMP%]{width:230px}.facebook-con[_ngcontent-%COMP%], .instagram-con[_ngcontent-%COMP%], .linkedin-con[_ngcontent-%COMP%]{width:100px;height:100px;line-height:100px}}']}),t})()},{path:"phdetails",component:(()=>{class t{constructor(t){this.pUService=t}ngOnInit(){}deletePhoto(t){this.pUService.deleteFile(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(fS))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-photo-details"]],inputs:{photo:"photo"},decls:3,vars:2,consts:[[2,"width","140px",3,"src","alt"],[1,"btn","btn-danger","btn-sm",2,"float","right",3,"click"]],template:function(t,e){1&t&&(r.Rb(0,"img",0),r.Vb(1,"button",1),r.cc("click",function(){return e.deletePhoto(e.photo)}),r.Ec(2," Delete\n"),r.Ub()),2&t&&(r.lc("src",e.photo.url,r.yc),r.lc("alt",e.photo.name))},styles:[""]}),t})()}];let ST=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({imports:[[Xa.forRoot(ET)],Xa]}),t})(),TT=(()=>{class t{constructor(t){this.pService=t,this.title="mpage-project",this.items$=this.pService.list$}}return t.\u0275fac=function(e){return new(e||t)(r.Qb($S))},t.\u0275cmp=r.Kb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Rb(0,"router-outlet")},directives:[Ha],styles:["html[_ngcontent-%COMP%]{margin:0;padding:0}"]}),t})();const kT={apiKey:"AIzaSyCY1p2jRtN6YboyfNDY-U3JMGNsQhHwKFQ",authDomain:"moms-page-45979.firebaseapp.com",databaseURL:"https://moms-page-45979-default-rtdb.europe-west1.firebasedatabase.app",projectId:"moms-page-45979",storageBucket:"moms-page-45979.appspot.com",messagingSenderId:"585678334856",appId:"1:585678334856:web:9beaca01e32afc07efa83d",measurementId:"G-V88N93WCCJ"};var IT=n("Y7HM");function xT(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}let AT;n("n6bG"),n("3N8a"),n("IjjT");try{AT="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Sk){AT=!1}"undefined"!=typeof Element&&Element;const jT=["*"],RT=["input"],PT=function(t,e,n,r){return{"custom-control custom-checkbox":t,"form-check":e,"custom-control-inline":n,"form-check-inline":r}},NT=function(t,e,n){return{"filled-in":t,"custom-control-input":e,"form-check-input":n}},DT=function(t,e,n,r,i){return{"custom-control-label":t,"form-check-label":e,"label-before":n,"checkbox-rounded":r,disabled:i}},FT={provide:At,useExisting:Object(r.V)(()=>LT),multi:!0};let LT=(()=>{class t{constructor(){this.btnCheckboxTrue=!0,this.btnCheckboxFalse=!1,this.state=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype}onClick(){this.isDisabled||(this.toggle(!this.state),this.onChange(this.value))}ngOnInit(){this.toggle(this.trueValue===this.value)}get trueValue(){return void 0===this.btnCheckboxTrue||this.btnCheckboxTrue}get falseValue(){return void 0!==this.btnCheckboxFalse&&this.btnCheckboxFalse}toggle(t){this.state=t,this.value=this.state?this.trueValue:this.falseValue}writeValue(t){this.state=this.trueValue===t,this.value=t?this.trueValue:this.falseValue}setDisabledState(t){this.isDisabled=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Lb({type:t,selectors:[["","mdbCheckbox",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.cc("click",function(){return e.onClick()}),2&t&&r.Ib("active",e.state)},inputs:{btnCheckboxTrue:"btnCheckboxTrue",btnCheckboxFalse:"btnCheckboxFalse"},features:[r.Bb([FT])]}),t})();const MT={provide:At,useExisting:Object(r.V)(()=>UT),multi:!0};let UT=(()=>{class t{constructor(t,e){this.el=t,this.renderer=e,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.radioElementsArray=[],this.disabled=!1}get isActive(){return this.mdbRadio===this.value}onClick(t){if(!this.disabled){try{this.el.nativeElement.parentElement.childNodes.forEach(t=>{this.radioElementsArray.push(t)}),this.radioElementsArray.forEach(t=>{this.renderer.removeClass(t,"active")}),this.renderer.addClass(t.target,"active")}catch(e){}this.el.nativeElement.attributes.disabled||(this.value=this.uncheckable&&this.mdbRadio===this.value?void 0:this.mdbRadio,this.onTouched(),this.onChange(this.value))}}ngOnInit(){this.uncheckable=void 0!==this.uncheckable}onBlur(){this.onTouched()}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.l),r.Qb(r.F))},t.\u0275dir=r.Lb({type:t,selectors:[["","mdbRadio",""]],hostVars:4,hostBindings:function(t,e){1&t&&r.cc("click",function(t){return e.onClick(t)}),2&t&&r.Ib("disabled",e.disabled)("active",e.isActive)},inputs:{disabled:"disabled",value:"value",uncheckable:"uncheckable",mdbRadio:"mdbRadio"},features:[r.Bb([MT])]}),t})(),VT=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({}),t})();"undefined"!=typeof window&&window;let qT=(()=>{class t{constructor(){this.interval=5e3,this.noPause=!1,this.noWrap=!1,this.keyboard=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac}),t})(),BT=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({providers:[qT],imports:[[q,VT]]}),t})();const HT={provide:At,useExisting:Object(r.V)(()=>KT),multi:!0};let zT=0;class WT{}let KT=(()=>{class t{constructor(t){this._cdRef=t,this.defaultId="mdb-checkbox-"+ ++zT,this.id=this.defaultId,this.checked=!1,this.filledIn=!1,this.indeterminate=!1,this.rounded=!1,this.checkboxPosition="left",this.default=!1,this.inline=!1,this.change=new r.n,this.checkboxClicked=new ci.a,this.onChange=t=>{},this.onTouched=()=>{}}onLabelClick(t){t.stopPropagation(),this.checkboxClicked.next(!0)}onDocumentClick(){this.checkboxClicked.next(!1)}ngOnInit(){!this.indeterminate||this.filledIn||this.rounded||(this.inputEl.indeterminate=!0)}ngOnChanges(t){t.hasOwnProperty("checked")&&(this.checked=t.checked.currentValue)}get changeEvent(){const t=new WT;return t.element=this,t.checked=this.checked,t}toggle(){this.disabled||(this.checked=!this.checked,this.indeterminate=!1,this.onChange(this.checked),this._cdRef.markForCheck())}onCheckboxClick(t){t.stopPropagation(),this.toggle()}onCheckboxChange(t){t.stopPropagation(),function(t=0,e,n){let r=-1;return Object(IT.a)(e)?r=Number(e)<1?1:Number(e):Object(di.a)(e)&&(n=e),Object(di.a)(n)||(n=lu.a),new St.a(e=>{const i=Object(IT.a)(t)?t:+t-n.now();return n.schedule(xT,i,{index:0,period:r,subscriber:e})})}(0).subscribe(()=>this.change.emit(this.changeEvent))}onBlur(){this.checkboxClicked.pipe(Pi(1)).subscribe(t=>{t||this.onTouched()})}writeValue(t){this.value=t,this.checked=!!t,this._cdRef.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.h))},t.\u0275cmp=r.Kb({type:t,selectors:[["mdb-checkbox"]],viewQuery:function(t,e){if(1&t&&r.Ic(RT,3),2&t){let t;r.sc(t=r.dc())&&(e.inputEl=t.first)}},hostBindings:function(t,e){1&t&&r.cc("click",function(t){return e.onLabelClick(t)})("click",function(){return e.onDocumentClick()},!1,r.uc)},inputs:{id:"id",checked:"checked",filledIn:"filledIn",indeterminate:"indeterminate",rounded:"rounded",checkboxPosition:"checkboxPosition",default:"default",inline:"inline",value:"value",disabled:"disabled",class:"class",required:"required",name:"name",tabIndex:"tabIndex"},outputs:{change:"change"},features:[r.Bb([HT]),r.Ab],ngContentSelectors:jT,decls:5,vars:27,consts:[[3,"ngClass"],["type","checkbox",1,"custom-control-input",3,"ngClass","id","checked","disabled","required","indeterminate","tabIndex","blur","click","change"],["input",""]],template:function(t,e){1&t&&(r.jc(),r.Vb(0,"div",0),r.Vb(1,"input",1,2),r.cc("blur",function(){return e.onBlur()})("click",function(t){return e.onCheckboxClick(t)})("change",function(t){return e.onCheckboxChange(t)}),r.Ub(),r.Vb(3,"label",0),r.ic(4),r.Ub(),r.Ub()),2&t&&(r.kc("ngClass",r.qc(12,PT,e.default,!e.default,e.inline,e.inline&&!e.default)),r.Cb(1),r.kc("ngClass",r.pc(17,NT,e.filledIn||e.rounded,e.default,!e.default))("id",e.id)("checked",e.checked)("disabled",e.disabled)("required",e.required)("indeterminate",e.indeterminate)("tabIndex",e.tabIndex),r.Db("name",e.name)("value",e.value),r.Cb(2),r.kc("ngClass",r.rc(21,DT,e.default,!e.default,"right"===e.checkboxPosition,e.rounded,e.disabled)),r.Db("for",e.id))},directives:[I],styles:[".form-check-label.label-before:after,.form-check-label.label-before:before{top:0!important;right:0!important;left:auto!important}.custom-control-label.label-before:after,.custom-control-label.label-before:before{top:.25rem!important;right:0!important;left:auto!important}.custom-control-label.label-before{position:absolute}.custom-control-inline .label-before{position:relative}.form-check-label.label-before{padding-left:0!important;padding-right:35px}.custom-control-label.label-before{padding-left:0!important;padding-right:25px!important}.form-check-input[type=checkbox]:checked+.label-before:before,label.btn input[type=checkbox]:checked+.label-before:before{top:-4px!important;right:10px!important;left:auto!important}.form-check-input[type=checkbox]:indeterminate+.label-before:before,label.btn input[type=checkbox]:indeterminate+.label-before:before{top:-11px!important;right:16px!important;left:auto!important}.form-check-input[type=checkbox].filled-in+.label-before:before,.form-check-input[type=checkbox].filled-in:checked+.label-before:before,label.btn input[type=checkbox].filled-in+.label-before:before,label.btn input[type=checkbox].filled-in:checked+.label-before:before{top:0!important;right:10px!important;left:auto!important}.form-check-input[type=checkbox].filled-in+.label-before:after,label.btn input[type=checkbox].filled-in+.label-before:after{top:0!important;left:auto!important}.checkbox-rounded:after{border-radius:50%!important}mdb-checkbox .form-check{padding-left:0!important}"],encapsulation:2,changeDetection:0}),t})();function QT(t,e){if(1!==t.nodeType)return[];const n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function $T(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function GT(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}const{overflow:e,overflowX:n,overflowY:r}=QT(t);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(n))?t:GT($T(t))}"undefined"!=typeof window&&window,"undefined"==typeof console||console;const ZT="undefined"!=typeof window&&"undefined"!=typeof document,YT=ZT&&!(!window.MSInputMethodContext||!document.documentMode),JT=ZT&&!(!window.MSInputMethodContext||!/MSIE 10/.test(navigator.userAgent));function XT(t){return 11===t?YT:10===t?JT:YT||JT}function tk(t){if(!t)return document.documentElement;const e=XT(10)?document.body:null;let n,r=t.offsetParent||null;for(;r===e&&t.nextElementSibling&&"BODY"!==t.nodeName;)n=t.nextElementSibling,r=n.offsetParent;const i=r&&r.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(r.nodeName)&&"static"===QT(r,"position")?tk(r):r:n?n.ownerDocument.documentElement:document.documentElement}function ek(t){return null!==t.parentNode?ek(t.parentNode):t}function nk(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;const n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);const{commonAncestorContainer:s}=o;if(t!==s&&e!==s||r.contains(i))return function(t){const{nodeName:e}=t;return"BODY"!==e&&("HTML"===e||tk(t.firstElementChild)===t)}(s)?s:tk(s);const a=ek(t);return a.host?nk(a.host,e):nk(t,ek(e).host)}function rk(t,e){const n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t[`border${n}Width`])+parseFloat(t[`border${r}Width`])}function ik(t,e,n,r){return Math.max(e[`offset${t}`],e[`scroll${t}`],n[`client${t}`],n[`offset${t}`],n[`scroll${t}`],XT(10)?parseInt(n[`offset${t}`],10)+parseInt(r["margin"+("Height"===t?"Top":"Left")],10)+parseInt(r["margin"+("Height"===t?"Bottom":"Right")],10):0)}function ok(t){const e=t.body,n=t.documentElement,r=XT(10)&&getComputedStyle(n);return{height:ik("Height",e,n,r),width:ik("Width",e,n,r)}}function sk(t,e="top"){const n="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){const e=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||e)[n]}return t[n]}function ak(t){return Object.assign(Object.assign({},t),{right:t.left+t.width,bottom:t.top+t.height})}function uk(t){let e={};try{if(XT(10)){e=t.getBoundingClientRect();const n=sk(t,"top"),r=sk(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(jC){return}const n={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===t.nodeName?ok(t.ownerDocument):{};let i=t.offsetWidth-(r.width||t.clientWidth||n.right-n.left),o=t.offsetHeight-(r.height||t.clientHeight||n.bottom-n.top);if(i||o){const e=QT(t);i-=rk(e,"x"),o-=rk(e,"y"),n.width-=i,n.height-=o}return ak(n)}function ck(t,e,n=!1){const r=XT(10),i="HTML"===e.nodeName,o=uk(t),s=uk(e),a=GT(t),u=QT(e),c=parseFloat(u.borderTopWidth),l=parseFloat(u.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));let h=ak({top:o.top-s.top-c,left:o.left-s.left-l,width:o.width,height:o.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){const t=parseFloat(u.marginTop),e=parseFloat(u.marginLeft);h.top-=c-t,h.bottom-=c-t,h.left-=l-e,h.right-=l-e,h.marginTop=t,h.marginLeft=e}return(r&&!n?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(h=function(t,e,n=!1){const r=sk(e,"top"),i=sk(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}(h,e)),h}function lk(t){const e=t.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===QT(t,"position")||lk($T(t)))}function hk(t){if(!t||!t.parentElement||XT())return document.documentElement;let e=t.parentElement;for(;e&&"none"===QT(e,"transform");)e=e.parentElement;return e||document.documentElement}function dk(t,e,n=0,r,i=!1){let o={top:0,left:0};const s=i?hk(t):nk(t,e);if("viewport"===r)o=function(t,e=!1){const n=t.ownerDocument.documentElement,r=ck(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:sk(n),a=e?0:sk(n,"left");return ak({top:s-Number(r.top)+Number(r.marginTop),left:a-Number(r.left)+Number(r.marginLeft),width:i,height:o})}(s,i);else{let n;"scrollParent"===r?(n=GT($T(e)),"BODY"===n.nodeName&&(n=t.ownerDocument.documentElement)):n="window"===r?t.ownerDocument.documentElement:r;const a=ck(n,s,i);if("HTML"!==n.nodeName||lk(s))o=a;else{const{height:e,width:n}=ok(t.ownerDocument);o.top+=a.top-a.marginTop,o.bottom=Number(e)+Number(a.top),o.left+=a.left-a.marginLeft,o.right=Number(n)+Number(a.left)}}return o.left+=n,o.top+=n,o.right-=n,o.bottom-=n,o}function fk({width:t,height:e}){return t*e}function pk(t,e,n,r,i=["top","left","bottom","right"],o="viewport",s=0){if(-1===t.indexOf("auto"))return t;const a=dk(n,r,s,o),u={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},c=Object.keys(u).map(t=>Object.assign(Object.assign({key:t},u[t]),{area:fk(u[t])})).sort((t,e)=>e.area-t.area);let l=c.filter(({width:t,height:e})=>t>=n.clientWidth&&e>=n.clientHeight);l=i.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:l[e]}),{});const h=l.length>0?l[0].key:c[0].key,d=t.split(" ")[1];return n.className=n.className.replace(/auto/g,h),h+(d?`-${d}`:"")}function gk(t){const e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:Number(t.offsetWidth)+r,height:Number(t.offsetHeight)+n}}function mk(t,e,n=null){return ck(e,n?hk(t):nk(t,e),n)}function yk(t,e,n){const r=n.split(" ")[0],i=gk(t),o={width:i.width,height:i.height},s=-1!==["right","left"].indexOf(r),a=s?"top":"left",u=s?"left":"top",c=s?"height":"width",l=s?"width":"height";return o[a]=e[a]+e[c]/2-i[c]/2,o[u]=r===u?e[u]-i[l]:e[function(t){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,t=>e[t])}(u)],o}function vk(t,e){return t&&t.modifiers&&t.modifiers[e]&&t.modifiers[e].enabled}function bk(t){let e=t.offsets.target;const n=t.instance.target.querySelector(".arrow");if(!n)return t;const r=-1!==["left","right"].indexOf(t.placement),i=r?"height":"width",o=r?"Top":"Left",s=o.toLowerCase(),a=r?"left":"top",u=r?"bottom":"right",c=gk(n)[i];t.offsets.host[u]-c<e[s]&&(e[s]-=e[s]-(t.offsets.host[u]-c)),Number(t.offsets.host[s])+Number(c)>e[u]&&(e[s]+=Number(t.offsets.host[s])+Number(c)-Number(e[u])),e=ak(e);const l=Number(t.offsets.host[s])+Number(t.offsets.host[i]/2-c/2),h=QT(t.instance.target),d=parseFloat(h[`margin${o}`]),f=parseFloat(h[`border${o}Width`]);let p=l-e[s]-d-f;return p=Math.max(Math.min(e[i]-c,p),0),t.offsets.arrow={[s]:Math.round(p),[a]:""},t.instance.arrow=n,t}function _k(t){if(t.offsets.target=ak(t.offsets.target),!vk(t.options,"flip"))return t.offsets.target=Object.assign(Object.assign({},t.offsets.target),yk(t.instance.target,t.offsets.host,t.placement)),t;const e=dk(t.instance.target,t.instance.host,0,"viewport",!1);let n=t.placement.split(" ")[0],r=t.placement.split(" ")[1]||"";const i=t.offsets.host,o=t.instance.target,s=t.instance.host,a=r?pk("auto",i,o,s,["top","bottom"]):pk("auto",i,o,s),u=[n,a];return u.forEach((i,o)=>{if(n!==i||u.length===o+1)return t;n=t.placement.split(" ")[0];const s="left"===n&&Math.floor(t.offsets.target.right)>Math.floor(t.offsets.host.left)||"right"===n&&Math.floor(t.offsets.target.left)<Math.floor(t.offsets.host.right)||"top"===n&&Math.floor(t.offsets.target.bottom)>Math.floor(t.offsets.host.top)||"bottom"===n&&Math.floor(t.offsets.target.top)<Math.floor(t.offsets.host.bottom),a=Math.floor(t.offsets.target.left)<Math.floor(e.left),c=Math.floor(t.offsets.target.right)>Math.floor(e.right),l=Math.floor(t.offsets.target.top)<Math.floor(e.top),h=Math.floor(t.offsets.target.bottom)>Math.floor(e.bottom),d="left"===n&&a||"right"===n&&c||"top"===n&&l||"bottom"===n&&h,f=-1!==["top","bottom"].indexOf(n),p=f&&"left"===r&&a||f&&"right"===r&&c||!f&&"left"===r&&l||!f&&"right"===r&&h;(s||d||p)&&((s||d)&&(n=u[o+1]),p&&(r=function(t){return"right"===t?"left":"left"===t?"right":t}(r)),t.placement=n+(r?` ${r}`:""),t.offsets.target=Object.assign(Object.assign({},t.offsets.target),yk(t.instance.target,t.offsets.host,t.placement)))}),t}function wk(t){if(!vk(t.options,"preventOverflow"))return t;const e="transform",n=t.instance.target.style,{top:r,left:i,[e]:o}=n;n.top="",n.left="",n[e]="";const s=dk(t.instance.target,t.instance.host,0,"scrollParent",!1);n.top=r,n.left=i,n[e]=o;const a={primary(e){let n=t.offsets.target[e];return t.offsets.target[e]<s[e]&&(n=Math.max(t.offsets.target[e],s[e])),{[e]:n}},secondary(e){const n="right"===e?"left":"top";let r=t.offsets.target[n];return t.offsets.target[e]>s[e]&&(r=Math.min(t.offsets.target[n],s[e]-("right"===e?t.offsets.target.width:t.offsets.target.height))),{[n]:r}}};let u;return["left","right","top","bottom"].forEach(e=>{u=-1!==["left","top"].indexOf(e)?"primary":"secondary",t.offsets.target=Object.assign(Object.assign({},t.offsets.target),a[u](e))}),t}function Ck(t){const e=t.placement,n=e.split(" ")[0],r=e.split(" ")[1];if(r){const{host:e,target:i}=t.offsets,o=-1!==["bottom","top"].indexOf(n),s=o?"left":"top",a=o?"width":"height",u={left:{[s]:e[s]},right:{[s]:e[s]+e[a]-e[a]}};t.offsets.target=Object.assign(Object.assign({},i),u[r])}return t}new class{position(t,e){return this.offset(t,e)}offset(t,e){return mk(e,t)}positionElements(t,e,n,r,i){return[_k,Ck,wk,bk].reduce((t,e)=>e(t),function(t,e,n,r){const i=mk(t,e),o=!!n.match(/auto/g);let s=n.match(/auto\s(left|right|top|bottom)/g)?n.split(" ")[1]||"":n;const a=yk(t,i,s);return s=pk(s,i,t,e),{options:r,instance:{target:t,host:e,arrow:null},offsets:{target:a,host:i,arrow:null},positionFixed:!1,placement:s,placementAuto:o}}(e,t,n,i))}};let Ok=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({}),t})(),Ek=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ob({type:t,bootstrap:[TT]}),t.\u0275inj=r.Nb({providers:[],imports:[[q,Ot,BT,Ok,Ee,ST,vu.a.initializeApp(kT),dO,dS,DO,ai,VS.forRoot()]]}),t})();Object(r.U)(),wt().bootstrapModule(Ek).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);